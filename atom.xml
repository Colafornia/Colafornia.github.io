<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Minibase</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.colafornia.me/"/>
  <updated>2019-10-24T10:31:06.731Z</updated>
  <id>https://blog.colafornia.me/</id>
  
  <author>
    <name>Colafornia</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç”¨ Cypress æ‹¯æ•‘ä¸šåŠ¡é¡¹ç›®çš„å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•</title>
    <link href="https://blog.colafornia.me/post/2019/e2e-test-cypress/"/>
    <id>https://blog.colafornia.me/post/2019/e2e-test-cypress/</id>
    <published>2019-10-24T02:00:00.000Z</published>
    <updated>2019-10-24T10:31:06.731Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/cypress.png&quot; alt=&quot;cypress-cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;å…³äºå‰ç«¯æµ‹è¯•çš„ä¸€äº›ç†è®ºä¸åŸºäº &lt;code&gt;Cypress&lt;/code&gt; çš„ E2E æµ‹è¯•å…·ä½“å®è·µã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å…³äºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸€äº›ç¢ç¢å¿µ&quot;&gt;&lt;a href=&quot;#å…³äºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸€äº›ç¢ç¢å¿µ&quot; class=&quot;headerlink&quot; title=&quot;å…³äºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸€äº›ç¢ç¢å¿µ&quot;&gt;&lt;/a&gt;å…³äºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸€äº›ç¢ç¢å¿µ&lt;/h2&gt;&lt;p&gt;æ—¥å¸¸ä¸šåŠ¡é¡¹ç›®å¼€å‘çš„ç—›ç‚¹ä¹‹ä¸€ä¾¿æ˜¯å‰ç«¯çš„&lt;code&gt;å›å½’æµ‹è¯•&lt;/code&gt;ï¼Œå…ä¸äº†å„ç§æ‰‹åŠ¨ç‚¹ç‚¹ç‚¹ï¼Œä½†å‡¡æ”¹åŠ¨äº†æŸä¸ªå…¬ç”¨ç»„ä»¶ï¼Œå‡½æ•°ï¼Œéƒ½è¦æ¼«å±±éé‡åœ°æŠŠé¡¹ç›®çš„ä¸»è¦é¡µé¢éƒ½ç‚¹è¿›å»çœ‹ä¸€éæœ‰æ²¡æœ‰é—®é¢˜ã€‚é¡¹ç›®ç”¨äº† &lt;code&gt;GraphQL&lt;/code&gt; çš„è¯ï¼ŒSchema ä¸€ä¸ªæ›´æ–°ä¸åŠæ—¶ï¼ŒæŸä¸ªæ²¡æ³¨æ„åˆ°çš„é¡µé¢å°±æŒ‚äº†ï¼Œç„¶åå°±ç­‰ç€å¼€ issue æˆ–è€…æŠ¥çº¿ä¸Š Bug å§ ğŸ˜&lt;/p&gt;
&lt;p&gt;é€šè¿‡äººå·¥æ‰‹åŠ¨ç‚¹ç‚¹ç‚¹ä¸ä»…æ˜¯ç´¯ï¼Œä¹Ÿå¹¶ä¸é è°±ï¼Œæ²¡æ³•ä¿è¯æ¯ä¸€æ¬¡éƒ½æµ‹åˆ°äº†éœ€è¦å›å½’æµ‹è¯•çš„åŠŸèƒ½ã€‚æƒ³è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œå°±ä¸å¾—ä¸æ&lt;code&gt;å‰ç«¯çš„è‡ªåŠ¨åŒ–æµ‹è¯•&lt;/code&gt;ã€‚é€šè¿‡å‘½ä»¤è¡Œè·‘æµ‹è¯•ï¼Œé›†æˆ CI è‡ªåŠ¨æµ‹è¯•å²‚ä¸ç¾æ»‹æ»‹ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå›½å†…å„å‚å¯¹äºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å°šæœªå½¢æˆå¾ˆå¥½çš„å®è·µï¼Œè¯´èµ·è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¤§å®¶æƒ³åˆ°çš„ä¹Ÿè¿˜æ˜¯åç«¯æµ‹è¯•ã€‚å‡ æ¬¡æŠ€æœ¯å¤§ä¼šï¼ˆJSConfã€GMTC ç­‰ç­‰ï¼‰é‡Œå…³äºå‰ç«¯æµ‹è¯•çš„è¯é¢˜ä¹Ÿæ˜¯å¯¥å¯¥æ— å‡ ï¼Œæœ‰çš„è¯ä¹Ÿæ˜¯å›½å¤–å‰ç«¯å·¥ç¨‹å¸ˆçš„åˆ†äº«ï¼Œæˆ–æ˜¯ QA å…³äºæ­å»ºæµ‹è¯•å¹³å°çš„åˆ†äº«ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘çš„ç»éªŒé‡Œï¼Œ&lt;strong&gt;å¯¹äºä¸šåŠ¡é¡¹ç›®è€Œè¨€çš„å‰ç«¯æµ‹è¯•&lt;/strong&gt;éƒ½å¾ˆâ€œå°´å°¬â€ã€‚å¦‚æœæ˜¯å¼€å‘å·¥å…·åº“ï¼Œé‚£å¯ä»¥é€šè¿‡å•å…ƒæµ‹è¯•æ¥ä¿è¯è´¨é‡ï¼Œå¦‚æœæ˜¯å¼€å‘ UI ç»„ä»¶åº“ï¼Œå¯ä»¥é€šè¿‡ &lt;a href=&quot;https://storybook.js.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Storybook&lt;/a&gt; æ¥è¿›è¡Œè§†è§‰ä¸å¿«ç…§æµ‹è¯•ã€‚æ‰€ä»¥ä¹‹å‰æ¯æ¯æƒ³åˆ°ä¸šåŠ¡é¡¹ç›®å¦‚ä½•é›†æˆè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ„Ÿè§‰æ— ä»ä¸‹æ‰‹ï¼ˆè¿˜æœ‰å‡ æ¬¡æ˜¯è¢«æ¯”ä¸šåŠ¡ä»£ç è¿˜å¤šçš„æµ‹è¯•ä»£ç å“è·‘äº†ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä¸šåŠ¡é¡¹ç›®é‡Œå¹¶æ²¡æœ‰å¤ªå¤šå·¥å…·å‡½æ•°éœ€è¦å•å…ƒæµ‹è¯•ï¼ˆå¤§éƒ¨åˆ†é€šè¿‡ lodash æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹åº“æ¥è§£å†³å¤æ‚é€»è¾‘å¤„ç†ï¼‰ï¼ŒUI ç»„ä»¶ä¹ŸåŸºæœ¬æ˜¯ç›´æ¥é‡‡ç”¨äº†ä¸šç•Œæ¯”è¾ƒæˆç†Ÿçš„ ant-mobile, ant-design ç­‰æ–¹æ¡ˆï¼Œéœ€è¦åœ¨ä¸šåŠ¡é¡¹ç›®ä¸­å¼€å‘çš„ UI ç»„ä»¶å¹¶ä¸å¤šï¼Œå¤§å¤šæ•°æ˜¯åœ¨ç¬¬ä¸‰æ–¹çš„ UI ç»„ä»¶åŸºç¡€ä¸Šç»“åˆä¸šåŠ¡é€»è¾‘è¿›è¡ŒäºŒæ¬¡å°è£…ï¼ˆäº‹å®ä¸Š ant-design ä¹ŸæŠŠè‡ªå·±çš„ç»„ä»¶å•ç‹¬æ”¾åˆ° &lt;a href=&quot;https://github.com/react-component&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/react-component&lt;/a&gt; é‡Œç»´æŠ¤äº†ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸šåŠ¡é¡¹ç›®é‡Œéœ€è¦è‡ªåŠ¨åŒ–æµ‹è¯•çš„åœºæ™¯ä¸»è¦æ˜¯æƒ³è¦†ç›–ç”¨æˆ·çš„ä¸»è¦ä½¿ç”¨è·¯å¾„ï¼Œä¾‹å¦‚ç™»å½•æ³¨å†Œï¼ŒåŠ è´­åˆ°è´­ç‰©è½¦ï¼ŒæŸ¥çœ‹æ“ä½œè®¢å•ï¼Œä¿®æ”¹ä¸ªäººä¿¡æ¯ç­‰ç­‰ï¼Œéƒ½æ˜¯ä¸ UI ç•Œé¢çš„æ¸²æŸ“é€»è¾‘å¼ºç›¸å…³çš„ï¼Œéœ€è¦æµ‹è¯•è¿™äº›é¡µé¢çš„è¡¨å•æäº¤ï¼Œè‡ªåŠ¨è·³è½¬ï¼Œæ•°æ®æ¸²æŸ“æ˜¯å¦æœ‰å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨æ­¤å¯ä»¥æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·çš„ç‚¹å‡»è¾“å…¥æ“ä½œï¼Œäº‹ä»¶é©±åŠ¨æ¥éªŒè¯é¡µé¢æ¸²æŸ“æ˜¯å¦ç¬¦åˆé¢„æœŸ&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œè·‘æµ‹è¯•ï¼Œå¯ä»¥é›†æˆåˆ° CI&lt;/li&gt;
&lt;li&gt;è½»é‡é«˜æ•ˆï¼Œç¯å¢ƒæ˜“æ­å»ºï¼Œæµ‹è¯•ä»£ç æ˜“ç¼–å†™ï¼ˆæ¯•ç«Ÿæ˜¯ä½œä¸ºå¯¹æ•æ·å¼€å‘ï¼ŒæŒç»­é›†æˆçš„ç¯èŠ‚è¡¥å……ï¼Œå¹¶ä¸æ˜¯ QA ç¯èŠ‚çš„æµ‹è¯•ï¼Œä¸åº”èˆæœ¬é€æœ«ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³åˆ°è¿™é‡Œä¸éš¾å‘ç°ï¼Œå‰ç«¯ä¸šåŠ¡é¡¹ç›®é‡Œæœ€éœ€è¦çš„æ˜¯ E2E æµ‹è¯•ï¼Œä½†æ˜¯åœ¨å¦‚é¢˜å›¾çš„æµ‹è¯•é‡‘å­—å¡”æ‰€ç¤ºï¼ŒE2E æµ‹è¯•åœ¨é‡‘å­—å¡”é¡¶ç«¯ï¼Œæ‰§è¡Œ E2E æµ‹è¯•æˆæœ¬é«˜åˆé€Ÿåº¦æ…¢ã€‚å› æ­¤ &lt;a href=&quot;https://github.com/cypress-io/cypress&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Cypress&lt;/a&gt; åº”è¿è€Œç”Ÿï¼ŒCypress æä¾›äº†å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆï¼Œä»æµ‹è¯•é‡‘å­—å¡”é¡¶ç«¯çš„ E2E åˆ°é›†æˆæµ‹è¯•å†åˆ°å•å…ƒæµ‹è¯•éƒ½å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Cypress&quot;&gt;&lt;a href=&quot;#Cypress&quot; class=&quot;headerlink&quot; title=&quot;Cypress&quot;&gt;&lt;/a&gt;Cypress&lt;/h2&gt;&lt;p&gt;Cypress æ˜¯åœ¨ Mocha API çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€å¥—å¼€ç®±å³ç”¨çš„ E2E æµ‹è¯•æ¡†æ¶ï¼Œå¹¶ä¸ä¾èµ–å‰ç«¯æ¡†æ¶ï¼Œä¹Ÿæ— éœ€å…¶ä»–æµ‹è¯•å·¥å…·åº“ï¼Œé…ç½®ç®€å•ï¼Œå¹¶ä¸”æä¾›äº†å¼ºå¤§çš„ GUI å›¾å½¢å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨æˆªå›¾å½•å±ï¼Œå®ç°æ—¶ç©ºæ—…è¡Œå¹¶åœ¨æµ‹è¯•æµç¨‹ä¸­ Debug ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼ŒCypress çš„ä¼˜ç‚¹æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é…ç½®ç®€å•ï¼Œå¯å¿«é€Ÿé›†æˆåˆ°ç°æœ‰é¡¹ç›®ä¸­&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ‰€æœ‰ç­‰çº§çš„æµ‹è¯•ï¼ˆå³å‰é¢æ‰€æåˆ°çš„ e2e æµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç»™æ¯ä¸€æ­¥æµ‹è¯•éƒ½ç”Ÿæˆå¿«ç…§ï¼Œæ˜“äº Debug&lt;/li&gt;
&lt;li&gt;å¯ä»¥è·å–ã€æ“ä½œ Web é¡µé¢é‡Œçš„æ‰€æœ‰ DOM èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨é‡è¯•åŠŸèƒ½ï¼ŒCypress ä¼šåœ¨å½“å‰èŠ‚ç‚¹é‡è¯•å‡ æ¬¡å†æ–­å®šæµ‹è¯•å¤±è´¥&lt;/li&gt;
&lt;li&gt;æ˜“äºé›†æˆåˆ° CI ç³»ç»Ÿä¸­&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://imgchr.com/i/KU19IO&quot; alt=&quot;cypress-gui&quot;&gt;&lt;/p&gt;
&lt;video autoplay loop src=&quot;https://www.cypress.io/static/running-tests-a75997cdc1013fc4b1705c1be3a094c7.webm&quot;&gt;&lt;/video&gt;

&lt;p&gt;ç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ï¼ˆå…·ä½“å¯ä»¥å‚ç…§&lt;a href=&quot;https://docs.cypress.io/guides/overview/why-cypress.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜ç½‘å¼•å¯¼&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;å®‰è£…ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yarn add cypress --dev&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ·»åŠ åˆ°é¡¹ç›®çš„ npm è„šæœ¬ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;scripts&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;cypress:open&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;cypress open&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ ¹ç›®å½•é‡Œé…ç½® &lt;code&gt;cypress.json&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &quot;baseUrl&quot;: &quot;http://localhost:8080&quot;, // æœ¬åœ°å¯åŠ¨çš„ webpack-dev-server åœ°å€&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &quot;viewportHeight&quot;: 800, // æµ‹è¯•ç¯å¢ƒçš„é¡µé¢è§†å£é«˜åº¦&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &quot;viewportWidth&quot;: 1280 // æµ‹è¯•ç¯å¢ƒçš„é¡µé¢è§†å£å®½åº¦&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm run cypress:open&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å°±å·²ç»åœ¨æœ¬åœ°æ‰“å¼€äº†æµ‹è¯• GUIï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹æµ‹è¯•ä»£ç æ€ä¹ˆå†™ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;describe(&lt;span class=&quot;string&quot;&gt;&#39;My First Test&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  it(&lt;span class=&quot;string&quot;&gt;&#39;Gets, types and asserts&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.visit(&lt;span class=&quot;string&quot;&gt;&#39;https://example.cypress.io&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.contains(&lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;).click()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Should be on a new URL which includes &#39;/commands/actions&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.url().should(&lt;span class=&quot;string&quot;&gt;&#39;include&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;/commands/actions&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Get an input, type into it and verify that the value has been updated&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.get(&lt;span class=&quot;string&quot;&gt;&#39;.action-email&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      .type(&lt;span class=&quot;string&quot;&gt;&#39;fake@email.com&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      .should(&lt;span class=&quot;string&quot;&gt;&#39;have.value&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;fake@email.com&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;video autoplay loop src=&quot;https://docs.cypress.io/img/snippets/first-test-assertions-30fps.1fbd2a2d.mp4&quot;&gt;&lt;/video&gt;

&lt;p&gt;è¿™å…¶å®å·²ç»æµ‹è¯•äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€ç›®æ ‡é¡µé¢ï¼Œè¿™é‡Œæ˜¯ç¤ºä¾‹çš„ &lt;a href=&quot;https://example.cypress.ioï¼Œ&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://example.cypress.ioï¼Œ&lt;/a&gt; å®é™…ä¸Šåœ¨é¡¹ç›®é‡Œåº”æ˜¯æœ¬åœ°å¯åŠ¨çš„ server é¡µé¢å¦‚ &lt;a href=&quot;http://localhost:8080&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:8080&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°é¡µé¢çš„ dom é‡Œæ–‡å­—å†…å®¹ä¸º â€˜typeâ€™ çš„æŒ‰é’®ï¼Œç‚¹å‡»ï¼ˆå¦‚æœé¡µé¢é‡Œå¹¶æ²¡æœ‰æ¸²æŸ“è¿™ä¸ªæŒ‰é’®å³æµ‹è¯•æ²¡è·‘é€šï¼‰&lt;/li&gt;
&lt;li&gt;æŒ‰é’®ç‚¹å‡»åï¼Œé¡µé¢åº”è·³è½¬åˆ°äº†è·¯ç”±ä¸­åŒ…å« â€˜/commands/actionsâ€™ çš„é¡µé¢&lt;/li&gt;
&lt;li&gt;åœ¨æ­¤é¡µé¢çš„ dom é‡Œå¯ä»¥æ‰¾åˆ° class ç±»åä¸º â€˜.action-emailâ€™ çš„ input æ¡†ï¼Œåœ¨é‡Œé¢è¾“å…¥ â€˜fake@email.comâ€™ åï¼Œè¾“å…¥æ¡†çš„ value å€¼åº”è¯¥ä¸º â€˜fake@email.comâ€™&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æµ‹è¯•ä»£ç è¯­ä¹‰åŒ–æ¯”è¾ƒå¥½ï¼Œä»£ç é‡ä¸å¤šï¼Œä¹Ÿä¸éœ€è¦å†™å¾ˆå¤š async é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œä¸ºæ­¢ä½“éªŒäº†ä¸€ä¸‹å®‰è£…é…ç½®ï¼Œæœ¬åœ°æµ‹è¯•ï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œä¸Šæ‰‹æ¯”è¾ƒç®€å•ï¼Œé›†æˆåˆ°é¡¹ç›®é‡Œä¹Ÿä¸éº»çƒ¦ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æµ‹è¯•è¦†ç›–ç‡ä¸æŒç»­é›†æˆï¼ˆGitlab-ä¸ºä¾‹ï¼‰&quot;&gt;&lt;a href=&quot;#æµ‹è¯•è¦†ç›–ç‡ä¸æŒç»­é›†æˆï¼ˆGitlab-ä¸ºä¾‹ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•è¦†ç›–ç‡ä¸æŒç»­é›†æˆï¼ˆGitlab ä¸ºä¾‹ï¼‰&quot;&gt;&lt;/a&gt;æµ‹è¯•è¦†ç›–ç‡ä¸æŒç»­é›†æˆï¼ˆGitlab ä¸ºä¾‹ï¼‰&lt;/h2&gt;&lt;p&gt;å‡¡æ˜¯æ²¡æœ‰é›†æˆåˆ° CI é‡Œçš„æµ‹è¯•éƒ½åªæ˜¯ç©å…·ï¼Œå¹¶ä¸èƒ½ç®—æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹ Cypress è¿™å—çš„è¡¨ç°å§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ› Cypress å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨å¼€å‘çš„ä¸åŒé˜¶æ®µæ‰§è¡Œä¸åŒçš„æµ‹è¯•å‘½ä»¤ã€‚æ¯”å¦‚åœ¨å‘èµ· PR åˆ° feature åˆ†æ”¯æ—¶å¯ä»¥åœ¨å½“å‰åˆ†æ”¯æ‰§è¡Œé›†æˆæµ‹è¯•ï¼Œåˆ° master ä¸»åˆ†æ”¯æ—¶è¿˜éœ€è®¡ç®—æµ‹è¯•è¦†ç›–ç‡å¹¶å°†æ•°æ®ä¸ŠæŠ¥åˆ° Sonar ç­‰è´¨æ£€å¹³å°ï¼ˆè¿˜å¯ä»¥è®¾ç½®æµ‹è¯•è¦†ç›–ç‡ä¸æ»¡è¶³xx%çš„è¯åˆ™æµ‹è¯•å¤±è´¥ç­‰ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤æˆ‘ä»¬å…ˆçœ‹çœ‹æµ‹è¯•è¦†ç›–ç‡è¦æ€ä¹ˆè®¡ç®—ã€‚Cypress çš„æµ‹è¯•è¦†ç›–ç‡è®¡ç®—è²Œä¼¼æ˜¯åæ¥æ‰æ·»åŠ ä¸Šçš„åŠŸèƒ½ï¼Œé…ç½®ç¨æœ‰ç‚¹å¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¾ç„¶è¿˜æ˜¯å…·ä½“è¯´æ˜å¯ä»¥&lt;a href=&quot;https://docs.cypress.io/guides/tooling/code-coverage.html#E2E-code-coverage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚ç…§æ–‡æ¡£&lt;/a&gt;ï¼Œåšå®¢ä¸­åªæ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå®‰è£…ä¾èµ–ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install -D @cypress/code-coverage nyc istanbul-lib-coverage&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å†é…ç½®ä¸€ä¸‹ Cypress ä¸­çš„é…ç½®ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// cypress/support/index.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;@cypress/code-coverage/support&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// cypress/plugins/index.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt;.exports = (on, config) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  on(&lt;span class=&quot;string&quot;&gt;&#39;task&#39;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;@cypress/code-coverage/task&#39;&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ–‡æ¡£åªä»‹ç»åˆ°è¿™é‡Œï¼Œå¦‚æœé¡¹ç›®ç”¨äº† TypeScript çš„è¯è¿™å°±è¿˜è¿œè¿œä¸å¤Ÿï¼Œç¿»äº†ä¸€ä¸‹å®˜æ–¹çš„ github ç¤ºä¾‹æ‰å‘ç°è¿˜éœ€è¦å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm i -D babel-plugin-istanbul&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸‹ &lt;code&gt;.babelrc&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;plugins&quot;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&quot;istanbul&quot;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å†ä¿®æ”¹ä¸€ä¸‹ &lt;code&gt;cypress/plugins/index.js&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// cypress/plugins/index.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt;.exports = (on, config) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  on(&lt;span class=&quot;string&quot;&gt;&#39;task&#39;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;@cypress/code-coverage/task&#39;&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  on(&lt;span class=&quot;string&quot;&gt;&#39;file:preprocessor&#39;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;@cypress/code-coverage/use-babelrc&#39;&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&quot;cy:run&quot;: &quot;cypress run &amp;amp;&amp;amp; npm run test:report&quot;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&quot;instrument&quot;: &quot;nyc instrument --compact=false client instrumented&quot;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&quot;test:report&quot;: &quot;npm run instrument &amp;amp;&amp;amp; npx nyc report --reporter=text-summary&quot;,&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;cypress run&lt;/code&gt; å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œè·‘æµ‹è¯•ï¼Œä¸å¯åŠ¨ GUIï¼Œåœ¨ CI é‡Œä½¿ç”¨çš„è¯å°±è¯¥ç”¨è¿™ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ç»“æœï¼ŒçœŸæ˜¯å¿«å¿«ä¹ä¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://imgchr.com/i/KUsXqK&quot; alt=&quot;coverage-result&quot;&gt;&lt;/p&gt;
&lt;p&gt;Cypress çš„ E2E æµ‹è¯•çš„è¦†ç›–ç‡ä¹Ÿå¯ä»¥å’Œå•å…ƒæµ‹è¯•ï¼Œæˆ–æ˜¯é€šè¿‡å…¶å®ƒæ¡†æ¶ Jest ç­‰çš„æµ‹è¯•è¦†ç›–ç‡è¿›è¡Œåˆå¹¶ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥å»å®˜ç½‘æŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥ä»¥ Gitlab CI runner ä¸ºä¾‹æ¥çœ‹ä¸€ä¸‹ Cypress æ€ä¹ˆé›†æˆåˆ° CIï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight yml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;// .gitlab-ci.yml&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;variables:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  npm_config_cache:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$CI_PROJECT_DIR/.npm&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  CYPRESS_CACHE_FOLDER:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$CI_PROJECT_DIR/cache/Cypress&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;stages:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; test&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; sonar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;cache:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  paths:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; .npm&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; node_modules/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; cache/Cypress&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;build:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  stage:&lt;/span&gt; sonar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  tags:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; docker&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  script:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; yarn&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; sh ci/sonar.sh&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; yarn build&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  artifacts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;    expire_in:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; day&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;    paths:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;      -&lt;/span&gt; codeclimate.json&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;      -&lt;/span&gt; build&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;cypress-e2e-local:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  image:&lt;/span&gt; cypress/base:&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  tags:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; docker&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  stage:&lt;/span&gt; test&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  script:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; unset NODE_OPTIONS&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; yarn&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; $(npm bin)/cypress cache path&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# show all installed versions of Cypress binary&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; $(npm bin)/cypress install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; $(npm bin)/cypress cache list&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; $(npm bin)/cypress verify&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; npm run test&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  artifacts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;    expire_in:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; week&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;    when:&lt;/span&gt; always&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;    paths:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; coverage/lcov.info&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; cypress/screenshots&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; cypress/videos&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†ä¸¤ä¸ª CI é˜¶æ®µï¼Œtest ä¸ build(ä¸ Sonar æ‰«æï¼Œæ•°æ®ä¸ŠæŠ¥ç­‰)ï¼Œåœ¨ test é˜¶æ®µä¸­ä½¿ç”¨äº† Cypress çš„å®˜æ–¹é•œåƒ &lt;code&gt;cypress/base:10&lt;/code&gt;ã€‚ï¼ˆå…¶å®ƒç¯å¢ƒå˜é‡è®¾ç½®å’Œä¾èµ–å¦‚ Sonar æ‰«æï¼Œyarn ç­‰éƒ½åœ¨æˆ‘ä»¬è‡ªå·±çš„ Docker é•œåƒä¸­ï¼‰&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ CI æ‰€æ‰§è¡Œçš„å‘½ä»¤ &lt;code&gt;npm run test&lt;/code&gt; æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&quot;test&quot;: &quot;start-server-and-test start http://localhost:5000 cy:run&quot;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™é‡Œä¸ºäº†ç®€åŒ–å‘½ä»¤ï¼Œä½¿ç”¨äº† npm åŒ… &lt;a href=&quot;https://github.com/bahmutov/start-server-and-test&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;start-server-and-test&lt;/a&gt; æ¥å®ç°å¾…æœ¬åœ° Server å¯åŠ¨ä¹‹åå†æ‰§è¡Œæµ‹è¯•è¿™ä¸€é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿåœ¨ &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; ä¸­è®¾ç½®äº† &lt;code&gt;artifacts&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight yml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;artifacts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  expire_in:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; week&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  when:&lt;/span&gt; always&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  paths:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; coverage/lcov.info&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; cypress/screenshots&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;  -&lt;/span&gt; cypress/videos&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ˜¯ Gitlab çš„ &lt;a href=&quot;https://docs.gitlab.com/ee/user/project/pipelines/job_artifacts.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;job artifacts&lt;/a&gt; åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®åœ¨æŸä¸€æ­¥éª¤å®Œæˆä¹‹åå°†ç‰¹å®šæ–‡ä»¶å¤¹çš„å†…å®¹ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœ‰æ•ˆæ—¶é—´å†…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘é¡µç«¯æŸ¥çœ‹æˆ–ä¸‹è½½è¿™äº›æ–‡ä»¶å†…å®¹ã€‚è¿™æ ·å¦‚æœåœ¨ CI æµ‹è¯•å¤±è´¥çš„è¯æˆ‘ä»¬å°±å¯ä»¥åœ¨ artifacts ä¸­æŸ¥çœ‹å…¶æµ‹è¯•å¤±è´¥è§†é¢‘å’Œå¿«ç…§ï¼Œé¿å…ç›²çŒœå¼ Debugã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://imgchr.com/i/KU2Pk8&quot; alt=&quot;artifacts&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ CI è®¾ç½®å’Œæµ‹è¯•ç”¨ä¾‹ç®¡ç†ä¸­å¯ä»¥æ·±æŒ–çš„ç‚¹è¿˜æœ‰å¾ˆå¤šã€‚æ¯”å¦‚å°†æµ‹è¯•ç”¨ä¾‹åˆ†ä¸ºå†’çƒŸæµ‹è¯•ï¼Œå…¨é‡æµ‹è¯•ï¼Œæˆ–è€… Client ç«¯æµ‹è¯•ï¼ŒNode å±‚æµ‹è¯•ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;Cypress å¯åº”ç”¨çš„æµ‹è¯•åœºæ™¯ä¹Ÿæ›´å¤šï¼Œæ¯”å¦‚é€šè¿‡è®¾ç½® Cookie å®ç°ä¸åŒæƒé™ç”¨æˆ·çš„æµ‹è¯•ï¼Œå¼•å…¥ Chance.js å®ç°éšæœºç‚¹å‡» Tab è¿›è¡Œä¸åŒé€‰é¡¹å¡çš„æµ‹è¯•ï¼ŒMock æ¥å£è¿”å›å€¼ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://glebbahmutov.com/blog/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://glebbahmutov.com/blog/&lt;/a&gt; æ˜¯ Cypress çš„ä¸»è¦ç»´æŠ¤è€…çš„åšå®¢ï¼Œå…¶ä¸­ä¹Ÿè®°å½•äº†å¾ˆå¤šéªšæ“ä½œï¼ˆæ¯”å¦‚æ£€æŸ¥ç½‘é¡µå¯¹æ¯”åº¦æ˜¯å¦æ»¡è¶³æ¡ä»¶ç­‰ç­‰ï¼‰ï¼Œå¦‚æœ‰å…´è¶£ï¼Œå¯ä»¥ç»§ç»­è¿›è¡ŒæŒ–æ˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ä¸ªå‘ç‚¹&quot;&gt;&lt;a href=&quot;#ä¸€ä¸ªå‘ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ä¸ªå‘ç‚¹&quot;&gt;&lt;/a&gt;ä¸€ä¸ªå‘ç‚¹&lt;/h2&gt;&lt;p&gt;åœ¨æˆ‘çš„å®è·µä¸­å‘ç°çš„ä¸€ä¸ªå‘ç‚¹æ˜¯ Cypress ç¼ºå°‘å¯¹äº &lt;code&gt;fetch&lt;/code&gt; è¯·æ±‚çš„æ”¯æŒï¼ˆ&lt;a href=&quot;https://github.com/cypress-io/cypress/issues/95ï¼‰ï¼Œå®ƒæ— æ³•æ•æ‰æˆ–è€…&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/cypress-io/cypress/issues/95ï¼‰ï¼Œå®ƒæ— æ³•æ•æ‰æˆ–è€…&lt;/a&gt; mock è¯·æ±‚ï¼Œåªèƒ½é€šè¿‡ä¸€ä¸ªæœ‰ç‚¹è„çš„æ–¹æ³•æ¥ hack è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é¡¹ç›®ä¸­å¼•å…¥&lt;a href=&quot;https://github.com/whatwg/fetch&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;whatwg-fetch&lt;/a&gt;ï¼Œå†ä¿®æ”¹ &lt;code&gt;cypress/support/command.js&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// cypress/support/command.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Cypress.Commands.add(&lt;span class=&quot;string&quot;&gt;&#39;visitWithDelWinFetch&#39;&lt;/span&gt;, (path, opts = &amp;#123;&amp;#125;) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.visit(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        path,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.assign(opts, &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            onBeforeLoad(win) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; win.fetch;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•æˆ‘ä»¬é¡¹ç›®çš„ç™»å½•é‡å®šå‘åˆ¤æ–­äº†ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;describe(&lt;span class=&quot;string&quot;&gt;&#39;Node server&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  it(&lt;span class=&quot;string&quot;&gt;&#39;no cookie get 401&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.server()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.clearCookies()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.route(&lt;span class=&quot;string&quot;&gt;&#39;POST&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;**/graphql&#39;&lt;/span&gt;).as(&lt;span class=&quot;string&quot;&gt;&#39;login&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.visitWithDelWinFetch(&lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.wait(&lt;span class=&quot;string&quot;&gt;&#39;@login&#39;&lt;/span&gt;).then((xhr) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      expect(xhr.status).to.eq(&lt;span class=&quot;number&quot;&gt;401&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  it(&lt;span class=&quot;string&quot;&gt;&#39;with cookie get 200&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.server()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.route(&lt;span class=&quot;string&quot;&gt;&#39;POST&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;**/graphql&#39;&lt;/span&gt;).as(&lt;span class=&quot;string&quot;&gt;&#39;loginWithCookie&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.visitWithCookie(&lt;span class=&quot;string&quot;&gt;&#39;/&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.wait(&lt;span class=&quot;string&quot;&gt;&#39;@loginWithCookie&#39;&lt;/span&gt;).then((xhr) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      expect(xhr.status).to.eq(&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// login successfully, so display the content&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.get(&lt;span class=&quot;string&quot;&gt;&#39;.ant-layout-sider&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    cy.get(&lt;span class=&quot;string&quot;&gt;&#39;.ant-layout-content&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;aha~&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://imgchr.com/i/KUhAU0&quot; alt=&quot;sonar&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/cypress.png&quot; alt=&quot;cypress-cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;å…³äºå‰ç«¯æµ‹è¯•çš„ä¸€äº›ç†è®ºä¸åŸºäº &lt;code&gt;Cypress&lt;/code&gt; çš„ E2E æµ‹è¯•å…·ä½“å®è·µã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="test" scheme="https://blog.colafornia.me/categories/test/"/>
    
    
  </entry>
  
  <entry>
    <title>2019.3 Webpack å‡çº§æ”¹é€ å°è®°</title>
    <link href="https://blog.colafornia.me/post/2019/2019-webpack-optimization/"/>
    <id>https://blog.colafornia.me/post/2019/2019-webpack-optimization/</id>
    <published>2019-03-31T06:00:00.000Z</published>
    <updated>2019-10-24T02:43:40.140Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/2019-3-webpack.png&quot; alt=&quot;webpack-cover&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2019.3&lt;/p&gt;
&lt;p&gt;Webpack ç¨³å®šç‰ˆæœ¬ä¸º4, æ­£åœ¨ 5 çš„ roadmap ä¸­&lt;/p&gt;
&lt;p&gt;è®°å½•ä¸€ä¸‹å½“å‰æ—¶é—´å¯¹å‰ç«¯é¡¹ç›®æ„å»ºæ‰“åŒ…ä¼˜åŒ–çš„ç­–ç•¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å½“å‰é¡¹ç›®é—®é¢˜&quot;&gt;&lt;a href=&quot;#å½“å‰é¡¹ç›®é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å½“å‰é¡¹ç›®é—®é¢˜&quot;&gt;&lt;/a&gt;å½“å‰é¡¹ç›®é—®é¢˜&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨çš„æ˜¯ &lt;a href=&quot;https://github.com/facebook/create-react-app&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;create-react-app&lt;/a&gt; çš„é…ç½®ï¼Œå†—ä½™é¡¹å¤ªå¤šï¼Œå‡çº§éš¾ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªå‰æä¸‹ï¼Œæœ‰ä¸ªâ€œæé™é¡¹ç›®â€æ¯æ¬¡ä»£ç æ”¹åŠ¨ä¹‹åçš„ hot reload éƒ½éœ€è¦ 30sï¼Œå®åœ¨åä¸ä½äº†ï¼Œå°±åŠ¨æ‰‹åšäº†æ‰“åŒ…å‡çº§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dq29.png&quot; alt=&quot;before&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡æ˜¯ä»ä»£ç ä¾èµ–ç›¸å¯¹ç®€å•ï¼Œåç»­æµ‹è¯•å›æ»šè´Ÿæ‹…å°çš„åå°ç®¡ç†ç³»ç»Ÿä¸‹æ‰‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸‹å½“å‰çš„ç—›ç‚¹ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¡¹ç›®å¯åŠ¨æ…¢&lt;/li&gt;
&lt;li&gt;Hot reload æ…¢&lt;/li&gt;
&lt;li&gt;Build æ…¢ï¼ˆä¸Šçº¿å‰åœ¨åç«¯é¡¹ç›®é‡Œ build æ—¶å°¤å…¶æ˜æ˜¾ï¼‰&lt;/li&gt;
&lt;li&gt;æ²¡åˆ†åŒ…ï¼Œæ–‡ä»¶ä½“ç§¯å¤ªå¤§&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;è§£å†³æ‰‹æ®µ&quot;&gt;&lt;a href=&quot;#è§£å†³æ‰‹æ®µ&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ‰‹æ®µ&quot;&gt;&lt;/a&gt;è§£å†³æ‰‹æ®µ&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæŠŠ Webpack ç‰ˆæœ¬ä» 3 å‡åˆ° 4ï¼Œèµ·ç å…ˆäº«å—ä¸Šå·¥å…·æœ¬èº«å‡çº§åå¸¦æ¥çš„ä¼˜è¶Šæ€§&lt;/p&gt;
&lt;h3 id=&quot;1-åˆ†ç¦»é…ç½®æ–‡ä»¶ï¼ˆä¸æ€§èƒ½æ— å…³ï¼Œä¸å¼€å‘ç»´æŠ¤ä½“éªŒæœ‰å…³ï¼‰&quot;&gt;&lt;a href=&quot;#1-åˆ†ç¦»é…ç½®æ–‡ä»¶ï¼ˆä¸æ€§èƒ½æ— å…³ï¼Œä¸å¼€å‘ç»´æŠ¤ä½“éªŒæœ‰å…³ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;1.åˆ†ç¦»é…ç½®æ–‡ä»¶ï¼ˆä¸æ€§èƒ½æ— å…³ï¼Œä¸å¼€å‘ç»´æŠ¤ä½“éªŒæœ‰å…³ï¼‰&quot;&gt;&lt;/a&gt;1.åˆ†ç¦»é…ç½®æ–‡ä»¶ï¼ˆä¸æ€§èƒ½æ— å…³ï¼Œä¸å¼€å‘ç»´æŠ¤ä½“éªŒæœ‰å…³ï¼‰&lt;/h3&gt;&lt;p&gt;åˆ†æˆ baseã€devã€prod ä¸‰ä¸ª config æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;æŠŠé€šç”¨é…ç½®æ”¾åˆ° base ä¸­ï¼Œdev ä¸ prod ä¸­åªæ”¾ä¸è¿™ä¸¤ç§æ¨¡å¼å¼ºç›¸å…³çš„é…ç½®&lt;/p&gt;
&lt;h3 id=&quot;2-HappyPack&quot;&gt;&lt;a href=&quot;#2-HappyPack&quot; class=&quot;headerlink&quot; title=&quot;2.HappyPack&quot;&gt;&lt;/a&gt;2.HappyPack&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1db8J.png&quot; alt=&quot;HappyPack&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ²»ç–—å„ç§ç¼–è¯‘æ…¢&lt;/p&gt;
&lt;p&gt;æœ¬åœ°å¯åŠ¨ server ç¼–è¯‘æ—¶é—´ï¼š 30s =&amp;gt; 10s&lt;/p&gt;
&lt;h3 id=&quot;3-splitChunks-åˆ†åŒ…&quot;&gt;&lt;a href=&quot;#3-splitChunks-åˆ†åŒ…&quot; class=&quot;headerlink&quot; title=&quot;3.splitChunks åˆ†åŒ…&quot;&gt;&lt;/a&gt;3.splitChunks åˆ†åŒ…&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dXK1.png&quot; alt=&quot;splitChunks&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸€åŠŸèƒ½åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­æ˜¯é€šè¿‡ &lt;a href=&quot;https://webpack.js.org/plugins/commons-chunk-plugin/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CommonsChunkPlugin&lt;/a&gt; æ¥è¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;åˆæ­¥åˆ†æˆä¸‰ä¸ªåŒ…ï¼Œå‡å° main åŒ…ä½“ç§¯ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹ï¼Œå…¶å®å¯ä»¥åšæ‡’åŠ è½½ï¼Œä½†æ˜¯æ³¨æ„ä¸èƒ½åˆ†å¤ªå¤šï¼Œå¢åŠ  http è¯·æ±‚æ•°å¾—ä¸å¿å¤±ã€‚åå°ç®¡ç†é¡¹ç›®ä½“ç§¯ç›®å‰ä¸å¤§ï¼Œå„æ¨¡å—ä¹Ÿæ²¡ä»€ä¹ˆä¸šåŠ¡ä¸Šçš„æ˜æ˜¾åŒºåˆ†ï¼Œå°±æ²¡å•¥åšæ‡’åŠ è½½çš„å¿…è¦ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æœï¼šåŒ…ä½“ç§¯ï¼š6M =&amp;gt; 3M&lt;/p&gt;
&lt;h3 id=&quot;4-å°†ç¬¬ä¸‰æ–¹å·¨å‹åŒ…æ‰“å…¥-externals&quot;&gt;&lt;a href=&quot;#4-å°†ç¬¬ä¸‰æ–¹å·¨å‹åŒ…æ‰“å…¥-externals&quot; class=&quot;headerlink&quot; title=&quot;4.å°†ç¬¬ä¸‰æ–¹å·¨å‹åŒ…æ‰“å…¥ externals&quot;&gt;&lt;/a&gt;4.å°†ç¬¬ä¸‰æ–¹å·¨å‹åŒ…æ‰“å…¥ externals&lt;/h3&gt;&lt;p&gt;ç»è¿‡ä»¥ä¸Šåˆ†åŒ…åï¼Œç”¨ &lt;a href=&quot;https://github.com/webpack-contrib/webpack-bundle-analyzer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BundleAnalyzerPlugin&lt;/a&gt; çœ‹äº†ä¸‹ç»“æœ&lt;/p&gt;
&lt;p&gt;å‘ç°æœ‰ä¸ªéå¸¸æ˜¾çœ¼çš„å·¨å‹åŒ… &lt;code&gt;echarts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŠŠå®ƒçš„ min.js æ‰”åˆ°å…¬å¸ cdn ä¸Šï¼Œåœ¨ html ä¸­ç›´æ¥å¼•å…¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;externals: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  echarts: &lt;span class=&quot;string&quot;&gt;&#39;echarts&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ•ˆæœä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå½“æ—¶æ²¡æˆªå›¾ï¼Œå°±ä¸è´´å¯¹æ¯”å›¾äº†&lt;/p&gt;
&lt;h3 id=&quot;5-gzip&quot;&gt;&lt;a href=&quot;#5-gzip&quot; class=&quot;headerlink&quot; title=&quot;5.gzip&quot;&gt;&lt;/a&gt;5.gzip&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dLvR.png&quot; alt=&quot;after&quot;&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¼•å…¥ CompressionWebpackPlugin æ’ä»¶ï¼Œæ‰“å‡ºæ¥ .js.gz èµ„æºï¼Œåœ¨æœåŠ¡å™¨å·²æ”¯æŒ gzip çš„æƒ…å†µä¸‹ï¼Œæ‰€åŠ è½½èµ„æºä½“ç§¯ï¼ˆç›´æ¥åˆ°äº† 1.3Mï¼‰å’Œæ—¶é—´æå‡éå¸¸æ˜æ˜¾&lt;/p&gt;
&lt;h3 id=&quot;6-å¸¸è§„æ“ä½œ&quot;&gt;&lt;a href=&quot;#6-å¸¸è§„æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;6.å¸¸è§„æ“ä½œ&quot;&gt;&lt;/a&gt;6.å¸¸è§„æ“ä½œ&lt;/h3&gt;&lt;p&gt;è¿˜æœ‰å¾ˆå¤šå‡åˆ° webpack@4 ä¹‹åçš„å¸¸è§„æ“ä½œï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;MiniCssExtractPlugin&lt;/p&gt;
&lt;p&gt;TerserPlugin&lt;/p&gt;
&lt;p&gt;OptimizeCSSAssetsPlugin&lt;/p&gt;
&lt;p&gt;ç­‰ç­‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éšä¾¿æœæœï¼Œæˆ–è€…æŒ‰å›¾ç´¢éª¥å»æœ€æ–°ç‰ˆçš„ create-react-app æºç é‡Œçœ‹çœ‹ç”¨äº†å•¥å°±è¡Œ&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2019-3-webpack.png&quot; alt=&quot;webpack-cover&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2019.3&lt;/p&gt;
&lt;p&gt;Webpack ç¨³å®šç‰ˆæœ¬ä¸º4, æ­£åœ¨ 5 çš„ roadmap ä¸­&lt;/p&gt;
&lt;p&gt;è®°å½•ä¸€ä¸‹å½“å‰æ—¶é—´å¯¹å‰ç«¯é¡¹ç›®æ„å»ºæ‰“åŒ…ä¼˜åŒ–çš„ç­–ç•¥&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="webpack" scheme="https://blog.colafornia.me/categories/webpack/"/>
    
    
  </entry>
  
  <entry>
    <title>2018 å¹´åº¦æ€»ç»“</title>
    <link href="https://blog.colafornia.me/post/2019/2018-review/"/>
    <id>https://blog.colafornia.me/post/2019/2018-review/</id>
    <published>2019-01-02T04:00:00.000Z</published>
    <updated>2019-10-24T02:44:52.310Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/chengdu-2018.jpeg&quot; alt=&quot;chengdu in 2018&quot;&gt;&lt;/p&gt;
&lt;p&gt;2018: have some fun&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;å·¥ä½œä¸å­¦ä¹ &quot;&gt;&lt;a href=&quot;#å·¥ä½œä¸å­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;å·¥ä½œä¸å­¦ä¹ &quot;&gt;&lt;/a&gt;å·¥ä½œä¸å­¦ä¹ &lt;/h3&gt;&lt;p&gt;è¯´æ¥æœ‰ç‚¹æ‰“è„¸ï¼Œå»å¹´çš„å¹´ç»ˆæ€»ç»“å†™å®Œä¸ä¹…ï¼Œæˆ‘å°±ç”³è¯·äº†å†…éƒ¨è½¬å²—åˆ°æˆéƒ½ç ”å‘ä¸­å¿ƒï¼Œæ¯”é¢„è®¡è‡³å°‘æ—©äº†ä¸¤ä¸‰å¹´ç¦»äº¬ã€‚&lt;/p&gt;
&lt;p&gt;æ–°éƒ¨é—¨å±äºå…¬å¸å†…ä¸ºæ•°ä¸å¤šä½¿ç”¨ &lt;code&gt;React + Node ä¸­é—´å±‚&lt;/code&gt;æŠ€æœ¯æ ˆçš„å›¢é˜Ÿï¼Œå¯¹æˆ‘è€Œè¨€ä¹Ÿæ˜¯å¾ˆä¸é”™çš„æœºä¼šï¼Œè¿æ»šå¸¦çˆ¬åœ°å­¦ä¹ äº†ä¸€æ³¢ï¼Œå‹‰å¼ºè·Ÿä¸Šè¶Ÿäº†ã€‚ä¸‹åŠå¹´å¼€å§‹æœ‰æœºä¼šç‹¬è‡ª backup ä¸€ä¸ªå°ä¸šåŠ¡é¡¹ç›®ï¼Œä¹Ÿå°±å¯¹å…¬å¸å½“å‰çš„å¾®æœåŠ¡æ¶æ„ï¼Œæ„å»ºéƒ¨ç½²æµç¨‹ï¼ŒNode æœåŠ¡çš„çº¿ä¸Šè¿ç»´ï¼Œé—®é¢˜æ’æŸ¥æ›´ä¸ºç†Ÿç»ƒäº†ï¼Œè¿™æ˜¯åœ¨å…¬å¸ä¸šåŠ¡ä¸­çš„ä¸»è¦æ”¶è·ã€‚&lt;/p&gt;
&lt;p&gt;ä» 17 å¹´å¹´åº•ï¼Œæˆ‘å¼€å§‹å†™ä¸€ä¸ª side project &lt;a href=&quot;https://github.com/Colafornia/little-robot&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Œlittle-robotã€&lt;/a&gt;ï¼Œä¸€å¼€å§‹åªæ˜¯ä¸€ä¸ªä¸ºäº†ç†Ÿæ‚‰ Node æœåŠ¡ç«¯å¼€å‘éƒ¨ç½²è€Œå†™çš„å°è„šæœ¬ï¼Œå¤å¤©ç»ˆäºæœ‰æ—¶é—´ç»™å®ƒåšäº†ä¸€æ¬¡å‡çº§ï¼Œæ­å»ºäº† &lt;code&gt;Koa Server&lt;/code&gt;ï¼Œå°è£…æˆ apiï¼ŒåŸºäº &lt;code&gt;Docker&lt;/code&gt; å®ç°äº†æ„å»ºéƒ¨ç½²ä¸æŒç»­é›†æˆã€‚æœ€åè¿˜åšç€è„¸çš®åœ¨æ˜é‡‘ä¸Šæ¨å¹¿äº†ä¸€æ³¢ï¼Œç›®å‰ç”¨æˆ·é‡ç¨³å®šåœ¨ 100+ï¼ŒGithub Star 60+ï¼Œå¯¹äºæˆ‘è€Œè¨€æ˜¯ä¸ªä¸å°çš„é¼“èˆã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šä¸€ä¸ªå¹´ç»ˆæ€»ç»“é‡Œç«‹çš„ä¸€ä¸ª Flag æ˜¯ â€œ&lt;strong&gt;Leetcode æ¯å‘¨ä¸€é¢˜&lt;/strong&gt;â€ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°æœ€åè¿˜æ˜¯å®Œæˆäº†(åœ¨ 18 å¹´çš„æœ€åä¸¤ä¸ªæœˆé‡Œçªå‡»å®ŒæˆğŸ˜‚)ã€‚&lt;a href=&quot;http://blog.colafornia.me/leetcode-solutions/&quot;&gt;ã€Œleetcode-solutionsã€&lt;/a&gt; å®Œæˆäº† 54 ä¸ªé¢˜ç›®ï¼Œä¸€è¾¹å¤ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•çŸ¥è¯†ä¸€è¾¹åˆ·é¢˜ï¼Œé¢˜ç›®æœ€å¤šè¦†ç›–åˆ°åŠ¨æ€è§„åˆ’ã€‚æœ€å¤§çš„æ”¶è·åº”è¯¥æ˜¯æ‰¾åˆ°äº†åšç®—æ³•é¢˜çš„å¿«ä¹(ä¼ è¯´ä¸­çš„ç”¨ç®—æ³•å¨±ä¹èº«å¿ƒ)ï¼Œå¸Œæœ›æŠŠç®—æ³•å­¦ä¹ èƒ½å¤Ÿä½œä¸ºä¸€ä¸ªé•¿æœŸä¹ æƒ¯ä¿æŒä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¹´çš„ä¸€ä¸ªé‡ç‚¹å­¦ä¹ é¡¹ç›®æ˜¯ &lt;strong&gt;iOS å¼€å‘&lt;/strong&gt;ï¼ŒèŠ±äº†è›®å¤šæ—¶é—´å­¦ä¹  &lt;code&gt;Objective-C&lt;/code&gt; è¯­æ³•ï¼Œå·²ç»å¯ä»¥ç…§ç€æ–‡æ¡£ç”»ä¸€äº›ç®€å•çš„äº¤äº’é¡µé¢ã€‚ç›®å‰ç²—æµ…çš„æ„Ÿè§‰ iOS å¼€å‘è¿˜æ˜¯å¾ˆè§„æ•´ï¼ŒXcode åŠŸèƒ½é½å…¨ï¼Œåœ¨ IDE é‡Œçœ‹æ–‡æ¡£éå¸¸èˆ’æœã€‚ä¸»è¦æ˜¯æˆ˜çº¿æ‹‰çš„å¤ªé•¿ï¼Œè¿™äº›å‡†å¤‡å·¥ä½œéƒ½åšå®Œä¹‹åï¼Œæœ‰ç‚¹å¤±å»è€å¿ƒè½¬å»åšç®—æ³•é¢˜äº†ï¼Œè¿˜æ˜¯è¦æœ‰ä¸ª deadline çŸ­æœŸé›†ä¸­ç²¾åŠ›æ¥åšæ›´å¥½äº›ã€‚æ–°çš„ä¸€å¹´è¦æŠŠè¿™ä¸€å—çš„å­¦ä¹ å®Œæˆï¼Œå®Œæˆä¸€ä¸ªæˆå“ iOS Appã€‚&lt;/p&gt;
&lt;p&gt;åšå®¢æœ‰ &lt;strong&gt;11 ç¯‡&lt;/strong&gt;ï¼Œç¿»è¯‘æ–¹é¢ä¹Ÿè¿˜æ˜¯åšäº†ä¸€äº›ï¼Œç¿»è¯‘äº†å¾ˆå¤šé•¿æ–‡ï¼Œç§¯åˆ†è¶³å¤Ÿå…‘æ¢äº†ä¸€ä¸ª GDD çš„éŸ³å“ã€‚åä¸€å‡æœŸå®Œæˆäº†&lt;a href=&quot;https://blog.colafornia.me/post/2018/translation-blink-render/&quot;&gt;Blink æ¼”è®²è§†é¢‘çš„ç¿»è¯‘&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dZh4.png&quot; width=&quot;450&quot;&gt;&lt;/p&gt;
&lt;p&gt;å®Œå…¨æ²¡æœ‰è¿›å±•çš„å†…å®¹æ˜¯ CS å…¬å¼€è¯¾å­¦ä¹ ï¼Œåˆå½“äº†ä¸€å¹´çš„é‡ç”Ÿç¨‹åºå‘˜ï¼Œè®¡ç®—æœºåŸºç¡€æ–¹é¢é™¤äº†ç®—æ³•å‡ ä¹æ²¡ä»€ä¹ˆè¿›æ­¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç”Ÿæ´»ä¸ç©ä¹&quot;&gt;&lt;a href=&quot;#ç”Ÿæ´»ä¸ç©ä¹&quot; class=&quot;headerlink&quot; title=&quot;ç”Ÿæ´»ä¸ç©ä¹&quot;&gt;&lt;/a&gt;ç”Ÿæ´»ä¸ç©ä¹&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://imgchr.com/i/V1ducR&quot; alt=&quot;Phuket&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹å®šå†³å¿ƒå›æˆéƒ½ä¹‹åï¼Œå¯¹è‡ªå·±çš„ä¸€ä¸ªæœŸè®¸æ˜¯â€œæ›´å¥½çš„ä½“éªŒç”Ÿæ´»â€ï¼Œæ‰€ä»¥ä»Šå¹´çš„ç”Ÿæ´»å¨±ä¹è¿˜æ˜¯å¾ˆä¸°å¯Œå¤šå½©çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ—…è¡Œ&quot;&gt;&lt;a href=&quot;#æ—…è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;æ—…è¡Œ&quot;&gt;&lt;/a&gt;æ—…è¡Œ&lt;/h4&gt;&lt;p&gt;ä»Šå¹´å››æœˆå¸¦æˆ‘å¦ˆå»äº†æ™®å‰å²›+æ›¼è°·ç©ï¼Œä¸Šé¢è¿™å¼ ç…§ç‰‡ä¾¿æ˜¯å»æ–¯ç±³å…°å²›æ½œæ°´æ—¶æ‹çš„ã€‚æ™®å‰å²›éå¸¸å¥½ç©ï¼Œæ™¯è‰²å’Œæ°´è´¨éƒ½å¾ˆä¸é”™ï¼Œæ¶ˆè´¹æ°´å¹³ä¹Ÿä¸é«˜ï¼Œä¸¤ä¸ªäººåƒä¸€é¡¿æµ·é²œçƒ§çƒ¤æœ€å¤šä¹Ÿæ‰ 100RMB å·¦å³ï¼Œå†å»å¤œå¸‚ä¹°ç‚¹æ°´æœå°åƒç®€ç›´ç¾æ»‹æ»‹ã€‚æ¯å¤©å»ä¾¿åˆ©åº—ä¹°ä¸€å¤§è¢‹é›¶é£Ÿï¼Œé…¸å¥¶ï¼ŒåŠ èµ·æ¥æœ€å¤šä¸è¶…è¿‡ 30RMBã€‚å»æ–¯ç±³å…°æ½œæ°´çš„ä¸€å¤©ä¹Ÿå¾ˆçˆ½ï¼Œå½“æ—¶é‚£ä¸ªå­£èŠ‚æ°´é¢å¾ˆç¨³ï¼Œæ²¡æœ‰æ™•èˆ¹ï¼Œæˆ‘åœ¨å½“åœ°ç§Ÿäº†ä¸€ä¸ª GoPro5ï¼Œåœ¨æ°´ä¸‹å½•çš„å¾ˆå—¨çš®ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ›¼è°·çš„è§‚æ„Ÿå°±å¾ˆä¸€èˆ¬ï¼Œå µè½¦ç¨‹åº¦æ˜¯å¸éƒ½ä¸¤å€ï¼Œè´­ç‰©ä¸­å¿ƒä¹Ÿæ²¡æœ‰ä»€ä¹ˆå®æƒ oré™å®šçš„ä¸œè¥¿å¯ä¹°ã€‚å¥½åœ¨åªåœ¨æ›¼è°·åœç•™äº†ä¸¤å¤©ï¼Œæœ¬ç€æ¥éƒ½æ¥äº†çš„æ€åº¦è¿˜æ˜¯å»å¤§çš‡å®«é€›äº†é€›ï¼Œä¹Ÿæœ‰äº†ç”¨ Grab å«è½¦ï¼Œå’Œå¸æœºç”¨è¹©è„šçš„è‹±æ–‡ä¹±ä¾ƒçš„ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹è¿˜æ˜¯ä¸€è¶Ÿå¾ˆå®Œæ»¡çš„æ—…è¡Œï¼Œç¬¬ä¸€æ¬¡ç”±æˆ‘å¸¦ç€å¦ˆå¦ˆå‡ºå›½ç©ï¼Œå¥¹ä½“éªŒäº†è¿™ä¸€æ³¢ Airbnbï¼ŒGrabï¼Œå…¨ç¨‹åªç®¡æ‹ç…§å°±è¡Œï¼Œä¹Ÿç©çš„å¾ˆå¼€å¿ƒã€‚å†³å®šä»¥åæ¯å¹´éƒ½å¸¦å¦ˆå¦ˆå‡ºä¸€è¶Ÿè¿œé—¨âœŒï¸ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–è¿˜å»äº†ä¹å±±åƒäº†ä¸‰å¤©ï¼Œä»¥åŠç”˜å­œé˜¿åçˆ¬å±±ï¼Œæˆéƒ½ä»¥åŠå››å·å‘¨è¾¹å¥½ç©çš„åœ°æ–¹è¿˜æ˜¯å¾ˆå¤šï¼Œåº”è¯¥è¶æœºå¤šå»å‘¨è¾¹ç©ç©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dm9J.md.jpg&quot; width=&quot;450&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;å¥èº«&quot;&gt;&lt;a href=&quot;#å¥èº«&quot; class=&quot;headerlink&quot; title=&quot;å¥èº«&quot;&gt;&lt;/a&gt;å¥èº«&lt;/h4&gt;&lt;p&gt;å›æˆéƒ½ä¹‹åä¾¿è€ƒå¯Ÿäº†ä¸€ä¸‹è½¯ä»¶å›­çš„å¥èº«æˆ¿ï¼Œé€‰å®šä¸€å®¶ä¹°äº†ç§æ•™è¯¾ï¼Œç”±æ•™ç»ƒå¸¦ç€ç»ƒäº†ä¸‰ä¸ªæœˆï¼Œä¹‹åä¾¿æ˜¯è‡ªå·±ç»ƒäº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆæœè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œä½“æ€çº æ­£äº†ä¸å°‘ï¼Œç»ˆäºèƒ½åœ¨70%çš„æ—¶é—´é‡Œéƒ½ç«™ç›´äº†ï¼Œå¿ƒè‚ºåŠŸèƒ½ä¹Ÿæœ‰ä¸€å®šæ”¹å–„ï¼Œæ„Ÿè§‰è¿˜æ˜¯å…¨é å¥èº«æ‰ä¿è¯äº†æ¥æˆéƒ½åæ¯å¤©èƒ¡åƒæµ·å–ä¹Ÿæ²¡èƒ–â€¦â€¦&lt;/p&gt;
&lt;p&gt;åªæ˜¯åˆ°äº†å†¬å¤©ä¹‹åæ²¡å†åšæŒé”»ç‚¼ï¼Œæœ‰ç‚¹å¯æƒœï¼Œå¥èº«æœŸé—´çš„ç²¾ç¥å¤´çœŸçš„å¾ˆä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Live&quot;&gt;&lt;a href=&quot;#Live&quot; class=&quot;headerlink&quot; title=&quot;Live&quot;&gt;&lt;/a&gt;Live&lt;/h4&gt;&lt;p&gt;æ€»ç»“å›æ¥ï¼Œè¿™ä¸€å¹´ä¹Ÿå¬äº†å‡ åœº Live:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;The xx -I See You Tour@åŒ—äº¬å±•è§ˆé¦†&lt;/li&gt;
&lt;li&gt;Hello Nicoã€Œæ…¢æ…¢ï¼Œè€Œè¿œã€@æˆéƒ½å°é…’é¦†&lt;/li&gt;
&lt;li&gt;æ²¼æ³½ä¹é˜Ÿã€Œäº‰é¸£äºŒåå¹´ã€@æˆéƒ½å°é…’é¦†&lt;/li&gt;
&lt;li&gt;æƒ˜é—»ä¹é˜Ÿ ã€Œçœ‹ä¸è§çš„åŸå¸‚ã€@æˆéƒ½å°é…’é¦†&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« çš„é¢˜å›¾ä¾¿æ˜¯æ²¼æ³½ä¹é˜Ÿçš„ç°åœºç…§ç‰‡ã€‚æˆéƒ½è¿™è¾¹è¿˜æ˜¯æœ‰å¾ˆå¤šå¬ç°åœº Live çš„æœºä¼šï¼Œç¥¨ä¹Ÿå¹¶ä¸è´µï¼Œå¹´ä¸­å·¥ä½œä¸å¿™çš„æ—¶å€™ä¸æœ‹å‹å»å¬äº†å‡ åœºï¼Œæ•£åœºåå»åƒå†°ç²‰ã€ä¸²ä¸²ï¼Œä¹Ÿæ˜¯éå¸¸ç¾æ»‹æ»‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è§‚å½±ä¸é˜…è¯»&quot;&gt;&lt;a href=&quot;#è§‚å½±ä¸é˜…è¯»&quot; class=&quot;headerlink&quot; title=&quot;è§‚å½±ä¸é˜…è¯»&quot;&gt;&lt;/a&gt;è§‚å½±ä¸é˜…è¯»&lt;/h4&gt;&lt;p&gt;è§‚å½±é‡ä¸å¾€å¹´æŒå¹³ï¼Œé˜…ç‰‡å†…å®¹ä¹Ÿæ²¡å¤ªå¤§å˜åŒ–ï¼Œè¿˜æ˜¯å•†ä¸šç‰‡ä¸ºä¸»ï¼Œç‹¬ç«‹ç”µå½±çœ‹äº†ä¸€å°éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒæ¬£æ…°çš„æ˜¯ä»Šå¹´çœ‹äº†ä¸å°‘ä¹¦ï¼Œæœ‰ &lt;strong&gt;32 æœ¬&lt;/strong&gt;ï¼Œå¤§æ¦‚æ˜¯å»å¹´é˜…è¯»é‡çš„ä¸¤å€ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­è¿˜æ˜¯æŠ€æœ¯ä¹¦å±…å¤šï¼ŒæŠŠæ—©äº›æ—¶é—´ä¹°çš„è¿Ÿè¿Ÿæ²¡æœ‰çœ‹å®Œçš„å®ä½“ä¹¦éƒ½ K æ‰äº†ï¼Œå› ä¸ºç„¦è™‘ç¨‹åº¦æ¯”åœ¨åŒ—äº¬å¥½äº†ä¸å°‘ï¼Œä¹Ÿæ€»ç®—æœ‰å¿ƒæƒ…çœ‹äº›éæŠ€æœ¯ç±»çš„ä¹¦ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¹´åº¦æœ€ä½³æ¸…å•&quot;&gt;&lt;a href=&quot;#å¹´åº¦æœ€ä½³æ¸…å•&quot; class=&quot;headerlink&quot; title=&quot;å¹´åº¦æœ€ä½³æ¸…å•&quot;&gt;&lt;/a&gt;å¹´åº¦æœ€ä½³æ¸…å•&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;è§‚å½±æœ€ä½³ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;ã€Šè¥¿éƒ¨ä¸–ç•Œ ç¬¬äºŒå­£ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ¨ªé“ä¸–ä¹‹ä»‹ã€‹&lt;/li&gt;
&lt;li&gt;ã€ŠCall Me by Your Nameã€‹&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;é˜…è¯»æœ€ä½³ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æŠ€æœ¯ç±»&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹&lt;/li&gt;
&lt;li&gt;ã€ŠObjective-C ç¼–ç¨‹ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ·±å…¥ReactæŠ€æœ¯æ ˆã€‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;éæŠ€æœ¯ç±»&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ã€Šåä¸€ç§å­¤ç‹¬ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šè´¹é©¬å¤§å®šç†ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šä¸ºäººæ–‡æ•™è‚²è¾©æŠ¤ã€‹&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¥½ç‰©æœ€ä½³ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;é™¤æ¹¿æœº&lt;/li&gt;
&lt;li&gt;Kindle Oasis2&lt;/li&gt;
&lt;li&gt;å‘çƒ­çŒ«çª(æœ‰äº†è¿™ä¸ªçªä¹‹åï¼Œå®¶çŒ«å‡ ä¹æ²¡åœ¨åˆ«çš„åœ°æ–¹ç¡è¿‡è§‰ï¼Œä½¿ç”¨ç‡100%)&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ–°çš„æœŸè®¸&quot;&gt;&lt;a href=&quot;#æ–°çš„æœŸè®¸&quot; class=&quot;headerlink&quot; title=&quot;æ–°çš„æœŸè®¸&quot;&gt;&lt;/a&gt;æ–°çš„æœŸè®¸&lt;/h3&gt;&lt;p&gt;åˆåˆ°äº†æ–°å¹´ Flag æ—¶é—´~&lt;/p&gt;
&lt;p&gt;å·¥ä½œå­¦ä¹ æ–¹é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‹“ç«¯ï¼Œå®Œæˆä¸€ä¸ª iOS æˆå“ App&lt;/li&gt;
&lt;li&gt;Leetcode ä¸èƒ½åœï¼Œ2019å¹´è¿›åº¦å®Œæˆåˆ° 100 é¢˜(ç›®æ ‡å®šå¾—æŒºä½çš„)&lt;/li&gt;
&lt;li&gt;è¡¥è¶³ CS åŸºç¡€ï¼Œé€šè¿‡ HIT çš„åŸºç¡€è¯¾å­¦ä¹ &lt;/li&gt;
&lt;li&gt;å¼€æºä¸¤ä¸ªå®Œæ•´çš„ Side Project&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”Ÿæ´»æ–¹é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é˜…è¯»é‡ 35 æœ¬+&lt;/li&gt;
&lt;li&gt;è‡³å°‘å»ä¸¤ä¸ªæ²¡å»è¿‡çš„åŸå¸‚ç©&lt;/li&gt;
&lt;li&gt;ä½“é‡å‡æ‰ 5kg&lt;/li&gt;
&lt;li&gt;åŸ¹å…»ä¸€ä¸ªæ–°çˆ±å¥½(è¿™æ¡å¾ˆè™šï¼Œä½†åˆå¾ˆå¿…è¦)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1dn39.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/chengdu-2018.jpeg&quot; alt=&quot;chengdu in 2018&quot;&gt;&lt;/p&gt;
&lt;p&gt;2018: have some fun&lt;/p&gt;
    
    </summary>
    
      <category term="summary" scheme="https://blog.colafornia.me/categories/summary/"/>
    
    
  </entry>
  
  <entry>
    <title>8102å¹´æœ«ï¼Œå‰ç«¯è·¯ç”±åŸºæœ¬æ€è·¯</title>
    <link href="https://blog.colafornia.me/post/2018/implement-of-frontend-route/"/>
    <id>https://blog.colafornia.me/post/2018/implement-of-frontend-route/</id>
    <published>2018-11-12T12:00:00.000Z</published>
    <updated>2019-10-24T02:22:04.202Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/router/cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘çœ‹äº†ä¸€äº›ç›¸å…³èµ„æ–™ï¼Œç‰¹åœ°æ¥æ•´ç†ä¸€ä¸‹ï¼Œå½“å‰å‰ç«¯ä¸»æµè·¯ç”± &lt;code&gt;react-router&lt;/code&gt;ã€&lt;code&gt;vue-router&lt;/code&gt; çš„å®ç°æ€è·¯ï¼Œå†…å®¹ä¸å¤šä¹Ÿå¹¶ä¸å¤æ‚ï¼Œä½œä¸ºçŸ¥è¯†ä½“ç³»çš„è¡¥å…¨ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ä¸¤ç§æ¨¡å¼&quot;&gt;&lt;a href=&quot;#ä¸¤ç§æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;ä¸¤ç§æ¨¡å¼&quot;&gt;&lt;/a&gt;ä¸¤ç§æ¨¡å¼&lt;/h2&gt;&lt;p&gt;æ­¤å¤„é»˜è®¤ä½ å·²ç»è‡³å°‘ä½¿ç”¨è¿‡ä¸»æµæ¡†æ¶ Router ä¸­çš„ä¸€ç§ï¼Œé‚£å°±è‚¯å®šçŸ¥é“è·¯ç”±é…ç½®æ—¶è‚¯å®šä¼šæœ‰ä¸ªé…ç½®é¡¹æ˜¯å…³äºï¼Œä½¿ç”¨ &lt;code&gt;hash&lt;/code&gt; æ¨¡å¼è¿˜æ˜¯ &lt;code&gt;history&lt;/code&gt; æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/01.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;div style=&quot;text-align:center&quot;&gt;vue-router é€šè¿‡ç»™å®ä¾‹ä¼ å…¥ &lt;code&gt;mode&lt;/code&gt; å­—æ®µæ¥è®¾ç½®&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/router/02.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;div style=&quot;text-align:center&quot;&gt;react-router åˆ™é€šè¿‡ç›´æ¥ä½¿ç”¨ä¸åŒçš„è·¯ç”±ç»„ä»¶è¿›è¡ŒåŒºåˆ†&lt;/div&gt;

&lt;p&gt;è¿™ä¸¤ç§æ¨¡å¼ä¾¿æ˜¯ç›®å‰æˆ‘ä»¬åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä¸ºå•é¡µåº”ç”¨å®ç°â€œ&lt;strong&gt;æ— éœ€é‡è½½é¡µé¢å³å¯æ›´æ–°è§†å›¾&lt;/strong&gt;â€çš„åŸç†ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«è¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;h3 id=&quot;hash-æ¨¡å¼&quot;&gt;&lt;a href=&quot;#hash-æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;hash æ¨¡å¼&quot;&gt;&lt;/a&gt;hash æ¨¡å¼&lt;/h3&gt;&lt;p&gt;url ä¸­ä½¿ç”¨äº† hash ç¬¦å· &lt;code&gt;#&lt;/code&gt; åçš„å†…å®¹ä¾¿å±äº &lt;code&gt;fragment&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/03.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ‰åˆ«äº url ä¸­çš„ &lt;code&gt;?&lt;/code&gt; ç¬¦å·ï¼Œ&lt;code&gt;fragment&lt;/code&gt; è®¾è®¡ä¹‹åˆä¾¿æ˜¯ä¸ºäº†&lt;code&gt;é”šç‚¹&lt;/code&gt;è¿™ä¸€ç‰¹æ€§ï¼Œé€šè¿‡ &lt;code&gt;fragment&lt;/code&gt; æŒ‡å®šç½‘é¡µä¸­çš„ä½ç½®ï¼Œæµè§ˆå™¨ä¼šåŒ¹é…åˆ° id æˆ– name ä¸º &lt;code&gt;fragment&lt;/code&gt; å€¼çš„ a æ ‡ç­¾ï¼Œå°†å…¶æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸçš„é¡¶éƒ¨ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œ&lt;code&gt;fragment&lt;/code&gt; è¿˜å…·å¤‡ä»¥ä¸‹ä¸‰ä¸ªç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¿®æ”¹#åçš„ &lt;code&gt;fragment&lt;/code&gt; å€¼ä¸ä¼šå¯¼è‡´é¡µé¢é‡æ–°åŠ è½½ï¼Œä½†æ˜¯ä¼šæ”¹å˜æµè§ˆå™¨çš„å†å²è®°å½•&lt;/li&gt;
&lt;li&gt;ä½œä¸º url å‘èµ· HTTP è¯·æ±‚æ—¶ï¼Œ&lt;code&gt;fragment&lt;/code&gt; éƒ¨åˆ†ä¸ä¼šè¢«åŒ…å«åœ¨è¯·æ±‚å¤´ä¸­ï¼Œä¹Ÿå°±ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fragment&lt;/code&gt; ä¸€èˆ¬ä¸ä¼šè¢«æœç´¢å¼•æ“æ”¶å½•ï¼ˆè™½ç„¶ Google ä¹Ÿå‡ºäº†ç›¸åº”å¯¹ç­–ä½œä¸ºè¡¥æ•‘ï¼Œä½†æ•´ä½“ä¸Šè¿™ç§æ¨¡å¼å¯¹ SEO ä¾ç„¶ç®—ä¸ä¸Šä¸å‹å¥½ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é‚£ hash æ¨¡å¼æ˜¯å¦‚ä½•è¿›è¡Œè·¯ç”±çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é€šè¿‡ç›‘å¬ &lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/Window/onhashchange&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;onhashchange&lt;/a&gt; äº‹ä»¶å³å¯æ•è· hash å€¼çš„æ”¹å˜ç„¶åæ‰§è¡Œåç»­çš„æ›´æ–°è§†å›¾é€»è¾‘ï¼ˆå…·ä½“å®ç°åé¢å†è§£é‡Šï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;history-æ¨¡å¼ï¼ˆåˆå-browser-æ¨¡å¼ã€HTML5-æ¨¡å¼ï¼‰&quot;&gt;&lt;a href=&quot;#history-æ¨¡å¼ï¼ˆåˆå-browser-æ¨¡å¼ã€HTML5-æ¨¡å¼ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;history æ¨¡å¼ï¼ˆåˆå browser æ¨¡å¼ã€HTML5 æ¨¡å¼ï¼‰&quot;&gt;&lt;/a&gt;history æ¨¡å¼ï¼ˆåˆå browser æ¨¡å¼ã€HTML5 æ¨¡å¼ï¼‰&lt;/h3&gt;&lt;p&gt;è¿™ä¸€æ¨¡å¼çš„å®ç°åŸºäº &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/History&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Web API ä¸­çš„ History&lt;/a&gt;ï¼Œæµè§ˆå™¨å·¥å…·æ çš„å‰è¿›ä¸åé€€å®é™…ä¸Šä¹Ÿæ˜¯åœ¨æ“ä½œ &lt;code&gt;History&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ&lt;code&gt;History.pushState()&lt;/code&gt; ä¸ &lt;code&gt;History.replaceState()&lt;/code&gt; è®©æˆ‘ä»¬å¯ä»¥å®ç°è·¯ç”±ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.history.pushState(stateObject, title, URL);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.history.replaceState(stateObject, title, URL);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸¤è€…ç”¨æ³•ç±»ä¼¼ï¼Œ&lt;strong&gt;URL å¿…é¡»ä¸ºä¸å½“å‰é¡µé¢å±äºåŒåŸŸ&lt;/strong&gt;ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åéƒ½ä¼šä½¿å¾—æµè§ˆå™¨åœ°å€æ æ›´æ–°ï¼Œä½†ä¸è·³è½¬ï¼ŒåŒæ—¶ &lt;code&gt;History.state&lt;/code&gt; å¯¹è±¡ä¹Ÿå°†æ›´æ–°ä¸ºä¼ å…¥çš„ URL å€¼ï¼Œè¿™å°±ä¸ºå‰ç«¯è·¯ç”±çš„å®ç°æä¾›å¯èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ¯å½“ &lt;code&gt;History&lt;/code&gt; å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘ &lt;code&gt;popstate&lt;/code&gt; äº‹ä»¶ï¼ŒåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬è¿™ä¸€äº‹ä»¶ï¼Œåœ¨å›è°ƒä¸­æ‰§è¡Œè·¯ç”±åŒ¹é…é€»è¾‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æºç &quot;&gt;&lt;a href=&quot;#æºç &quot; class=&quot;headerlink&quot; title=&quot;æºç &quot;&gt;&lt;/a&gt;æºç &lt;/h2&gt;&lt;p&gt;&lt;code&gt;vue-router&lt;/code&gt; çš„æºç æ›´ä¸ºæ˜“è¯»ï¼Œå‡ ä¸ªç‰ˆæœ¬ä¸‹æ¥ API å˜åŒ–ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œæ­¤å¤„ä»¥ &lt;code&gt;vue-router&lt;/code&gt; æºç ä½œä¸ºç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹&lt;a href=&quot;https://github.com/vuejs/vue-router/tree/dev/src&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç›®å½•ç»“æ„&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/04.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;components æ–‡ä»¶å¤¹ä¸­ä¾¿æ˜¯æ¶‰åŠåˆ°è§†å›¾æ›´æ–°çš„ &lt;code&gt;Link&lt;/code&gt; ä¸ &lt;code&gt;RouterView&lt;/code&gt; ç»„ä»¶ï¼Œhistory æ–‡ä»¶ä¸­æ¶‰åŠåˆ°æˆ‘ä»¬åˆšåˆšæåˆ°çš„æµè§ˆå™¨ä¸­ä¸¤ç§è·¯ç”±æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹å…¥å£æ–‡ä»¶&lt;a href=&quot;https://github.com/vuejs/vue-router/blob/dev/src/index.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/vuejs/vue-router/blob/dev/src/index.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ„é€ å™¨ä¸­è¿›è¡Œäº† &lt;code&gt;mode&lt;/code&gt; è¯»å–ï¼Œå¯ä»¥å¾—çŸ¥ vue-router é»˜è®¤ä½¿ç”¨ &lt;code&gt;hash æ¨¡å¼&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/05.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ switch å‡½æ•°ä¸­åˆ†åˆ«è°ƒç”¨å„è‡ªæ¨¡å¼å¯¹è·¯ç”±çš„ history å¯¹è±¡è¿›è¡ŒåŠ å·¥ã€‚éšåè°ƒç”¨ &lt;a href=&quot;https://github.com/vuejs/vue-router/blob/701d02b810da200b9ee7bac757d62b628327c6dd/src/install.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;install.js&lt;/a&gt; å°† vue-router æ··å…¥ Vue å®ä¾‹ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/06.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡å…¨å±€çš„ Mixin å¯¹è±¡ï¼Œåœ¨ Vue å®ä¾‹çš„ &lt;code&gt;beforeCreate&lt;/code&gt; é’©å­å‡½æ•°ä¸­å°†å…¶æ··å…¥ï¼Œå¹¶å°†ä¸¤ä¸ªç»„ä»¶è¿›è¡ŒæŒ‚è½½ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸¤ä¸ªé’ˆå¯¹ä¸åŒæ¨¡å¼ä¸‹ histroy çš„åŒ…è£…æ–¹æ³•å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä»¥ &lt;a href=&quot;https://github.com/vuejs/vue-router/blob/701d02b810da200b9ee7bac757d62b628327c6dd/src/history/hash.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hash.js&lt;/a&gt;ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/router/07.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;å…ˆæ˜¯è®¾ç½®äº†äº‹ä»¶ç›‘å¬ï¼Œç„¶åå£°æ˜äº† goã€pushã€replace ç­‰æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ &lt;code&gt;supportsPushState&lt;/code&gt; æ˜¯å·¥å…·æ–¹æ³•ï¼Œé€šè¿‡ &lt;code&gt;window.navigator.userAgent&lt;/code&gt; è¯»å–è®¾å¤‡ä¿¡æ¯åˆ¤æ–­ç§»åŠ¨ç«¯è®¾å¤‡æ˜¯å¦æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ä» goã€pushã€replace ç­‰æ–¹æ³•çš„å®ç°å¯ä»¥çœ‹å‡ºï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡åœ¨history åŸºç¡€ä¸Šæ”¹å†™çš„ &lt;a href=&quot;https://github.com/vuejs/vue-router/blob/701d02b810da200b9ee7bac757d62b628327c6dd/src/util/push-state.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pushState&lt;/a&gt; æ–¹æ³•å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;hash.js è¿˜æœ‰ä¸€äº›é’ˆå¯¹ hash æ¨¡å¼ç‰¹æœ‰çš„æ–¹æ³•å¦‚ &lt;code&gt;ensureSlash()&lt;/code&gt;ï¼Œå…¶ä½™å®ç°æ€è·¯åŸºæœ¬ä¸ &lt;a href=&quot;https://github.com/vuejs/vue-router/blob/701d02b810da200b9ee7bac757d62b628327c6dd/src/history/html5.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;html5.js&lt;/a&gt; ç›¸åŒã€‚&lt;/p&gt;
&lt;h2 id=&quot;æœ€å&quot;&gt;&lt;a href=&quot;#æœ€å&quot; class=&quot;headerlink&quot; title=&quot;æœ€å&quot;&gt;&lt;/a&gt;æœ€å&lt;/h2&gt;&lt;p&gt;æ‰€ä»¥åœ¨ä¸å€ŸåŠ©æ¡†æ¶çš„æƒ…å†µä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªæç®€ç‰ˆçš„å‰ç«¯è·¯ç”±ä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾é¢˜äº†ï¼Œ&lt;a href=&quot;https://github.com/Colafornia/Wheels/blob/master/Router/index.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Wheels/Router&lt;/a&gt; è½»æ¾å†™ä¸¤ç§~&lt;/p&gt;
&lt;p&gt;å…³äºå®é™…å·¥ç¨‹ä¸­ä½¿ç”¨çš„è·¯ç”±å…¶å®è¿˜æœ‰å¾ˆå¤šè¾¹ç•Œæƒ…å†µéœ€è¦å¤„ç†ï¼Œ&lt;code&gt;react-router&lt;/code&gt; ä¸ &lt;code&gt;vue-router&lt;/code&gt; ç»“åˆå„è‡ªæ¡†æ¶å®ä¾‹ä¸ä¸Šä¸‹æ–‡ï¼Œå®ç°äº†éå¸¸ç®€æ´é«˜æ•ˆçš„è·¯ç”±æœºåˆ¶ï¼Œæ¨èå¤§å®¶é˜…è¯»æºç å¥½å¥½æŒ–æ˜ä¸€ä¸‹ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/router/cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘çœ‹äº†ä¸€äº›ç›¸å…³èµ„æ–™ï¼Œç‰¹åœ°æ¥æ•´ç†ä¸€ä¸‹ï¼Œå½“å‰å‰ç«¯ä¸»æµè·¯ç”± &lt;code&gt;react-router&lt;/code&gt;ã€&lt;code&gt;vue-router&lt;/code&gt; çš„å®ç°æ€è·¯ï¼Œå†…å®¹ä¸å¤šä¹Ÿå¹¶ä¸å¤æ‚ï¼Œä½œä¸ºçŸ¥è¯†ä½“ç³»çš„è¡¥å…¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="route javascript" scheme="https://blog.colafornia.me/categories/route-javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>Blink æ¸²æŸ“ï¼š é‡å»ºå¼•æ“</title>
    <link href="https://blog.colafornia.me/post/2018/translation-blink-render/"/>
    <id>https://blog.colafornia.me/post/2018/translation-blink-render/</id>
    <published>2018-10-07T11:30:00.000Z</published>
    <updated>2019-10-24T02:59:33.016Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3uJG8.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ç³»æ˜é‡‘å§”æ‰˜ç¿»è¯‘æ•´ç†çš„ BlinkOn9 ä¼šè®®æ¼”è®²å†…å®¹&lt;br&gt;æ¼”è®²èµ„æ–™ &lt;a href=&quot;https://www.youtube.com/watch?v=ExNYN_phaxI&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è§†é¢‘&lt;/a&gt;/ &lt;a href=&quot;https://docs.google.com/presentation/d/1Iko1oIYb-VHwOOFU3rBPUcOO_9lAd3NutYluATgzV_0/edit#slide=id.g36f1b50c08_0_3702&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PPT&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ &lt;code&gt;BlinkOn9&lt;/code&gt; ä¼šè®®ä¸­ï¼ŒGoogle Blink å›¢é˜Ÿå¼€å‘è€… Philip Rogers ä¸ Stefan Zager è¿›è¡Œäº†&lt;a href=&quot;https://www.youtube.com/watch?v=ExNYN_phaxI&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠBlink Rendering - Rebuilding the Engine Mid-Flightã€‹åˆ†äº«&lt;/a&gt;ï¼Œæ—¨åœ¨ä»‹ç» Blink æ¸²æŸ“çš„åŸºæœ¬åŸç†ä¸å¼€å‘å›¢é˜Ÿè¿‘æœŸå¯¹æ»šåŠ¨æ€§èƒ½ã€ç»˜åˆ¶åˆæˆä¸æ’ç‰ˆçš„æ”¹è¿›ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œæ¸²æŸ“æ˜¯æµè§ˆå™¨çš„æŸç§åŸºç¡€åŠŸèƒ½ï¼Œå®ƒå°†ä½ çš„ HTML å’Œ CSS è§£ææˆ DOM æ ‘ï¼Œå¹¶å°†å…¶è½¬æ¢æˆå±å¹•ä¸Šçš„åƒç´ ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3uRsJ.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­æ˜¾ç¤ºäº† &lt;code&gt;document&lt;/code&gt; ç”Ÿå‘½å‘¨æœŸçš„ä¸»è¦é˜¶æ®µï¼Œä¸­é—´å››ä¸ªé»‘è‰²æ¡†æ˜¯æ¸²æŸ“æµæ°´çº¿ï¼ˆ&lt;code&gt;render pipeline&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸€ç›´è®¤ä¸ºç ”ç©¶ Chrome çš„è¿½è¸ªå™¨æœ‰åŠ©äºç†è§£ document ç”Ÿå‘½å‘¨æœŸã€‚å› æ­¤ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹çš„ Chrome è¿½è¸ªå™¨é¢æ¿ï¼Œå›¾ä¸­çš„é«˜äº®åŒºåŸŸæ˜¯æ¸²æŸ“ä¸»çº¿ç¨‹ï¼Œåº•éƒ¨çš„ä¸€å°éƒ¨åˆ†å±äºåˆæˆå™¨çº¿ç¨‹ï¼ˆ&lt;code&gt;compositor thread&lt;/code&gt;ï¼‰ã€‚åœ¨æ¸²æŸ“çš„å¼€å§‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¤„ç†èµ„æºåŠ è½½ï¼Œè¿è¡Œ JavaScriptï¼Œä¿®æ”¹ DOM æ ‘ç­‰ç­‰ï¼Œå…¶é—´ä¼šæœ‰ä¸€æ®µç©ºé—²é˜¶æ®µï¼Œç”¨äºå¤„ç†ä¸€èˆ¬ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3u4d1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°±ä¼šå‘ç”Ÿ &lt;code&gt;VSync&lt;/code&gt;ï¼ˆå‚ç›´åŒæœŸï¼ŒVertical Synchronizationï¼‰ã€‚vsync æ˜¯æµè§ˆå™¨åˆšåˆšå°†ä¸€ä¸ªæ»¡æ»¡çš„åƒç´ çª—å£æ¨åˆ°æ˜¾ç¤ºå™¨ä¸Šï¼Œå¹¶ä¸”å¼€å§‹ç”Ÿæˆä¸‹ä¸€ä¸ªåƒç´ çª—å£äº†ã€‚å› æ­¤å¯¹äºæ¸²æŸ“è¿›ç¨‹æ¥è¯´ï¼Œè¿™æ„å‘³ç€å…¨å‘˜éƒ½å·²åšå¥½å‡†å¤‡ç”Ÿæˆæ–°çš„åƒç´ ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3u5Ix.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;vsync è§¦å‘äº† &lt;code&gt;BeginMainFrame&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦æ–¹æ³•ï¼Œå®ƒ&lt;strong&gt;é©±åŠ¨äº†æ¸²æŸ“æµæ°´çº¿&lt;/strong&gt;ã€‚&lt;code&gt;BeginMainFrame&lt;/code&gt; é¦–å…ˆä¼šå¤„ç†è¾“å…¥äº‹ä»¶ï¼Œå¦‚æ»šåŠ¨ã€è§¦å±ã€æ‰‹åŠ¿ã€é¼ æ ‡ç­‰ï¼Œç„¶åä¼šè¿è¡Œ &lt;code&gt;requestAnimationFrame&lt;/code&gt; å›è°ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3uLsH.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ä¾¿æ˜¯å¼€å§‹æ‰§è¡Œæ¸²æŸ“æµæ°´çº¿äº†ï¼Œå¦‚ä¸‹å›¾ï¼Œå…±æœ‰å››ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;style: å°† DOM æ ‘è½¬åŒ–ä¸º layout æ ‘ï¼Œéå† layout æ ‘ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ ‡æ³¨å…¶æ ·å¼ä¿¡æ¯ï¼Œç„¶åå°†å¸¦æœ‰æ ·å¼ä¿¡æ¯çš„ layout æ ‘ä¼ é€’åˆ°ä¸‹ä¸€é˜¶æ®µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;layout: æˆ‘ä»¬å°†å†æ¬¡éå† layout æ ‘ï¼Œä¸ºèŠ‚ç‚¹æ ‡æ³¨å…¶å°ºå¯¸ã€ä½ç½®ä¿¡æ¯ï¼Œè‡³æ­¤æˆ‘ä»¬å·²ä¸¤æ¬¡å¯¹ layout æ ‘è¿›è¡Œæ ‡æ³¨ï¼Œç„¶åå°†å®ƒä¼ é€’ç»™åˆæˆé˜¶æ®µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;composition setup: åœ¨åˆæˆè®¾ç½®é˜¶æ®µæˆ‘ä»¬ä¼šç¡®å®šéœ€è¦ç»˜åˆ¶å¤šå°‘ä¸ªåˆæˆå±‚ï¼ˆ&lt;code&gt;compositing layers&lt;/code&gt;ï¼‰ï¼Œä»¥åŠå®ƒä»¬çš„å°ºå¯¸ã€ä½ç½®ã€å±‚å é¡ºåºç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;paint: ç»˜åˆ¶é˜¶æ®µä¼šè·å– layout æ ‘çš„æ ‡æ³¨ä»¥åŠåœ¨åˆæˆè®¾ç½®é˜¶æ®µæ‰€è®°å½•ä¿¡æ¯ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç”±åŸå§‹ç»˜å›¾å‘½ä»¤ç»„æˆçš„â€œæ˜¾ç¤ºåˆ—è¡¨â€ï¼Œå®ƒä¼šæŒ‡ç¤ºåˆæˆå™¨å¦‚ä½•è¿›è¡Œåƒç´ ç»˜åˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3ujeA.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç»˜åˆ¶é˜¶æ®µçš„ç»“å°¾ï¼Œä¼šç”±ä¸»çº¿ç¨‹åˆ‡æ¢åˆ°åˆæˆçº¿ç¨‹ï¼ˆå³ä¸‹å›¾è¿½è¸ªå™¨ä¸­çš„ç»¿è‰²åŒºåŸŸï¼‰ï¼Œå°†å…‰æ …åŒ–å·¥ä½œåˆ‡åˆ†æˆå‡ ä¸ªâ€œç“¦ç‰‡â€ï¼Œåˆ†é…ç»™å‡ ä¸ªå·¥ä½œçº¿ç¨‹æ¥è¿›è¡Œã€‚å¾…å…‰æ …åŒ–å®Œæˆï¼Œæˆ‘ä»¬å°†è¿›å…¥ Chrome åˆæˆå™¨ã€‚è¿™ä¸€è¿‡ç¨‹ä¼šå¾ªç¯å¾€å¤åœ°æ‰§è¡Œä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3K9W8.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šä¾¿æ˜¯å…³äºæ¸²æŸ“çš„ç®€å•ä»‹ç»ï¼Œå€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸»çº¿ç¨‹éå¸¸ç¹å¿™ï¼Œæ‰€æœ‰åŠ¨ä½œéƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œè„šæœ¬åœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼Œè¿˜è´Ÿè´£äº†æ¸²æŸ“å’Œè®¸å¤šå…¶å®ƒåŠŸèƒ½ï¼Œå› æ­¤&lt;strong&gt;ä¸»çº¿ç¨‹æ˜¯éå¸¸æ‹¥æŒ¤çš„&lt;/strong&gt;ã€‚ç»è¿‡å¤šå¹´çš„ä¼˜åŒ–å·¥ä½œï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹å¼ï¼Œå°±æ˜¯æŠŠä¸»çº¿ç¨‹çš„å·¥ä½œåˆ‡åˆ†ï¼Œäº¤ç»™å…¶å®ƒçº¿ç¨‹å¤„ç†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬äºŒéƒ¨åˆ†ï¼šæ¸²æŸ“çš„é‡è¦æ€§ä¸æ—¶ä¸‹çš„éš¾é¢˜&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒéƒ¨åˆ†ï¼šæ¸²æŸ“çš„é‡è¦æ€§ä¸æ—¶ä¸‹çš„éš¾é¢˜&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒéƒ¨åˆ†ï¼šæ¸²æŸ“çš„é‡è¦æ€§ä¸æ—¶ä¸‹çš„éš¾é¢˜&quot;&gt;&lt;/a&gt;ç¬¬äºŒéƒ¨åˆ†ï¼šæ¸²æŸ“çš„é‡è¦æ€§ä¸æ—¶ä¸‹çš„éš¾é¢˜&lt;/h2&gt;&lt;p&gt;å¯¹äº Web å¹³å°æ¥è¯´ï¼Œæ¸²æŸ“æ˜¯éå¸¸é‡è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ˜¯å› ä¸ºï¼ŒåŠ¨æ€ç½‘é¡µçš„æœ¬è´¨æ˜¯æ¥å—ç”¨æˆ·æˆ–è„šæœ¬ç”Ÿæˆçš„è¾“å…¥ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºè§†è§‰ç»“æœã€‚&lt;strong&gt;æ¸²æŸ“æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒ&lt;/strong&gt;ï¼Œå› æ­¤æ— è®ºä½ çš„é¡µé¢åšçš„æœ‰å¤šä¹ˆé…·ç‚«ï¼Œå¦‚æœæ¸²æŸ“å‡ºäº†é—®é¢˜ï¼Œç”¨æˆ·å°±ä¸ä¼šæœ‰ä»»ä½•å¥½çš„ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;å…¶äºŒï¼Œ&lt;strong&gt;æ¸²æŸ“æ˜¯ç½‘é¡µæ€§èƒ½çš„ä¸»è¦å†³å®šå› ç´ &lt;/strong&gt;(æ„ŸçŸ¥çš„å’Œå®é™…çš„)ï¼Œæ¸²æŸ“æ˜¯æ— æ³•ä¸­æ–­çš„ï¼Œå¦‚æœ JavaScript è¿è¡Œå¤ªä¹…é¡µé¢å°±ä¼šå˜å¾—ç¬¨é‡ï¼Œè¿™å½“ç„¶ä¼šå¼•èµ·ç”¨æˆ·æ³¨æ„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸‰ï¼Œç°ä»£ç½‘é¡µæ˜¯åŠ¨æ€çš„â€”â€”ä¼šä¸æ–­åœ°ä¿®æ”¹å†…å®¹ï¼ŒåŠ è½½å†…å®¹ï¼Œè¿›è¡ŒåŠ¨ç”»ã€‚ä¸ºäº†è·Ÿä¸Šæ­¥ä¼ï¼Œä¿è¯äº¤äº’æµç•…ï¼Œ&lt;strong&gt;æ¸²æŸ“ä»£ç å¿…é¡»æ˜¯ä¸€ç­‰å…¬æ°‘&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹ä»‹ç»æˆ‘ä»¬åœ¨æ¸²æŸ“ä»£ç ä¸­é‡åˆ°çš„æŒ‘æˆ˜ï¼Œä»¥åŠä¸ºäº†è§£å†³è¿™äº›é—®é¢˜æˆ‘ä»¬æ­£åœ¨ç€æ‰‹è¿›è¡Œçš„æ”¹è¿›ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-æ»šåŠ¨&quot;&gt;&lt;a href=&quot;#1-æ»šåŠ¨&quot; class=&quot;headerlink&quot; title=&quot;1. æ»šåŠ¨&quot;&gt;&lt;/a&gt;1. æ»šåŠ¨&lt;/h3&gt;&lt;p&gt;æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œæ¸²æŸ“æ˜¯ç½‘é¡µæ€§èƒ½çš„ä¸»è¦å†³å®šå› ç´ ï¼Œè€Œ&lt;strong&gt;æ»šåŠ¨ä½“éªŒåˆ™æ˜¯å…¶é‡ä¸­ä¹‹é‡&lt;/strong&gt;ã€‚ç”¨æˆ·å¯¹äºæ»šåŠ¨ä½“éªŒæ˜¯éå¸¸æ•æ„Ÿçš„ï¼Œæ»šåŠ¨çš„ä½“éªŒå†³å®šäº†å…¶å¯¹é¡µé¢æ•´ä½“æ€§èƒ½çš„æ„ŸçŸ¥ï¼Œå¦‚æœæ»šåŠ¨ä½“éªŒå¾ˆç³Ÿç³•ï¼Œé¡µé¢å†é…·ç‚«ä¹Ÿæ‹¯æ•‘ä¸äº†ã€‚Blink ä¸­æ¶‰åŠåˆ°æ»šåŠ¨çš„ä»£ç å·§å¦™åœ°éšè—åœ¨å„å¤„ï¼Œè·¨è¶Šäº†æ¸²æŸ“å™¨ä¸­çš„ä¸»çº¿ç¨‹ä¸åˆæˆçº¿ç¨‹ï¼Œç”šè‡³åŒ…æ‹¬æµè§ˆå™¨è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å›é¦–å†å²ï¼Œåœ¨ 1998 å¹´ &lt;code&gt;KHTML&lt;/code&gt; çš„åŸå§‹ç‰ˆæœ¬ä¸­é¦–æ¬¡èµ‹äºˆäº† &lt;code&gt;document&lt;/code&gt; æ»šåŠ¨èƒ½åŠ›ã€‚å…¶åï¼Œ2003 å¹´ &lt;code&gt;WebKit&lt;/code&gt; ä¸­ div ä¹Ÿå¯ä»¥è¿›è¡Œæ»šåŠ¨äº†ï¼Œç„¶è€Œè¿™ä¸¤ç§æ»šåŠ¨éƒ½éœ€è¦é‡æ–°è§¦å‘æ¸²æŸ“æµæ°´çº¿æ¥è¿›è¡Œã€‚èµ·åˆï¼Œè¿™ä¸¤ç§æ»šåŠ¨çš„ä»£ç æ˜¯åˆ†å¼€ç¼–å†™çš„ï¼Œè¿™ä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œå‡ å¹´ä¹‹åï¼Œéšç€å¯¹æ»šåŠ¨æ·»åŠ äº†å¾ˆå¤šåŠŸèƒ½ï¼Œåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œè¿™äº›å…³äºæ»šåŠ¨çš„ä»£ç ç›´æ¥å˜æˆäº† Blink ä¸­æœ€å¤æ‚ä¹Ÿæœ€éš¾æ‡‚çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¾ç„¶ç»´æŠ¤ç€è¿™ä¸¤å¥—æ»šåŠ¨ä»£ç ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½è¦å†™ä¸¤éã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”±äºæ»šåŠ¨å±äºæ ¸å¿ƒä»£ç ï¼Œå®ç°å…¶å®ƒåŠŸèƒ½ä¹Ÿéš¾å…è¦å»ä¿®æ”¹å®ƒï¼Œå¤æ‚åº¦ç›´çº¿ä¸Šå‡ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3KPSS.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºç›®å‰æ»šåŠ¨ä»£ç çš„ç°çŠ¶ï¼Œä»¥åŠä»»ä½•åŠŸèƒ½æ”¹åŠ¨éƒ½è¦å†™ä¸¤éï¼Œæˆ‘ä»¬æ‰€æœ‰å¼€å‘è€…çš„å·¥ä½œéƒ½å˜å¾—å¾ˆå›°éš¾ï¼Œå› æ­¤ï¼Œåœ¨ 2014 å¹´ Steve Kobus ä¸ Elliott æƒ³åˆ°äº†ä¸€ä¸ªç»å¦™çš„ä¸»æ„ï¼šé€šè¿‡æ ¹å±‚æ»šåŠ¨ï¼ˆ&lt;code&gt;Root Layer Scrolling&lt;/code&gt;ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬å†³å®šå–æ¶ˆ &lt;code&gt;document&lt;/code&gt; æ–‡æ¡£çº§æ»šåŠ¨ï¼Œåªä½¿ç”¨ &lt;code&gt;overflow&lt;/code&gt; å®ç°æ‰€æœ‰çš„æ»šåŠ¨åŠŸèƒ½ï¼Œè¿™ä¸€å†³å®šä¸»è¦æ˜¯ä¸ºäº†é™ä½ä»£ç çš„å¤æ‚åº¦ï¼Œæ”¹å–„ä»£ç è´¨é‡ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰åˆ«çš„å¥½å¤„ï¼Œæ¯”å¦‚ï¼Œç”±äºä¸¤å¥—ä»£ç å·²ç»åˆ†åˆ«ç»´æŠ¤äº†å¾ˆé•¿æ—¶é—´ï¼Œä»–ä»¬çš„è¡Œä¸ºè¡¨ç°ä¹Ÿå¹¶ä¸ä¸€è‡´ã€‚å®é™…ä¸Šï¼Œæ–‡æ¡£çº§æ»šåŠ¨è¡Œä¸ºæœ‰æ˜æ˜¾å·®å¼‚ï¼Œè¿™æ˜¯å› ä¸ºæ–‡æ¡£çº§æ»šåŠ¨ä¸ div æ»šåŠ¨ä¼šæœ‰ä¸€äº›å®Œå…¨ä¸ç›¸å…³çš„ Bugï¼Œä¸€ç§æ»šåŠ¨æœ‰ Bugï¼Œå¦ä¸€å¼ æ»šåŠ¨å¯èƒ½æ²¡æœ‰ï¼ŒçœŸæ˜¯ä¸€å›¢ç³Ÿã€‚&lt;/p&gt;
&lt;p&gt;å®ç°æ ¹å±‚æ»šåŠ¨ä¹Ÿæ˜¯ä¸€ä¸ªæ¼«é•¿è‰°è¾›çš„è¿‡ç¨‹ï¼Œå†ç» 4 å¹´ï¼Œç»ˆäºå®Œæˆï¼Œåœ¨ M66 ç‰ˆæœ¬äº¤ä»˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3KiQg.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æƒ³è¦å¤§è§„æ¨¡æ”¹åŠ¨ä¿®æ”¹æ¸²æŸ“ä»£ç çš„å¸ƒå±€éƒ¨åˆ†ï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯è¦é€šè¿‡å¤§çº¦å››ä¸‡äº”åƒä¸ªå¸ƒå±€æµ‹è¯•ï¼Œä¸Šå›¾ä¸­æµ‹è¯•å¤±è´¥æ¬¡æ•°æ˜¯ç”± 1500 å¼€å§‹çš„ï¼Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬åˆšå¼€å§‹è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¤§çº¦æœ‰ 6000 ä¸ªæµ‹è¯•éƒ½å¤±è´¥äº†ã€‚è¿™äº›æµ‹è¯•éƒ½éœ€è¦åˆ†é—¨åˆ«ç±»ï¼ŒæŒ¨ä¸ªè§£å†³ï¼Œå› æ­¤åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬åˆé¡ºä¾¿è§£å†³äº†å¾ˆå¤šå†å²é—ç•™ Bugã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3M58K.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„æ€§èƒ½åŸºå‡†æµ‹è¯•å›¾ä¸­å¯ä»¥å‘ç°ï¼Œåœ¨æˆ‘ä»¬åˆšå¼€å±•å·¥ä½œæ—¶ï¼Œæ€§èƒ½æœ‰äº†ä¸€æ¬¡æ˜æ˜¾é€€åŒ–ï¼Œå¤§æ¦‚é€€åŒ–äº† 40% åˆ° 50%ï¼Œéšç€æ·±å…¥ç ”ç©¶è¿™äº›æ€§èƒ½ Bugï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ˜¯æ·±é€’å½’åˆ° CPU è·¯å¾„çš„ä»£ç ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»åš CPU ç›¸å…³ä¼˜åŒ–ä¸ Chrome chromium éƒ¨åˆ†çš„ä»£ç ä¿®æ”¹ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸è‰°éš¾çš„è¿‡ç¨‹ï¼Œè¦å„ç§ä¸åŒçš„ä»£ç ä¿®å¤æ‰èƒ½è®©æˆ‘ä»¬çœŸæ­£å›åˆ°åŸºçº¿æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä¹Ÿä¸å¾—ä¸é‡ç”³ï¼Œè¿™å—ä»£ç çœŸçš„å¾ˆéš¾å¤„ç†ï¼Œå¦‚æœæˆ‘ä»¬çŠ¯äº†ä»»ä½•é”™è¯¯ï¼Œç”¨æˆ·éƒ½ä¼šç«‹å³å‘ç°ï¼Œè¿™äº›é”™è¯¯ä¹Ÿä¼šå½±å“æ‰€æœ‰é¡µé¢ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å…³äºç»˜åˆ¶ä¸åˆæˆæˆ‘ä»¬æ‰€åšçš„æ”¹è¿›ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-ç»˜åˆ¶ä¸åˆæˆ&quot;&gt;&lt;a href=&quot;#2-ç»˜åˆ¶ä¸åˆæˆ&quot; class=&quot;headerlink&quot; title=&quot;2. ç»˜åˆ¶ä¸åˆæˆ&quot;&gt;&lt;/a&gt;2. ç»˜åˆ¶ä¸åˆæˆ&lt;/h3&gt;&lt;p&gt;åŒæ»šåŠ¨ä»£ç ä¸€æ ·ï¼Œç»˜åˆ¶ä¸åˆæˆéƒ¨åˆ†çš„ä»£ç ä¹Ÿç›¸å½“å¤è€ï¼Œå¤§æ¦‚å·²ç»æœ‰ 16 å¹´äº†ï¼Œåœ¨å½“å‰çš„ä»£ç æ¶æ„ä¸­å¼€å‘æ–°åŠŸèƒ½å®å±ä¸æ˜“ã€‚ç°åœ¨æœ‰æœºä¼šå¯¹è¿™ä¸€éƒ¨åˆ†ä»£ç è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œé™ä½å†…å­˜å ç”¨ï¼Œä½¿å¾—ä»£ç æ˜“äºæ‰©å±•ï¼Œä¾¿äºå¼€å‘æ–°åŠŸèƒ½ã€‚å› æ­¤æˆ‘ä»¬å¼€å±•äº†ä¸€ä¸ªç»¼åˆå·¥ç¨‹é¡¹ç›®ï¼šç»˜åˆ¶ä»£ç ç˜¦èº«ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å¿…è¦å…ˆä»æŠ€æœ¯æ–¹é¢æ¦‚è¿°ç»˜åˆ¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤é…·ç‚«ï¼Œä»¥åŠæˆ‘ä»¬åœ¨æ•´ä½“é¡¹ç›®ä¸­æ‰€å¤„çš„ä½ç½®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…ˆä»å‰æ–‡æ‰€æåˆ°çš„æ»šåŠ¨æ˜¯å¦‚ä½•å·¥ä½œçš„å¼€å§‹å§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿‡å»ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¿›è¡Œ div æ»šåŠ¨ï¼Œæˆ‘ä»¬éœ€è¦é‡ç»˜å‡ºæ¯ä¸€å¸§ã€‚è¿™æ„å‘³ç€å¦‚æœç”¨æˆ·ä¸€ç›´æ‹–åŠ¨æ»šè½®ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”Ÿæˆæ‰€æœ‰çš„åƒç´ ç‚¹ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…æˆ‘ä»¬è¿è¡Œæ•´ä¸ªæ¸²æŸ“æµæ°´çº¿åæ‰å¯ä»¥ç»§ç»­ç§»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæƒŠäººçš„åˆ›æ–°å«åšåˆæˆçº¿ç¨‹æ»šåŠ¨ï¼ˆ&lt;code&gt;composited threaded scrolling&lt;/code&gt;ï¼‰ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯åˆæˆï¼Œè¿™å¾ˆåƒä»ç”µå­æ¸¸æˆä¸­è·å¾—çš„çµæ„Ÿï¼Œå…¶æ€æƒ³æ˜¯å°†æ•´ä¸ªå¯æ»šåŠ¨åŒºåŸŸç»˜åˆ¶åˆ°ä¸€ä¸ªå›¾åƒå›¾å½¢ç¼“å†²åŒºä¸­ï¼Œç„¶åå¹¶ä¸æ˜¯æ¯ä¸€å¸§é‡ç»˜ç§»åŠ¨åŒºåŸŸï¼Œè€Œæ˜¯å°†ä¸€ä¸ªå­çº¹ç†å¤åˆ¶åˆ°ä¸åŒçš„çº¹ç†ä¸­ã€‚ç¬¬äºŒä¸ªåˆ›æ–°æ˜¯å°†æ»šåŠ¨æ“ä½œè„±ç¦»å‡ºä¸»çº¿ç¨‹ï¼Œè¿˜è®°å¾—å‰æ–‡æåˆ°è¿‡çš„å§ï¼Œä¸»çº¿ç¨‹çš„èµ„æºæ˜¯å¤šä¹ˆå®è´µï¼Œæ­¤å¤„çš„åŸºæœ¬æ€æƒ³æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ JavaScript è¿è¡Œçš„åŒæ—¶è¿›è¡Œæ»šåŠ¨ã€‚è¿™ä¸¤ä»¶äº‹ç»“åˆåœ¨ä¸€èµ·ï¼Œæ˜¯ä¸€é¡¹éå¸¸æƒŠäººçš„åˆ›æ–°ï¼Œè¿™ç§åˆæˆçº¿ç¨‹æ¸²æŸ“çš„æ€æƒ³å¯ä»¥æ¨å¹¿åˆ°ä»»ä½•éœ€è¦å¯¹çº¹ç†è¿›è¡Œä¿®æ”¹çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´ï¼Œtransformï¼Œopacityï¼Œfilterï¼Œclip ç­‰ç­‰è¿™äº›éƒ½å¯ä»¥é€šè¿‡åˆæˆçº¿ç¨‹æ€æƒ³æ¥å®ç°ã€‚å½“ä½ åœ¨è½¯ä»¶ä¸Šè¿è¡Œï¼Œç”¨ CPU ç»˜åˆ¶åƒç´ æ—¶ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å¦‚æœåœ¨ GPU ä¸Šè¿è¡Œï¼Œå®ƒçš„é€Ÿåº¦æ›´ä¼šå¿«æˆä¸€é“é—ªç”µã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªå«â€œè€å·¢çˆ†ç‚¸ï¼ˆ&lt;code&gt;lair explosion&lt;/code&gt;ï¼‰â€çš„é—®é¢˜ã€‚å¦‚ä¸‹å›¾ï¼Œå¦‚æœæˆ‘ä»¬å°†ç»¿ç›’å­ä½¿ç”¨åˆæˆçº¿ç¨‹è¿›è¡Œæ—‹è½¬ï¼Œå®ƒä¼šè´¯ç©¿è“ç›’å­ã€‚é—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦ç¡®è®¤è“ç›’å­ä¼šè¢«ç»˜åˆ¶åœ¨ç»¿ç›’å­ä¹‹ä¸Šï¼Œå› æ­¤è“ç›’å­ä¹Ÿä¼šè¢«åˆæˆã€‚è¿™ç§æƒ…å†µä¼šå ç”¨ç›¸å½“å¤šçš„å†…å­˜ã€‚ä½ ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œåœ¨é¡µé¢ä¸Šè®¾ç½®äº†é€æ˜åº¦ï¼Œæœ‰å¯èƒ½ä½ å°±çªç„¶å‘ç°å†…å­˜çˆ†ç‚¸äº†ï¼Œå› ä¸ºé¡µé¢ä¸Šå…¶å®ƒéƒ¨åˆ†ä¹Ÿéƒ½è¢«åˆæˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3MLVA.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹å½“ä¸‹åˆæˆå™¨æ¶æ„ä½“ç³»æ¥é˜è¿°åˆæˆå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç»˜åˆ¶ä»£ç ç˜¦èº«åˆæœ‰ä»€ä¹ˆæ ·çš„æˆæ•ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3QVP0.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ DOM æ ‘ç»“æ„ï¼Œæœ‰ emoji ç¬‘è„¸è¡¨æƒ…çš„ div æ˜¯å¯ä»¥æ»šåŠ¨çš„ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å‰æ–‡æ‰€è¿°çš„å¹¶æ— äºŒè‡´ï¼Œå› æ­¤åœ¨æ’ç‰ˆç¯èŠ‚æˆ‘ä»¬å°†æ ‡æ³¨ layout æ ‘çš„å°ºå¯¸ä¸ä½ç½®ä¿¡æ¯ï¼Œç„¶åä¾¿æ˜¯åˆæˆè®¾ç½®ç¯èŠ‚äº†ï¼Œæˆ‘ä»¬é‡ç‚¹è®²ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Qe2T.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;aã€bã€d éƒ½ä¸å¯æ»šåŠ¨ï¼Œæ‰€ä»¥å®ƒä»¬ä»¨å¯ä»¥ä¸€èµ·ç»˜åˆ¶åˆ°åŒä¸€ä¸ªå›¾å½¢ç¼“å†²åŒºä¸­ï¼ˆ&lt;code&gt;graphics buffer&lt;/code&gt;ï¼‰ã€‚è€Œ emoji ç¬‘è„¸è¡¨æƒ…æ˜¯å¯ä»¥æ»šåŠ¨çš„ï¼Œæˆ‘ä»¬ä¸æƒ³ä¸ºå®ƒçš„æ»šåŠ¨é‡ç»˜æ¯ä¸€å¸§ï¼Œå› æ­¤æŠŠå®ƒå•ç‹¬æ”¾åˆ°ä¸€ä¸ªå›¾å½¢ç¼“å†²åŒºä¸­ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸¤ä¸ªå›¾å½¢ç¼“å†²åŒºï¼Œæ˜¯æ—¶å€™è¿›è¡Œç»˜åˆ¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3QMqJ.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯éå† layout æ ‘ï¼Œè®°å½•ç»˜å›¾å‘½ä»¤ã€‚ç„¶åæ˜¯è¿›è¡Œå…‰æ …åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3QlZ9.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬å°†æ‰§è¡Œç»˜åˆ¶æ­¥éª¤ä¸­æ‰€è®°å½•çš„ç»˜å›¾å‘½ä»¤ï¼Œç”ŸæˆçœŸæ­£çš„åƒç´ ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Q1aR.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæˆ‘ä»¬å°†åœ¨é¡µé¢ä¸Šå®ƒä»¬å®‰æ”¾åˆ°ä¸€èµ·ï¼Œä¸Šä¸‹æ»šåŠ¨ emoji è¡¨æƒ…æ—¶ä¹Ÿä¸ä¼šè§¦å‘é‡ç»˜æ­¥éª¤äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç›®å‰çš„æ¶æ„ä½“ç³»ä¸‹ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€æ˜¯&lt;strong&gt;åˆæˆä»…é™äºç‰¹å®šå­æ ‘&lt;/strong&gt;ã€‚layout æ ‘æœ‰ä¸€ä¸ªå±æ€§ï¼Œå†³å®šæˆ‘ä»¬èƒ½å¦è¿›è¡Œåˆæˆã€‚å¹¶éæ‰€æœ‰å­æ ‘éƒ½æœ‰è¿™ä¸ªå±æ€§ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½éšæ„å°†é¡µé¢ä¸Šçš„ div è½¬æ¢æˆå›¾å½¢ç¼“å†²åŒºï¼Œè¿™å¯¼è‡´äº†ä¸€ä¸ªåŸºæœ¬æ€§åˆæˆ Bugï¼Œåœ¨ 2014 å¹´é¦–æ¬¡å‘ç°ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘ä»¬è¯•å›¾è®© iframe åœ¨ä»»æ„åœ°æ–¹åˆæˆï¼Œä»¥æé«˜æ»šåŠ¨æ€§èƒ½ï¼Œç»“æœå‘ç°é¡µé¢ä¸Šçš„å†…å®¹ç¬é—´éƒ½æ¶ˆå¤±äº†ï¼ŒåŸå› æ˜¯å¦‚æœåˆ¶ä½œäº†ä¸€ä¸ªåˆæˆçš„ iframeï¼Œä½ è¿˜éœ€è¦ç¡®ä¿ä»»ä½•ç»˜åˆ¶åœ¨å®ƒä¸Šæ–¹çš„å†…å®¹ä¹Ÿæ˜¯åˆæˆçš„ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨ 2014 å¹´å‘ç°çš„æ¯ç­æ€§é”™è¯¯ï¼Œå› ä¸ºä½ å·²ç»å»ºç«‹äº†è¿™äº›ç‰¹æ®Šçš„é€»è¾‘æ¥ä¸åˆ›å»ºè¿‡å¤šçš„å›¾å½¢ç¼“å†²åŒºå¤„ç†è¯¸å¦‚æ­¤ç±»çš„äº‹æƒ…ï¼Œç»“æœåœ¨æ¸¸æˆçš„åæœŸå‘ç°äº†ä¸€ç§åŸºæœ¬çš„ç¼ºé™·ï¼Œè¿™ç§ç¼ºé™·æŸç¼šäº†ä½ çš„æ‰‹ï¼Œè¿™å¹¶ä¸æ˜¯æ˜¯æŠŠä½ çš„æ‰‹ç»‘åœ¨ä¸€ä¸ªè¾¹ç¼˜æ¡ˆä¾‹ä¸­ï¼Œè¿™ä¸€ä¸ªå¯èƒ½é‡åˆ°çš„æƒ…å†µï¼ˆGmail åœ¨è¿›è¡Œæ»šåŠ¨ä¼˜åŒ–æ—¶å°±é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œä¼˜åŒ–æ— æ³•ç”Ÿæ•ˆï¼‰ï¼Œè¿™é˜»æ­¢äº†æˆ‘ä»¬ç»§ç»­åœ¨å½“å‰æ¶æ„ä¸­æ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å½“å‰åˆæˆä½“ç³»ç»“æ„çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯&lt;strong&gt;åˆæˆè®¾ç½®æ˜¯åœ¨ç»˜åˆ¶ä¹‹å‰å®Œæˆçš„&lt;/strong&gt;ã€‚æˆ‘ä»¬åœ¨ç³»ç»Ÿæ—©æœŸå°±åˆ›å»ºäº†å›¾åƒç¼“å†²åŒºï¼Œä½ éœ€è¦åœ¨ç»˜åˆ¶æ­¥éª¤ä¸­é‡æ–°è®¡ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰é‡å¤çš„é€»è¾‘ï¼Œå¾ˆéš¾æè¿°è¿™ä¸ªé€»è¾‘æœ‰å¤šå¤æ‚ï¼Œä½†æ˜¯æˆ‘å¯ä»¥è¯´å¤§çº¦ä¸€åŠçš„ç»˜åˆ¶ä»£ç æ˜¯ç”¨äºè¿™ç§å¤§å°å’Œæ•ˆæœï¼Œæ¯”å¦‚ clipã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†åœ¨ç»˜åˆ¶ä¹‹å‰è¿›è¡Œè¿™ç§åˆæˆè®¾ç½®ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œè¿™æ„å‘³ç€ä»»ä½•å¯èƒ½æ”¹å˜ç»˜åˆ¶å¯¹è±¡å¤§å°çš„æ•ˆæœéƒ½éœ€è¦å›åˆ°ä¸»çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ªå¯ä»¥åˆæˆçš„ç›’å­ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯å¯ä»¥æ»šåŠ¨çš„ï¼Œé‚£ä¹ˆåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½ å¿…é¡»å‡è®¾æœ€åçš„æƒ…å†µã€‚ä½ å¿…é¡»å‡è®¾åˆæˆå™¨å¯ä»¥åœ¨é¡µé¢ä¸Šçš„ä»»ä½•åœ°æ–¹è¿›è¡Œï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¸ºé¡µé¢ä¸Šçš„è®¸å¤šä¸œè¥¿åˆ›å»ºå›¾åƒç¼“å†²åŒºï¼Œè¿™æ˜¯æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„è€å·¢çˆ†ç‚¸é—®é¢˜ï¼Œå¯¼è‡´äº†çœŸæ­£çš„æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Q3I1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç»˜åˆ¶ä»£ç ç˜¦èº«é¡¹ç›®æ”¹å˜äº†æˆ‘ä»¬æ•´ä¸ªæ¶æ„ä¸­çš„è¿™ä¸¤ä¸ªé—®é¢˜ã€‚å®ƒæ”¹å˜äº†æˆ‘ä»¬å¦‚ä½•é€‰æ‹©åˆæˆäº‹ç‰©çš„ç²’åº¦ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åˆæˆï¼Œå°†ä»»ä½•æ•ˆæœè½¬æ¢æˆå›¾åƒç¼“å†²åŒºï¼Œç¬¬äºŒæ˜¯æˆ‘ä»¬å°†åˆæˆè®¾ç½®ç§»åŠ¨åˆ°ç»˜åˆ¶åã€‚è¿™ä¸ä»…å¯ä»¥è§£å†³åŸºç¡€æ€§åˆæˆ Bugï¼Œä¹Ÿé¿å…äº†é€»è¾‘é‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ–°çš„åˆæˆæ¶æ„å¯ä»¥åœ¨ä»»ä½•è¾¹ç•Œè¿›è¡Œåˆæˆï¼Œæˆ‘ä»¬å·²ç»ç§»åŠ¨äº†åˆæˆè®¾ç½®åº”ç”¨ç¨‹åºï¼Œä»¥é‡Šæ”¾ä¸»çº¿ç¨‹çš„å‹åŠ›ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¯¹é‡å çš„äº‹ç‰©åšå‡ºç²¾ç¡®çš„åˆæˆå†³å®šï¼Œå¯ä»¥åšä¸€äº›æ”¹å˜ä¸»çº¿ç¨‹å¤–ç»˜åˆ¶å¯¹è±¡å¤§å°çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªé¡¹ç›®çš„é‡Œç¨‹ç¢‘ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å…³äºç»˜åˆ¶ç¼“å­˜çš„åŠŸèƒ½ï¼Œç›®å‰å¤„äº M67ï¼Œåˆšåˆšå‘å¸ƒäº†ç»˜åˆ¶ä»£ç ç˜¦èº«çš„ V1.75 ç‰ˆæœ¬ã€‚åœ¨ä»Šå¹´ï¼ˆ2018ï¼‰å¹´åº•ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ V2 ç‰ˆæœ¬ï¼Œå°†åˆæˆè®¾ç½®ç§»åŠ¨åˆ°ç»˜åˆ¶åè¿›è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-å¸ƒå±€æ’ç‰ˆ&quot;&gt;&lt;a href=&quot;#3-å¸ƒå±€æ’ç‰ˆ&quot; class=&quot;headerlink&quot; title=&quot;3. å¸ƒå±€æ’ç‰ˆ&quot;&gt;&lt;/a&gt;3. å¸ƒå±€æ’ç‰ˆ&lt;/h3&gt;&lt;p&gt;å¸ƒå±€æœ‰ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯ web å¹³å°é—®é¢˜ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º&lt;strong&gt;ç»„åˆé—®é¢˜&lt;/strong&gt;(&lt;code&gt;The Combinatorial Problem&lt;/code&gt;)ã€‚æˆ‘ä»¬æœ‰å¤§é‡çš„ web æ ‡å‡†ï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­æ·»åŠ æ›´å¤šæ–°çš„æ ‡å‡†ï¼ŒåŒæ—¶æ—§çš„æ ‡å‡†ä¹Ÿä¾ç„¶å­˜åœ¨ï¼Œæ¯æ¬¡æˆ‘ä»¬å®šä¹‰æ–°çš„ CSS æ ‡å‡†æ—¶ï¼Œå®ƒéƒ½ä¼šåˆ›å»ºä¸€ç»„å¸¦æœ‰ä¸æ‰€æœ‰ç°æœ‰ CSS æ ‡å‡†çš„æ–°äº¤äº’ã€‚å®ƒä»¬ç»“åˆçš„æ–¹å¼æœ‰ä¸€ç‚¹å¥‡æ€ªï¼Œéšä¹‹è€Œæ¥æœ‰å¾ˆå¤šçš„è¾¹ç•Œ caseï¼Œè®©æˆ‘ä»¬ä»¥ &lt;code&gt;flexbox&lt;/code&gt; ä¸ºä¾‹çœ‹ä¸€çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3QJG6.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆç®€å•çš„ä¸‰ä¸ª flex item ç›’å­ï¼Œæˆ‘ä»¬æ·»åŠ å‡ ä¸ªå±æ€§çœ‹çœ‹å¸ƒå±€ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Qase.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½® &lt;code&gt;direction: rtl&lt;/code&gt; ä¼šä½¿å¾—å¸ƒå±€æ–¹å‘å˜ä¸ºä»å³å¾€å·¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Yufs.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€ä¸ª &lt;code&gt;flex-direction: row-reverse&lt;/code&gt;ï¼Œå¸ƒå±€æ–¹å‘åˆæ¢å¤ä¸ºä»å·¦å¾€å³äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Yl60.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æŠŠ &lt;code&gt;direction&lt;/code&gt; å±æ€§å»æ‰ï¼Œä»å³å¾€å·¦æ’å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3YG0U.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;flex-direction&lt;/code&gt; è®¾ç½®ä¸º &lt;code&gt;columb-reverse&lt;/code&gt;ï¼Œå¸ƒå±€æ”¹ä¸ºæŒ‰åˆ—æ’å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3YJ7F.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½® &lt;code&gt;writing-mode&lt;/code&gt; åŒæ—¶ &lt;code&gt;flex-direction&lt;/code&gt; æ”¹ä¸ºè¡Œæ’å¸ƒï¼Œä½¿å¾—æ–‡å­—æ–¹å‘ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Y06x.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;flex-direction&lt;/code&gt; æ”¹ä¸ºåå‘ï¼Œä¾ç„¶å¤åˆé¢„æœŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3YrnK.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;flex-direction&lt;/code&gt; æ”¹ä¸ºåˆ—ï¼Œä¹Ÿæ˜¯ä¸€æ ·ã€‚ä¸¾ä¾‹åˆ°è¿™é‡Œå°±è¶³å¤Ÿäº†ï¼Œä»¥ä¸Šä¹‹æ‰€ä»¥è¡¨ç°å¤åˆé¢„æœŸï¼Œæ˜¯å› ä¸ºæˆ‘èŠ±äº†ä¸‰å‘¨çš„æ—¶é—´è§£å†³å„ç§ Bugã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3YcAe.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å…¶å®ƒå†…æ ¸çš„æµè§ˆå™¨ä¸­å¯å°±ä¸ä¸€å®šäº†ï¼Œå¦‚ä¸Šå›¾ï¼Œç¬¬ä¸€ä¸ªå›¾æ˜¯ä»¥ä¸Š flexbox ç¤ºä¾‹åœ¨ chromium ä¸­çš„è¡¨ç°ï¼Œç¬¬ä¸€æ’ç¬¬äºŒä¸ªæµè§ˆå™¨è¡¨ç°ä¹Ÿå‡ ä¹ç›¸åŒï¼Œç„¶è€Œç¬¬ä¸‰ä¸ªç¬¬å››ä¸ªå¯å°±ç›¸å»ç”šè¿œã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ— æ„ diss å…¶å®ƒæµè§ˆå™¨ï¼Œæ¢ä¸ªåŠŸèƒ½ç¤ºä¾‹ï¼Œå¯èƒ½ chromium å°±æ˜¯è¡¨ç°æœ€å·®çš„é‚£ä¸€ä¸ªã€‚æˆ‘æ˜¯æƒ³å¼ºè°ƒè¿™ä¸ªå…¼å®¹æ€§é—®é¢˜ç¡®å®å­˜åœ¨ï¼Œå¤æ‚çš„ CSS ç‰¹æ€§ä¹Ÿåœ¨æŒç»­å †ç§¯ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ &lt;strong&gt;Blink ä¸­å¸ƒå±€ç›¸å…³çš„ä»£ç æ˜¯éå¸¸è¿œå¤çš„ï¼Œé‡Œé¢å……æ–¥ç€æ— å°è£…ï¼Œä¸å¯é‡å…¥ï¼Œéçº¿ç¨‹å®‰å…¨çš„é¢æ¡å¼å·¨çŸ³ä»£ç &lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆè§£é‡Šä¸€ä¸‹å·¨çŸ³ä»£ç ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª layout æ ‘ï¼ŒèŠ‚ç‚¹æ˜¯ layout å¯¹è±¡ï¼Œå‡è®¾æˆ‘ä»¬åœ¨æ ‘ä¸‹é¢çš„ä¸€ä¸ªå…ƒç´ ä¸Šæ”¹å˜ CSSã€‚å…ƒç´ ç°åœ¨å˜è„äº†ï¼Œéœ€è¦è½¬å‘å‡ºå»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„æ˜¯æ ‡è®°æ•´ä¸ªç¥–å…ˆé“¾ï¼Œå½“æˆ‘ä»¬æƒ³æ‰§è¡Œ layout é˜¶æ®µæ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä»æ ‘é¡¶å¼€å§‹ï¼Œä¸€ç›´å¾€ä¸‹èµ°ï¼Œç°åœ¨æˆ‘ä»¬è¿›è¡Œäº†ä¸€ç³»åˆ—ä¼˜åŒ–ï¼Œä½†æ˜¯ä¼˜åŒ–åçš„ä¹Ÿæ²¡æœ‰è·³è¿‡å¾ˆå¤šæ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Y2hd.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»ç„¶è¦è¿›è¡Œå®Œæ•´çš„æ ‘éå†ï¼Œè¿™ä¹Ÿæ˜¯è€—è´¹èµ„æºçš„ï¼Œæ¯æ¬¡æˆ‘ä»¬æ‰§è¡Œ layout éƒ½ä¼šè¿›è¡Œéå†ã€‚åº•éƒ¨èŠ‚ç‚¹å¯èƒ½ä½äºä¸€ä¸ªå°ºå¯¸å›ºå®šçš„ç›’å­é‡Œï¼Œå®ƒç”šè‡³å¯ä»¥ä½¿ç”¨ &lt;code&gt;CSS containment&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œæœ‰ç‚¹ç±»ä¼¼äºæµè§ˆå™¨çš„å¥‘çº¦ï¼Œæ„å‘³ç€è¿™ä¸ªå­æ ‘ä¸ä¼šå½±å“å®ƒè‡ªèº«ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ï¼Œå­æ ‘ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ä¹Ÿä¸ä¼šå½±å“å®ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3Yjcq.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœå¸ƒå±€è¿™æ£µå­æ ‘æ—¶æˆ‘ä»¬å·²ç»æœ‰äº†æ‰€æœ‰æˆ‘ä»¬æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œæ— éœ€åœ¨è¿™ä¸ªå­æ ‘ä¹‹å¤–å¯»æ‰¾ä»»ä½•é¢å¤–çš„ä¿¡æ¯æ¥ç¡®å®šå¤§å°å’Œä½ç½®å°±å¥½äº†ã€‚ç„¶è€Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è¿è¡Œå¸ƒå±€ä»£ç æ¥è·å–å…¶ä»–ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3tpHU.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¤„äºå›¾ä¸­è¿™ä¸ªèŠ‚ç‚¹ä¸­ï¼Œå¦‚æœå‡ºäºæŸç§åŸå› æˆ‘ä»¬å¯ä»¥è·³åˆ°æ ‘çš„å¦ä¸€éƒ¨åˆ†å—ï¼Ÿä¸å¯ä»¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯ç­æ€§æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºçº¿ç¨‹å®‰å…¨ï¼Œè¿˜è®°å¾—æœ€å¼€å§‹æˆ‘ä»¬äº†è§£çš„æ¸²æŸ“æµæ°´çº¿å§ï¼Ÿæˆ‘ä»¬éå† layout æ ‘ï¼Œè¿˜å¯¹å®ƒè¿›è¡Œæ ‡æ³¨ï¼Œç„¶åä¼ é€’ç»™ç»˜åˆ¶é˜¶æ®µã€‚å½“æˆ‘ä»¬å®Œæˆæ‰€æœ‰ä»»åŠ¡å‡†å¤‡ç”Ÿæˆä¸‹ä¸€å¸§å†…å®¹æ—¶ï¼Œä¼šä»ä¸Šæ¬¡ä½¿ç”¨çš„ layout æ ‘å¼€å§‹ï¼Œæ ¹æ®å·²æ”¹å˜çš„å†…å®¹æ¥æ›´æ–°å®ƒã€‚è¿™é‡Œæ˜¯æ²¡æœ‰ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯èƒ½æœ‰å¤šä¸ªçº¿ç¨‹ä¿®æ”¹å®ƒã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼Œç›¸åº”æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆã€‚é’ˆå¯¹&lt;strong&gt;ç»„åˆé—®é¢˜&lt;/strong&gt;ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ CSS å®šåˆ¶å¸ƒå±€å³ &lt;a href=&quot;https://developers.google.com/web/updates/2016/05/houdini&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Houdini&lt;/a&gt;ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨å…ƒç´ ä¸Šè®¾ç½®ç‰¹å®šçš„ CSS å±æ€§ï¼Œç„¶åå®šä¹‰ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œè¯¥å‡½æ•°è´Ÿè´£å¸ƒå±€è¯¥å…ƒç´ åŠå­æ ‘ã€‚åœ¨å¸¸è§„å¸ƒå±€è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šæš‚åœç„¶åå»è°ƒç”¨ JavaScript å‡½æ•°ï¼Œä¼ ç»™å®ƒä¸€ç»„å¸ƒå±€å…ƒç´ æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œå‡½æ•°å°†æ¶ˆè´¹å®ƒã€‚è¿™é‡Œä¸ä¼šè®²å¤ªå¤š &lt;code&gt;Houdini&lt;/code&gt; çš„ç»†èŠ‚ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹ç¬¬äºŒä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯ &lt;code&gt;Layout NG&lt;/code&gt;ï¼Œè¿™å®é™…ä¸Šæ˜¯å¯¹å¦‚ä½•å®Œæˆå¸ƒå±€çš„å…¨ç›˜åæ€ã€‚&lt;code&gt;Layout NG&lt;/code&gt; æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œä¸€æ˜¯å®ƒä½¿ç”¨çº¦æŸé©±åŠ¨çš„å¸ƒå±€ï¼Œè¾“å…¥ä¸€ä¸ªå­æ ‘æ¥è¿›è¡Œå¸ƒå±€ï¼Œæˆ‘ä»¬ä¼ é€’ç»™å®ƒæ‰€æœ‰å®ƒæ‰€éœ€è¦çš„åœ¨å­æ ‘ä¸­è¿›è¡Œå¸ƒå±€çš„ä¿¡æ¯ï¼Œè€Œä¸”å®ƒæ ¹æœ¬ä¸çœ‹å­æ ‘çš„å¤–é¢ã€‚å®ç°è¿™ä¸€ç‚¹ä¹Ÿå¹¶ä¸å®¹æ˜“ï¼Œé€šè¿‡åœ¨ä¸­å¼ºåˆ¶å°è£…ï¼Œæˆ‘ä»¬è®©åº•å±‚å¸ƒå±€ä»£ç æ›´å®¹æ˜“å®ç°åˆšæ‰æåˆ°çš„ CSS å®šåˆ¶å¸ƒå±€ã€‚ç¬¬äºŒä¸ªç‰¹æ€§æ˜¯ï¼Œè¾“å…¥ï¼ˆlayout æ ‘ï¼‰ä¸è¾“å‡ºï¼ˆfragment æ ‘ï¼‰çš„æ ‘éƒ½æ˜¯&lt;strong&gt;ä¸å¯å˜å¯¹è±¡&lt;/strong&gt;ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¸ƒå±€æ ‘ï¼Œä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†å®ƒï¼Œè¯¥æ ‘å°±ä¸å¯å˜äº†ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨è¿™ä¸ªè¾“å…¥æ ‘ä¸Šè¿›è¡Œæ³¨é‡Šï¼Œè€Œæ˜¯å¤åˆ¶å®ƒï¼Œå¹¶ç”¨æ–°çš„æ›¿æ¢å­æ ‘æ¥æ”¹å˜å­æ ‘ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰å¸ƒå±€æ ‘çš„å…¨æ–°å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªç‰¹æ€§çš„å®ç°å°†ä½¿å¾—å¸ƒå±€æ–¹é¢çš„å„ç§å¼ºåŠ›ä¼˜åŒ–æˆä¸ºå¯èƒ½ã€‚è¿™ä¸€é¡¹ç›®å°šå±æ—©æœŸï¼Œç¬¬ä¸€é˜¶æ®µé¢„è®¡åœ¨ä»Šå¹´å¹´åº•ã€æ˜å¹´å¹´åˆå‘å¸ƒã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V3uJG8.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ç³»æ˜é‡‘å§”æ‰˜ç¿»è¯‘æ•´ç†çš„ BlinkOn9 ä¼šè®®æ¼”è®²å†…å®¹&lt;br&gt;æ¼”è®²èµ„æ–™ &lt;a href=&quot;https://www.youtube.com/watch?v=ExNYN_phaxI&quot;&gt;è§†é¢‘&lt;/a&gt;/ &lt;a href=&quot;https://docs.google.com/presentation/d/1Iko1oIYb-VHwOOFU3rBPUcOO_9lAd3NutYluATgzV_0/edit#slide=id.g36f1b50c08_0_3702&quot;&gt;PPT&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ &lt;code&gt;BlinkOn9&lt;/code&gt; ä¼šè®®ä¸­ï¼ŒGoogle Blink å›¢é˜Ÿå¼€å‘è€… Philip Rogers ä¸ Stefan Zager è¿›è¡Œäº†&lt;a href=&quot;https://www.youtube.com/watch?v=ExNYN_phaxI&quot;&gt;ã€ŠBlink Rendering - Rebuilding the Engine Mid-Flightã€‹åˆ†äº«&lt;/a&gt;ï¼Œæ—¨åœ¨ä»‹ç» Blink æ¸²æŸ“çš„åŸºæœ¬åŸç†ä¸å¼€å‘å›¢é˜Ÿè¿‘æœŸå¯¹æ»šåŠ¨æ€§èƒ½ã€ç»˜åˆ¶åˆæˆä¸æ’ç‰ˆçš„æ”¹è¿›ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="render chrome" scheme="https://blog.colafornia.me/categories/render-chrome/"/>
    
    
  </entry>
  
  <entry>
    <title>ç”Ÿå‘½åœ¨äºæŠ˜è…¾ï¼Œå†™ä¸€ä¸ªå‰ç«¯èµ„è®¯æ¨é€æœåŠ¡</title>
    <link href="https://blog.colafornia.me/post/2018/the-beginning-of-little-robot/"/>
    <id>https://blog.colafornia.me/post/2018/the-beginning-of-little-robot/</id>
    <published>2018-09-11T04:39:00.000Z</published>
    <updated>2019-10-24T03:04:03.719Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wi2d.jpg&quot; width=&quot;600&quot;&gt;&lt;/p&gt;
&lt;p&gt;å»å¹´å¹´åº•å¼€å§‹å†™çš„ä¸€ä¸ªå°é¡¹ç›®ï¼Œæ–­æ–­ç»­ç»­åšäº†äº›ä¼˜åŒ–ï¼Œåœ¨æ­¤ç®€å•çš„è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;æºå¤´&quot;&gt;&lt;a href=&quot;#æºå¤´&quot; class=&quot;headerlink&quot; title=&quot;æºå¤´&quot;&gt;&lt;/a&gt;æºå¤´&lt;/h2&gt;&lt;p&gt;èµ·æºæ˜¯ä¹‹å‰ä¸€ç›´æ²¡ä»€ä¹ˆæœºä¼šæ¥è§¦åˆ° Node é¡¹ç›®ï¼Œå·¥ä½œä¸­æ¥è§¦åˆ°çš„ä¹Ÿä»…é™äºç”¨ Node å†™è„šæœ¬ï¼Œåšä¸€äº›å°å·¥å…·ï¼Œä¸æœåŠ¡å™¨ä¸Šè·‘çš„ Node æœåŠ¡ç›¸å·®ç”šè¿œã€‚æ‰€ä»¥æƒ³å†™ä¸€ä¸ªåœ¨æœåŠ¡å™¨ä¸Šè·‘çš„ Node å°é¡¹ç›®ç»ƒæ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç›´å–œæ¬¢ç”¨ RSS è®¢é˜…èµ„è®¯è¿™ç§æ–¹å¼ï¼Œç®€å•é«˜æ•ˆï¼Œä¸å…¶æ¯å¤©ä¸å®šæ—¶åœ°æ¥æ”¶æ¨é€ï¼Œæ‰“å¼€å„ç½‘ç«™ App æ¥æ¥æ”¶èµ„è®¯ï¼Œä¸å¦‚è‡ªå·±æ‹¿åˆ°ä¸»åŠ¨æƒé›†ä¸­åœ¨åŒä¸€æ—¶é—´æ®µç»Ÿä¸€é˜…è¯»ã€‚è¿™æ ·é¿å…äº†æ¯å¤©ä¸å®šæ—¶æ¥å—ä¿¡æ¯çš„ç„¦è™‘å †ç§¯ï¼Œä½†æ˜¯åˆå¸¸å¸¸æƒ³ä¸èµ·æ¥æ‰“å¼€ğŸ˜…ï¼Œè¿‡äº†ä¸€å‘¨æ‰“å¼€ Reederï¼Œå‘ç°ç´¯ç§¯çš„æœªè¯»èµ„è®¯åˆçˆ†ç‚¸äº†ï¼ŒäººçœŸæ˜¯å¾ˆéš¾æ»¡è¶³ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯å†³å®šè‡ªå·±æä¸ªèµ„è®¯æ¨é€æœåŠ¡å§ï¼Œæ»¡è¶³è‡ªå·±çš„æ ¸å¿ƒè¯‰æ±‚ï¼Œ&lt;strong&gt;æ¯ä¸ªå·¥ä½œæ—¥æ—©ä¸Š 10 ç‚¹å¾®ä¿¡æ¨é€ RSS å‰ç«¯èµ„è®¯çš„æ›´æ–°&lt;/strong&gt;ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ¯å¤©æŠµè¾¾å·¥ä½çš„æ—¶å€™èˆ’èˆ’æœæœæµè§ˆä¸€ä¸‹æ–°é²œäº‹ï¼ŒæŒ‘ä¸€äº›æœ‰ç”¨çš„å­˜èµ·æ¥æ…¢æ…¢ç ”è¯»ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®ä»“åº“ï¼š &lt;a href=&quot;https://github.com/Colafornia/little-robot&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Colafornia/little-robot&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¨é€å¤§æ¦‚é•¿è¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wi2d.jpg&quot; width=&quot;600&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ¨é€æºä¸»è¦æ˜¯å„å‚çš„çŸ¥ä¹ä¸“æ ï¼Œå¤§ä½¬ä»¬çš„ä¸ªäººåšå®¢ï¼Œæ˜é‡‘å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œéƒ½æ˜¯æˆ‘è‡ªå·±çš„ä¸ªäººå£å‘³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ¥è®²ä¸€ä¸‹å¼€å‘ï¼ˆä¸è‡ªå·±ç»™è‡ªå·±åŠ éœ€æ±‚ï¼‰å†ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¼€å§‹&quot;&gt;&lt;a href=&quot;#å¼€å§‹&quot; class=&quot;headerlink&quot; title=&quot;å¼€å§‹&quot;&gt;&lt;/a&gt;å¼€å§‹&lt;/h2&gt;&lt;p&gt;æœ€å¼€å§‹æ„Ÿè§‰è¿™ä¸ªéœ€æ±‚æ˜¯å¾ˆç®€å•çš„ï¼Œå…·ä½“æ“ä½œå¯ä»¥åˆ†è§£ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ŒæŠŠæˆ‘æƒ³æŠ“å–çš„ RSS æºåœ°å€å†™åœ¨é‡Œé¢&lt;/li&gt;
&lt;li&gt;æ‰¾ä¸€ä¸ªèƒ½è§£æ RSS çš„ npm åŒ…ï¼Œéå†é…ç½®æ–‡ä»¶é‡Œçš„æºï¼Œè§£æä¹‹åå¤„ç†æ•°æ®&lt;/li&gt;
&lt;li&gt;ä»…ç­›å‡ºåœ¨è¿‡å» 24 å°æ—¶å†…æ›´æ–°çš„æ–‡ç« ï¼ŒæŠŠæ•°æ®å¤„ç†ä¸€ä¸‹ï¼Œæ±‡æ€»æˆä¸€æ®µå­—ç¬¦ä¸²ï¼Œç”¨å¾®ä¿¡æ¨é€&lt;/li&gt;
&lt;li&gt;ä»¥ä¸Šå†™å‡ºçš„è„šæœ¬é€šè¿‡å®šæ—¶ä»»åŠ¡è·‘èµ·æ¥ï¼Œdoneï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ€åé€‰æ‹©äº† &lt;a href=&quot;https://github.com/bobby-brennan/rss-parser&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rss-parser&lt;/a&gt; ä½œä¸ºè§£æå·¥å…·åŒ…ï¼Œ&lt;a href=&quot;https://pushbear.ftqq.com/admin/#/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PushBear&lt;/a&gt; ä½œä¸ºæ¨é€æœåŠ¡ï¼Œ&lt;a href=&quot;https://github.com/node-schedule/node-schedule&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;node-schedule&lt;/a&gt; ä»»åŠ¡è°ƒåº¦å·¥å…·å†™å‡ºæ¥äº†ä¸€ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå°±å‘ç°è‡ªå·±çŸ¥è¯†çš„åŒ®ä¹äº†ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°è„šæœ¬éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ—¶ï¼Œè¿›ç¨‹å®ˆæŠ¤çš„é—®é¢˜ï¼Œäºæ˜¯ç ”ä¹ äº†ä¸€æ³¢ &lt;a href=&quot;https://github.com/Unitech/pm2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pm2&lt;/a&gt;ï¼Œå®Œç¾å®Œæˆä»»åŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿‡æ¸¡&quot;&gt;&lt;a href=&quot;#è¿‡æ¸¡&quot; class=&quot;headerlink&quot; title=&quot;è¿‡æ¸¡&quot;&gt;&lt;/a&gt;è¿‡æ¸¡&lt;/h2&gt;&lt;p&gt;é¡¹ç›®å†™åˆ°è¿™é‡Œå…¶å®æ˜¯å¯ä»¥å‡‘å’Œç”¨äº†ï¼Œä½†æ˜¯çœ‹èµ·æ¥å¾ˆ low å¾ˆéš¾å—ã€‚ä¸»è¦é—®é¢˜æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å½“æ—¶ RSS æºå¤§æ¦‚æœ‰å››äº”åä¸ªï¼Œä¸€æ¬¡æ€§éå†è§£ææ‰€æœ‰çš„æºç»å¸¸ä¼šæœ‰è¶…æ—¶æˆ–è€…å‡ºé”™çš„&lt;/li&gt;
&lt;li&gt;RSS æºå†™åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œæ¯æ¬¡æƒ³æ·»åŠ ã€ä¿®æ”¹æºéƒ½éœ€è¦æ”¹ä»£ç ï¼Œå¾ˆ low&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://pushbear.ftqq.com/admin/#/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PushBear&lt;/a&gt; è¿™ä¸ªæ¨é€æœåŠ¡åªèƒ½å­˜å‚¨ä¸‰å¤©å†…çš„æ¨é€ï¼Œä¸‰å¤©å‰ï¼Œä¸€å‘¨å‰çš„æ¨é€å†…å®¹éƒ½çœ‹ä¸äº†ï¼Œè¿™ä¹Ÿå¾ˆéš¾å—&lt;/li&gt;
&lt;li&gt;æ˜é‡‘çš„ RSS æºå†…å®¹ä¸å¤šï¼Œä¹Ÿä¸æ˜¯æŒ‰ç…§çƒ­é—¨ç¨‹åº¦æ’åºçš„ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘å§¿åŠ¿ä¸å¯¹ğŸ˜…ï¼‰ï¼Œä¸å¤ªç¬¦åˆè¦æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬ä¸€ç‚¹ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œå¯èƒ½ç°åœ¨è§£å†³çš„æ–¹æ¡ˆä¾ç„¶å¾ˆåŸå§‹ã€‚å‡ºç°ç¬¬ä¸€ä¸ªé—®é¢˜ä¸€æ˜¯éœ€è¦æ§åˆ¶è¯·æ±‚çš„å¹¶å‘æ•°é‡ï¼ŒäºŒæ˜¯ RSS æºæœ¬èº«æœ‰ä¸€å®šçš„ä¸ç¨³å®šæ€§ã€‚ç›®å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŠŠæŠ“å–ä»»åŠ¡å’Œæ¨é€ä»»åŠ¡åˆ†å¼€ï¼Œé¢„ç•™å‡ºå¯ä»¥å¾ªç¯æŠ“å–ä¸‰æ¬¡çš„æ—¶é—´ï¼Œåé¢ä¸¤æ¬¡åªæŠ“å–ä¹‹å‰å¤±è´¥çš„æº&lt;/li&gt;
&lt;li&gt;ç”¨ &lt;a href=&quot;https://github.com/caolan/async&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;async&lt;/a&gt; çš„ &lt;code&gt;mapLimit&lt;/code&gt; å’Œ &lt;code&gt;timeout&lt;/code&gt; æ–¹æ³•è®¾ç½®æœ€å¤§å¹¶å‘æ•°é‡å’Œè¶…æ—¶æ—¶é—´&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¤§è‡´ä»£ç å¦‚ä¸‹ï¼ˆæœ‰ä¸€äº›ç»†èŠ‚å¤„ç†æ²¡è´´ä¸Šæ¥ï¼‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æŠ“å–å®šæ—¶å™¨ ID&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; fetchInterval = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æŠ“å–æ¬¡æ•°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; fetchTimes = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setPushSchedule&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    schedule.scheduleJob(&lt;span class=&quot;string&quot;&gt;&#39;00 30 09 * * *&#39;&lt;/span&gt;, () =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æŠ“å–ä»»åŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        log.info(&lt;span class=&quot;string&quot;&gt;&#39;rss schedule fetching fire at &#39;&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        activateFetchTask();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    schedule.scheduleJob(&lt;span class=&quot;string&quot;&gt;&#39;00 00 10 * * *&#39;&lt;/span&gt;, () =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// å‘é€ä»»åŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        log.info(&lt;span class=&quot;string&quot;&gt;&#39;rss schedule delivery fire at &#39;&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; message = makeUpMessage();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        log.info(message);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        sendToWeChat(message);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;activateFetchTask&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  fetchInterval = setInterval(fetchRSSUpdate, &lt;span class=&quot;number&quot;&gt;120000&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  fetchRSSUpdate();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;fetchRSSUpdate&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    fetchTimes++;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (toFetchList.length &amp;amp;&amp;amp; fetchTimes &amp;lt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// è‹¥æŠ“å–æ¬¡æ•°å°‘äºä¸‰æ¬¡ï¼Œä¸”ä»å­˜åœ¨æœªæˆåŠŸæŠ“å–çš„æº&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        log.info(&lt;span class=&quot;string&quot;&gt;`ç¬¬&lt;span class=&quot;subst&quot;&gt;$&amp;#123;fetchTimes&amp;#125;&lt;/span&gt;æ¬¡æŠ“å–ï¼Œæœ‰ &lt;span class=&quot;subst&quot;&gt;$&amp;#123;toFetchList.length&amp;#125;&lt;/span&gt; ç¯‡`&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æœ€å¤§å¹¶å‘æ•°ä¸º15ï¼Œè¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 8000ms&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mapLimit(toFetchList, &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;, (source, callback) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            timeout(parseRSS(source, callback), &lt;span class=&quot;number&quot;&gt;8000&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    log.info(&lt;span class=&quot;string&quot;&gt;&#39;fetching is done&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    clearInterval(fetchInterval);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; fetchDataCb();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·åŸºæœ¬è§£å†³äº† 90% ä»¥ä¸Šçš„æŠ“å–é—®é¢˜ï¼Œä¿è¯äº†è„šæœ¬çš„ç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹ RSS æºå†™åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œæ¯æ¬¡æƒ³æ·»åŠ ã€ä¿®æ”¹æºéƒ½éœ€è¦æ”¹ä»£ç çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼ŒæŠŠæºé…ç½®å†™åˆ° MongoDB é‡Œä¹Ÿå°±å¥½äº†ï¼Œæœ‰ä¸€äº› GUI è½¯ä»¶å¯ä»¥ç›´æ¥åœ¨å›¾å½¢ç•Œé¢æ¥æ·»åŠ ã€ä¿®æ”¹æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³æ¨é€æœåŠ¡åªèƒ½å­˜å‚¨ä¸‰å¤©å†…çš„æ¨é€ï¼Œå†³å®šæ–°å¢ä¸€ä¸ªæ¯å‘¨äº”çš„å‘¨æŠ“å–ä»»åŠ¡ï¼ŒæŠ“å–ä¸€å‘¨å†…çš„æ–°æ–‡ç« ï¼ŒæŠŠå†…å®¹ä½œä¸º issue å‘åˆ°ä»“åº“ã€‚ä¹Ÿè¿˜ç®—æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wVqP.jpg&quot; width=&quot;480&quot;&gt;&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹æ˜é‡‘çš„ RSS æºé—®é¢˜ï¼Œæœ€åå†³å®šç›´æ¥è°ƒç”¨æ˜é‡‘çš„æ¥å£æ¥å–æ•°æ®ï¼Œè¿™å°±å¯ä»¥éšå¿ƒæ‰€æ¬²æŒ‰è‡ªå·±çš„éœ€æ±‚æ¥äº†ï¼Œæ¯å¤©åªæŠ“å–â¤ï¸ç‚¹èµæ•°åœ¨ 70 ä»¥ä¸Šçš„æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;é¡ºä¾¿ç»™æŠ“å–çš„æ–‡ç« æ—¶é—´èŒƒå›´åŠ äº†ä¸€ä¸ªåç§»å€¼ï¼Œé¿å…ç­›æ‰è´¨é‡å¥½ä½†æ˜¯ç”±äºåˆšåˆšå‘å¸ƒç‚¹èµè¾ƒå°‘çš„æ–‡ç« ã€‚æ„Ÿè§‰è‡ªå·±æ£’æ£’å“’~&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;filterArticlesByDateAndCollection&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; threshold = &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// articles æ˜¯å·²æŒ‰â¤ï¸æ•°ç”±é«˜åˆ°ä½æ’åºçš„æ–‡ç« åˆ—è¡¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; results = articles.filter((article) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// åç§»å€¼äº”å°æ—¶ï¼Œé¿å…ç­›æ‰è´¨é‡å¥½ä½†æ˜¯ç”±äºåˆšåˆšå‘å¸ƒç‚¹èµè¾ƒå°‘çš„æ–‡ç« &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; moment(article.createdAt).isAfter(moment(startTime).subtract(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;hours&#39;&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;amp;&amp;amp; moment(article.createdAt).isBefore(moment(endTime).subtract(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;hours&#39;&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;amp;&amp;amp; article.collectionCount &amp;gt; threshold;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// æ˜é‡‘æ–‡ç« æœ€å¤šæ”¶å½• 8 ç¯‡ï¼Œé¿å…ä¿¡æ¯çˆ†ç‚¸&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; results.slice(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæœŸé—´ä¹Ÿå……åˆ†æ„Ÿå—åˆ°äº†æ—¥å¿—çš„é‡è¦æ€§ï¼Œåœ¨æ•°æ®åº“é‡Œæ–°å¢äº†ä¸€ä¸ªè¡¨ç”¨æ¥å­˜æ¯å¤©çš„æ¨é€å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–åœ¨ &lt;a href=&quot;https://pushbear.ftqq.com/admin/#/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PushBear&lt;/a&gt; ä¸Šæ–°æ·»åŠ äº†ä¸€ä¸ª Channel æ¥ç»™è‡ªå·±æ¨é€æ—¥å¿—ï¼Œæ¯å¤©åœ¨æŠ“å–ä»»åŠ¡å®Œæˆåï¼Œå…ˆç»™æˆ‘å‘é€ä¸€ä¸‹æŠ“å–åˆ°çš„å†…å®¹ï¼Œå¦‚æœå‘ç°æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ‘å¯ä»¥è‡ªå·±ç™»æœåŠ¡å™¨ç´§æ€¥ä¿®å¤ä¸€ä¸‹ï¼ˆè¿™ä¹ˆæƒ³æ¥è¿˜æ˜¯å¾ˆ low ğŸ˜…ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‡çº§&quot;&gt;&lt;a href=&quot;#å‡çº§&quot; class=&quot;headerlink&quot; title=&quot;å‡çº§&quot;&gt;&lt;/a&gt;å‡çº§&lt;/h2&gt;&lt;p&gt;åšå®Œä»¥ä¸Šæ”¹åŠ¨ä¹‹åï¼Œè„šæœ¬ç¨³å®šåœ°è·‘äº†å¿«åŠå¹´ï¼Œè¿™æœŸé—´æˆ‘ä¹Ÿä¸€ç›´åœ¨å¿™ç€æ¬ç –ï¼Œæ²¡ä»€ä¹ˆç²¾åŠ›å†æ¥æ”¹é€ å®ƒã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç›´æ²¡åšæ¨å¹¿ï¼Œä½†æŸå¤©çªç„¶å‘ç°å·²ç»æœ‰äº†ä¸‰åå¤šä¸ªç”¨æˆ·åœ¨è®¢é˜…è¿™ä¸ªæœåŠ¡ï¼Œäºæ˜¯è‰¯å¿ƒå‘ç°ï¼Œæœ¬ç€å¯¹ç”¨æˆ·è´Ÿè´£ï¼ˆä¹Ÿæ˜¯è‡ªå·±æœ‰äº†æ–°çš„æƒ³ç»ƒä¹ çš„æŠ€æœ¯ğŸ‘»ï¼‰,å°±åˆåšäº†ä¸€æ¬¡æ”¹é€ ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶é¡¹ç›®çš„é—®é¢˜æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ²¡æœ‰æ–‡ç« å»é‡ï¼Œå¦‚æœæ–‡ç« åœ¨çŸ¥ä¹ä¸“æ å‘äº†ï¼Œæ˜é‡‘ä¹Ÿå‘äº†ï¼Œä½œè€…ä¸ªäººåšå®¢ä¹Ÿå‘äº†çš„è¯ï¼Œå°±ç›¸å½“äºä¼šé‡å¤å‡ºç°å‡ æ¬¡&lt;/li&gt;
&lt;li&gt;æ¨é€çš„æ—¶é—´é—´éš”ä¸ç²¾ç¡®ï¼Œéƒ½æ˜¯å½“å‰æ—¶é—´çš„è¿‡å» 24 å°æ—¶æ¥ç­›çš„&lt;/li&gt;
&lt;li&gt;è„šæœ¬ç›´è¿æ•°æ®åº“è¿›è¡Œå­˜å–æ“ä½œä¹Ÿä¸å¤ªå¥½ï¼Œæ„Ÿè§‰è¿™ä¸ªå½¢å¼åšæˆ serverï¼Œå¯¹å¤–æš´éœ² api æ›´åˆç†ï¼ˆç­‰å“ªå¤©æƒ³å†™ä¸ª RSS é˜…è¯»å™¨ä¹Ÿå°±ç”¨ä¸Šäº†ï¼‰&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ä»£ç æœ‰æ›´æ–°ï¼Œä¾èµ–æœ‰æ›´æ–°ï¼Œéƒ½ ssh ä¸ŠæœåŠ¡å™¨ç„¶å &lt;code&gt;npm install&lt;/code&gt; æ„Ÿè§‰ä¹Ÿä¸å¤ªä¸“ä¸šï¼Œæœ‰æå‡ç©ºé—´ï¼ˆå…¶å®å°±æ˜¯æƒ³ç”¨ &lt;code&gt;docker&lt;/code&gt; äº†ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1ï¼Œ2 é—®é¢˜å¾ˆå¥½è§£å†³ï¼Œæ¯æ¬¡æŠ“å–ä¹‹å‰å…ˆæŸ¥ä¸€ä¸‹æ—¥å¿—ï¼Œä¸Šæ¬¡æ¨é€çš„å…·ä½“æ—¶é—´ã€‚æ¯æŠ“åˆ°æ–°æ–‡ç« æ—¶ï¼Œå†ä¸æœ€è¿‘ 7 å¤©æ—¥å¿—é‡Œçš„æ–‡ç« æ¯”å¯¹ä¸€ä¸‹ï¼Œé‡å¤çš„ä¸æ”¾åˆ°æŠ“å–ç»“æœä¸­ï¼Œä¹Ÿå°±è§£å†³äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé—®é¢˜ 3ï¼Œäºæ˜¯å†³å®šæ­å»º Koa Serverï¼Œå…ˆæŠŠä» MongoDB è¯»å–æ¨é€æºï¼Œå­˜å–æ¨é€æ—¥å¿—å˜æˆ apiã€‚&lt;/p&gt;
&lt;p&gt;ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œæ·»åŠ  &lt;code&gt;Model&lt;/code&gt; ä¸ &lt;code&gt;Controller&lt;/code&gt;ã€‚æŠŠ RSS æŠ“å–è„šæœ¬ä¸æ˜é‡‘çˆ¬è™«æ”¾åˆ° task æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wQ2j.jpg&quot; width=&quot;400&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ²¡ä»€ä¹ˆéš¾ç‚¹ï¼Œå°±å¯ä»¥è°ƒç”¨ api æ¥è·å– RSS æºäº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1w8rq.jpg&quot; width=&quot;500&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æƒ³åˆ°äº†ä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œ&lt;strong&gt;èº«ä»½éªŒè¯&lt;/strong&gt;ã€‚è‚¯å®šä¸èƒ½æŠŠæ‰€æœ‰ api éƒ½éšæ„æš´éœ²å‡ºå»ï¼Œè®©å¤–ç•Œå¯ä»¥ä»»æ„è°ƒç”¨ï¼Œè¿™ä¹Ÿå°±ç›¸å½“äºæŠŠæ•°æ®åº“éƒ½æš´éœ²å‡ºå»äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå†³å®šç”¨ &lt;code&gt;JSON Web Tokenï¼ˆç¼©å†™ JWTï¼‰&lt;/code&gt; ä½œä¸ºè®¤è¯æ–¹æ¡ˆï¼Œä¸»è¦åŸå› æ˜¯ JWT é€‚åˆä¸€æ¬¡æ€§ã€çŸ­æ—¶é—´çš„å‘½ä»¤è®¤è¯ï¼Œç›®å‰æˆ‘çš„æœåŠ¡ä»…é™äºæœåŠ¡å™¨ç«¯çš„ api è°ƒç”¨ï¼Œæ¯å¤©çš„ä½¿ç”¨æ—¶é—´ä¹Ÿä¸é•¿ï¼Œæ— éœ€ç­¾å‘æœ‰æ•ˆæœŸå¾ˆé•¿çš„ä»¤ç‰Œã€‚&lt;/p&gt;
&lt;p&gt;Koa æœ‰ä¸€ä¸ª &lt;a href=&quot;https://github.com/koajs/jwt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jwt&lt;/a&gt; çš„ä¸­é—´ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// index.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;app.use(jwtKoa(&amp;#123; secret: config.secretKey &amp;#125;).unless(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    path: [&lt;span class=&quot;regexp&quot;&gt;/^\/api\/source/&lt;/span&gt;, &lt;span class=&quot;regexp&quot;&gt;/^\/api\/login/&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;))&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŠ ä¸Šä¸­é—´ä»¶åï¼Œé™¤äº† &lt;code&gt;/api/source&lt;/code&gt; ä¸ &lt;code&gt;/api/login&lt;/code&gt; æ¥å£å°±éƒ½éœ€è¦ç»è¿‡ jwt è®¤è¯æ‰èƒ½è®¿é—®äº†ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤å†™äº†ä¸€ä¸ª &lt;code&gt;/api/login&lt;/code&gt; æ¥å£ï¼Œç”¨äºç­¾å‘ä»¤ç‰Œï¼Œæ‹¿åˆ°ä»¤ç‰Œä¹‹åï¼ŒæŠŠä»¤ç‰Œè®¾ç½®åˆ°è¯·æ±‚å¤´é‡Œå°±å¯ä»¥é€šè¿‡è®¤è¯äº†ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// api/base.js&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç”¨äºå°è£… axios&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// http request æ‹¦æˆªå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;axios&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; config = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;../config&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; Instance = axios.create(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    baseURL: &lt;span class=&quot;string&quot;&gt;`http://localhost:&lt;span class=&quot;subst&quot;&gt;$&amp;#123;config.port&amp;#125;&lt;/span&gt;/api`&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    timeout: &lt;span class=&quot;number&quot;&gt;3000&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    headers: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        post: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;application/json&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Instance.interceptors.request.use(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    (config) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// jwt éªŒè¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; token = config.token;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (token) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            config.headers[&lt;span class=&quot;string&quot;&gt;&#39;Authorization&#39;&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;`Bearer &lt;span class=&quot;subst&quot;&gt;$&amp;#123;token&amp;#125;&lt;/span&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; config;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    error =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;.reject(error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœè¯·æ±‚å¤´é‡Œæ²¡æœ‰æ­£ç¡®çš„ tokenï¼Œåˆ™ä¼šè¿”å› &lt;code&gt;Authentication Error&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºé—®é¢˜ 4ï¼Œç°åœ¨æœåŠ¡æ¯”è¾ƒç®€å•ï¼Œä¹Ÿåªåœ¨ä¸€ä¸ªæœºå™¨ä¸Šéƒ¨ç½²ï¼Œæ‰‹åŠ¨ç™»æœºå™¨ npm install é—®é¢˜è¿˜ä¸å¤§ï¼Œå¦‚æœæœºå™¨å¾ˆå¤šï¼Œä¾èµ–é¡¹ä¹Ÿå¤æ‚çš„è¯ï¼Œå¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œå…·ä½“å‚è§&lt;a href=&quot;https://zhuanlan.zhihu.com/p/39209596&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç§‘æ™®æ–‡ï¼šä¸ºä»€ä¹ˆä¸èƒ½åœ¨æœåŠ¡å™¨ä¸Š npm install ï¼Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯å†³å®šåŸºäº &lt;code&gt;Docker&lt;/code&gt; åšæ„å»ºéƒ¨ç½²ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight dockerfile&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; daocloud.io/node:&lt;span class=&quot;number&quot;&gt;8.4&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;-&lt;span class=&quot;keyword&quot;&gt;onbuild&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;COPY&lt;/span&gt; package*.json ./&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;RUN&lt;/span&gt; npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;RUN&lt;/span&gt; cnpm install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;RUN&lt;/span&gt; echo &quot;Asia/Shanghai&quot; &amp;gt; /etc/timezone&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;RUN&lt;/span&gt; dpkg-reconfigure -f noninteractive tzdata&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;COPY&lt;/span&gt; . .&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;EXPOSE&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3001&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;CMD [ &lt;span class=&quot;string&quot;&gt;&quot;npm&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;start&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;$value1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;$value2&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;$value3&quot;&lt;/span&gt;]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç”¨çš„æ¯”è¾ƒç®€å•ï¼Œä¸»è¦å°±æ˜¯è´Ÿè´£å®‰è£…ä¾èµ–ï¼Œå¯åŠ¨æœåŠ¡ã€‚éœ€è¦æ³¨æ„çš„ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å›½å†…æ‹‰å»å¤–ç½‘çš„é•œåƒå¾ˆæ…¢ï¼Œåƒ Node å®˜æ–¹çš„é•œåƒæˆ‘éƒ½æ‹‰äº†å¥½ä¹…éƒ½æ²¡æ‹‰ä¸‹æ¥ï¼Œè¿™æ ·çš„è¯æ¨èä½¿ç”¨å›½å†…çš„é•œåƒï¼Œæ¯”å¦‚æˆ‘ç”¨çš„ DaoCloudï¼Œè¿˜æœ‰é˜¿é‡Œäº‘é•œåƒç­‰ç­‰&lt;/li&gt;
&lt;li&gt;ç”±äºæ¨é€æœåŠ¡æ˜¯å¯¹æ—¶é—´æ•æ„Ÿçš„ï¼ŒåŸºç¡€é•œåƒçš„æ—¶åŒºå¹¶ä¸æ˜¯å›½å†…æ—¶åŒºï¼Œè¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç„¶åå» &lt;a href=&quot;https://dashboard.daocloud.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DaoCloud&lt;/a&gt; ç­‰æä¾›å…¬æœ‰äº‘æœåŠ¡çš„ç½‘ç«™æˆæƒè®¿é—® Github ä»“åº“ï¼Œè¿æ¥è‡ªå·±çš„ä¸»æœºï¼Œå°±å¯ä»¥å®ç°æŒç»­é›†æˆï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½²æˆ‘ä»¬çš„é•œåƒäº†ã€‚å…·ä½“æ­¥éª¤å¯å‚è€ƒ&lt;a href=&quot;https://zhuanlan.zhihu.com/p/37961402&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åŸºäº Docker æ‰“é€ å‰ç«¯æŒç»­é›†æˆå¼€å‘ç¯å¢ƒ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wwRJ.jpg&quot; alt=&quot;daocloud&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ¬¡ä¼˜åŒ–å¤§æ¦‚å°±åˆ°è¿™é‡Œäº†ã€‚æ¥ä¸‹æ¥è¦åšçš„å¯èƒ½æ˜¯æä¾›ä¸€ä¸ªæ¨é€å†å²æŸ¥çœ‹é¡µé¢ï¼Œä¼˜å…ˆçº§ä¸æ˜¯å¾ˆé«˜ï¼Œæœ‰æ—¶é—´å†åšå§ï¼ˆé¡ºä¾¿ç»ƒä¹ ä¸€ä¸‹ Nginxï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„å®ç°æ–¹æ¡ˆå¯èƒ½è¿˜æ˜¯æœ‰å¾ˆä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºå»ºè®®ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wi2d.jpg&quot; width=&quot;600&quot;&gt;&lt;/p&gt;
&lt;p&gt;å»å¹´å¹´åº•å¼€å§‹å†™çš„ä¸€ä¸ªå°é¡¹ç›®ï¼Œæ–­æ–­ç»­ç»­åšäº†äº›ä¼˜åŒ–ï¼Œåœ¨æ­¤ç®€å•çš„è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="open-source" scheme="https://blog.colafornia.me/categories/open-source/"/>
    
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦ç¼–ç </title>
    <link href="https://blog.colafornia.me/post/2018/character-encoding/"/>
    <id>https://blog.colafornia.me/post/2018/character-encoding/</id>
    <published>2018-09-03T06:20:00.000Z</published>
    <updated>2019-10-24T02:22:04.196Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://i.dailymail.co.uk/i/pix/2016/10/27/21/39C8A74600000578-3879480-The_touch_bar_can_display_emotions_in_messaging_apps_playback_co-a-5_1477598860842.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½œä¸ºç¼–ç¨‹çŸ¥è¯†åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œæœ‰å¿…è¦æ¶ˆåŒ–æ•´ç†è¾“å‡ºä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å­—ç¬¦ç¼–ç çš„å‡ ä¸ªé‡è¦åŸºç¡€æ¦‚å¿µï¼Œä» &lt;code&gt;ASCII&lt;/code&gt; åˆ° &lt;code&gt;Unicode&lt;/code&gt; å†åˆ° &lt;code&gt;Emoji&lt;/code&gt; ä¸ &lt;code&gt;JavaScript&lt;/code&gt; å­—ç¬¦å¤„ç†çš„ä¸€äº›å‘ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;åŸºç¡€æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºç¡€æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€æ¦‚å¿µ&quot;&gt;&lt;/a&gt;åŸºç¡€æ¦‚å¿µ&lt;/h3&gt;&lt;p&gt;ç”±äºè®¡ç®—æœºåªèƒ½å¤„ç†æ•°å­—ï¼Œå¦‚æœè¦å¤„ç†æ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆæŠŠæ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—ã€‚è®¡ç®—æœºä¸­ï¼Œ&lt;code&gt;å­—èŠ‚ï¼ˆbyteï¼‰&lt;/code&gt; æ˜¯ä¸€ä¸ª &lt;code&gt;8bit&lt;/code&gt; çš„å‚¨å­˜å•å…ƒï¼Œä¸€ä¸ªå­—èŠ‚èƒ½è¡¨ç¤ºçš„æœ€å¤§çš„æ•´æ•°å°±æ˜¯ 255ï¼ˆäºŒè¿›åˆ¶çš„11111111 = åè¿›åˆ¶255ï¼‰ï¼Œå¦‚æœè¦è¡¨ç¤ºæ›´å¤§çš„æ•´æ•°ï¼Œå°±å¿…é¡»ç”¨æ›´å¤šçš„å­—èŠ‚ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å­—ç¬¦é›†&quot;&gt;&lt;a href=&quot;#å­—ç¬¦é›†&quot; class=&quot;headerlink&quot; title=&quot;å­—ç¬¦é›†&quot;&gt;&lt;/a&gt;å­—ç¬¦é›†&lt;/h4&gt;&lt;p&gt;å­—ç¬¦æ˜¯æ–‡å­—ä¸ç¬¦å·çš„æ€»ç§°ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¿¡æ¯å•ä½ã€‚å­—ç¬¦é›†å°±æ˜¯å­—ç¬¦çš„é›†åˆã€‚&lt;code&gt;ASCIIç &lt;/code&gt;ï¼ˆAmerican Standard Code for Information Interchangeï¼‰å°±æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œè¿™ä¸ªé›†åˆä¸­åªæœ‰æ•°å­—ï¼Œè‹±æ–‡å­—æ¯å’Œä¸€äº›ç¬¦å·å…± 127 ä¸ªå­—ç¬¦ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡æ–‡æœ¬ï¼Œä»…é€šè¿‡ &lt;code&gt;ASCIIç &lt;/code&gt; å°±åšä¸åˆ°äº†ã€‚åœ¨å†å²ä¸­ç”±äºçœ¼å…‰çš„å±€é™æ€§ï¼Œå‡ºç°äº†ä¸€äº›ä»…èƒ½å¤„ç†éƒ¨åˆ†å­—ç¬¦çš„å­—ç¬¦é›†ï¼Œæ— æ³•é€šç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/09/03/5b8d2209e4247.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;å­—ç¬¦ç¼–ç &quot;&gt;&lt;a href=&quot;#å­—ç¬¦ç¼–ç &quot; class=&quot;headerlink&quot; title=&quot;å­—ç¬¦ç¼–ç &quot;&gt;&lt;/a&gt;å­—ç¬¦ç¼–ç &lt;/h4&gt;&lt;p&gt;å­—ç¬¦ç¼–ç è§„å®šäº†å­—ç¬¦é›†å’Œå®é™…å­˜å‚¨çš„äºŒè¿›åˆ¶æ•°å€¼ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªå­—ç¬¦é›†éƒ½æœ‰å…¶å¯¹åº”çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼ˆæœ‰çš„å­—ç¬¦é›†æœ‰ä¸€ä¸ªå¯¹åº”å­—ç¬¦ç¼–ç ï¼Œæœ‰çš„åˆ™æœ‰å¤šä¸ªï¼‰ã€‚åƒ &lt;code&gt;ASCII&lt;/code&gt; ä¸ &lt;code&gt;GB18030&lt;/code&gt; éƒ½ä»…æœ‰ä¸€ç§ç¼–ç å®ç°ï¼Œå› æ­¤æ—¢å¯ä»¥ä½œä¸ºå­—ç¬¦é›†çš„åå­—ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æŒ‡ä»£å®ƒä»¬çš„å­—ç¬¦ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šæ¦‚å¿µçš„ä»‹ç»ä¸éš¾çª¥æ¢åœ¨å­—ç¬¦ç¼–ç çš„å†å²ä¸­å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å­—ç¬¦é›†ä¸å¤Ÿé€šç”¨ï¼Œæ€»æœ‰è¦†ç›–ä¸åˆ°çš„å­—ç¬¦&lt;/li&gt;
&lt;li&gt;æ–°çš„å­—ç¬¦é›†éš¾ä»¥å‘ä¸‹å…¼å®¹è€çš„&lt;/li&gt;
&lt;li&gt;è¦†ç›–æ›´å¤šå­—ç¬¦çš„å­—ç¬¦é›†ï¼Œéš¾ä»¥é¿å…éœ€è¦æ›´å¤šå­—èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡æœ¬ä»…é€šè¿‡ &lt;code&gt;ASCII&lt;/code&gt; å°±èƒ½å¤„ç†çš„è¯ï¼Œä½¿ç”¨å ç”¨å­—èŠ‚æ›´å¤šçš„å­—ç¬¦é›†åœ¨å‚¨å­˜å’Œä¼ è¾“éƒ½ä¸åˆ’ç®—&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™äº›é—®é¢˜éƒ½ç”± &lt;code&gt;Unicode&lt;/code&gt; åŠå…¶å­—ç¬¦ç¼–ç ä¸€èµ·æ‰“åŒ…è§£å†³äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Unicode&quot;&gt;&lt;a href=&quot;#Unicode&quot; class=&quot;headerlink&quot; title=&quot;Unicode&quot;&gt;&lt;/a&gt;Unicode&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Unicode&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Unicode&lt;/a&gt; æ˜¯ä¸€ä¸ª&lt;strong&gt;å­—ç¬¦é›†&lt;/strong&gt;ï¼Œæ—¨äºæ¶µç›–æ‰€æœ‰å›½å®¶è¯­è¨€ä¸­å¯èƒ½å‡ºç°çš„ç¬¦å·ä¸æ–‡å­—ï¼Œæ˜¯ç›®å‰ç»å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„å­—ç¬¦ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Unicode&lt;/code&gt;çš„è¯ç”Ÿä¹Ÿä¸æ˜¯ä¸€è¹´è€Œå°±ï¼Œä¹Ÿæœ‰å†å²è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å†å²è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#å†å²è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å†å²è¿›ç¨‹&quot;&gt;&lt;/a&gt;å†å²è¿›ç¨‹&lt;/h4&gt;&lt;p&gt;ï¼ˆè¿™æ®µä¸æ˜¯ç”¨æ¥å‡‘æ•°çš„ï¼Œè¿™å‡ ä¸ªè‹±æ–‡ç®€å†™åé¢è¿˜ä¼šä¸€ç›´å‡ºç°ï¼ŒçŸ¥é“äº†å†å²æ›´æ–¹ä¾¿è®°å¿†åˆ†è¾¨ï¼‰&lt;/p&gt;
&lt;p&gt;ISO ä¸ IEC åˆ†åˆ«æ¨å‡ºäº† &lt;code&gt;Unicode&lt;/code&gt; ä¸ &lt;code&gt;UCS&lt;/code&gt;ï¼ˆUniversal Multiple-Octet Coded Character Setï¼‰ ã€‚åæ¥ï¼ˆåªè¿‡äº†ä¸€å¹´ï¼‰ï¼Œä¸¤è€…è¿›è¡Œæ•´åˆï¼Œåˆ°äº† Unicode2.0 æ—¶ä»£ï¼ŒUnicode çš„ç¼–ç å’Œ UCS çš„ç¼–ç éƒ½å®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;USC&lt;/code&gt; è¿™ä¸ªåå­—ä¹Ÿå¹¶æœªä»æ­¤æ¶ˆå¤±åœ¨å†å²ä¸­ã€‚&lt;code&gt;UCS&lt;/code&gt; æ ‡å‡†æœ‰è‡ªå·±çš„æ ¼å¼ï¼Œå¦‚&lt;code&gt;UCS-2&lt;/code&gt;ï¼Œ&lt;code&gt;UCS-4&lt;/code&gt;ç­‰ç­‰ è€Œ Unicode ä¹Ÿæœ‰è‡ªå·±çš„ä¸åŒç¼–ç å®ç°ï¼Œå¦‚&lt;code&gt;UTF-8&lt;/code&gt;ï¼Œ&lt;code&gt;UTF-16&lt;/code&gt;ï¼Œ&lt;code&gt;UTF-32&lt;/code&gt;ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å…³äº-Unicode-è‡ªå·±&quot;&gt;&lt;a href=&quot;#å…³äº-Unicode-è‡ªå·±&quot; class=&quot;headerlink&quot; title=&quot;å…³äº Unicode è‡ªå·±&quot;&gt;&lt;/a&gt;å…³äº Unicode è‡ªå·±&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ç ç‚¹ code point&lt;/code&gt; æ˜¯æŒ‡åœ¨ Unicode å­—ç¬¦é›†ä¸­å­—ç¬¦çš„å€¼ï¼Œæ ¹æ® Unicode æ ‡å‡†ï¼Œæ˜¯å‰ç¼€ä¸º &lt;code&gt;U+&lt;/code&gt; çš„åå…­è¿›åˆ¶æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;Unicode å­—ç¬¦åˆ†ä¸º 17 ç»„å¹³é¢ï¼ˆplaneï¼‰ï¼Œæ¯ä¸ªå¹³é¢æ‹¥æœ‰ 2^16 (65,536) ä¸ªç ç‚¹ã€‚æ¯ä¸€ä¸ªç ç‚¹éƒ½å¯ä»¥ç”¨ 16 è¿›åˆ¶ xy0000 åˆ° xyFFFF æ¥è¡¨ç¤ºï¼Œè¿™é‡Œçš„ xy æ˜¯è¡¨ç¤ºä¸€ä¸ª 16 è¿›åˆ¶çš„å€¼ï¼Œä» 00 åˆ° 10ã€‚ç›®å‰æˆ‘ä»¬å¸¸ç”¨å­—ç¬¦å¤§å¤šéƒ½åœ¨ BMP åŸºæœ¬å¹³é¢ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/08/29/PXQfOA.png&quot; alt=&quot;plane&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;å­—èŠ‚åºä¸-BOM&quot;&gt;&lt;a href=&quot;#å­—èŠ‚åºä¸-BOM&quot; class=&quot;headerlink&quot; title=&quot;å­—èŠ‚åºä¸ BOM&quot;&gt;&lt;/a&gt;å­—èŠ‚åºä¸ BOM&lt;/h4&gt;&lt;p&gt;åœ¨äº†è§£ Unicode çš„å­—ç¬¦ç¼–ç ä¹‹å‰ï¼Œè¿˜éœ€è¦äº†è§£ä¸€ä¸ªå…³äº &lt;code&gt;å­—èŠ‚åº&lt;/code&gt; çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;è®¡ç®—æœºç¡¬ä»¶æœ‰ä¸¤ç§å‚¨å­˜æ•°æ®çš„æ–¹å¼ï¼š&lt;code&gt;å¤§ç«¯&lt;/code&gt;å­—èŠ‚åºï¼ˆbig endianï¼‰å’Œ&lt;code&gt;å°ç«¯&lt;/code&gt;å­—èŠ‚åºï¼ˆlittle endianï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤§ç«¯å­—èŠ‚åºï¼šé«˜ä½å­—èŠ‚åœ¨å‰ï¼Œä½ä½å­—èŠ‚åœ¨å&lt;/li&gt;
&lt;li&gt;å°ç«¯å­—èŠ‚åºï¼šä½ä½å­—èŠ‚åœ¨å‰ï¼Œé«˜ä½å­—èŠ‚åœ¨å&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;0x1234567&lt;/code&gt; çš„å¤§ç«¯å­—èŠ‚åºå’Œå°ç«¯å­—èŠ‚åºçš„å†™æ³•å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.ruanyifeng.com/blogimg/asset/2016/bg2016112201.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å­—èŠ‚åºçš„å­˜åœ¨ä¸»è¦æ˜¯å› ä¸ºè®¡ç®—æœºç”µè·¯å…ˆå¤„ç†ä½ä½å­—èŠ‚ï¼Œå› ä¸ºè®¡ç®—éƒ½æ˜¯ä»ä½ä½å¼€å§‹çš„ã€‚ä½†æ˜¯ï¼Œäººç±»è¿˜æ˜¯ä¹ æƒ¯è¯»å†™å¤§ç«¯å­—èŠ‚åºã€‚æ‰€ä»¥ï¼Œé™¤äº†è®¡ç®—æœºçš„å†…éƒ¨å¤„ç†ï¼Œå…¶ä»–çš„åœºåˆå‡ ä¹éƒ½æ˜¯å¤§ç«¯å­—èŠ‚åºï¼Œæ¯”å¦‚ç½‘ç»œä¼ è¾“å’Œæ–‡ä»¶å‚¨å­˜ã€‚&lt;/p&gt;
&lt;p&gt;Unicode è§„èŒƒä¸­æ¨èçš„æ ‡è®°å­—èŠ‚é¡ºåºçš„æ–¹æ³•æ˜¯ &lt;code&gt;BOM&lt;/code&gt;ï¼ˆByte Order Markï¼‰ã€‚æœ‰ä¸€ä¸ªå«åšâ€é›¶å®½åº¦éæ¢è¡Œç©ºæ ¼ï¼ˆZERO WIDTH NO-BREAK SPACEï¼‰â€çš„å­—ç¬¦ï¼Œå®ƒçš„ç¼–ç æ˜¯ &lt;code&gt;FEFF&lt;/code&gt;ã€‚è€Œ &lt;code&gt;FFFE&lt;/code&gt; åœ¨ UCS ä¸­æ˜¯ä¸å­˜åœ¨çš„å­—ç¬¦ï¼Œæ‰€ä»¥ä¸åº”è¯¥å‡ºç°åœ¨å®é™…ä¼ è¾“ä¸­ã€‚Unicode è§„èŒƒä¸­å®šä¹‰æ¯ä¸ªæ–‡ä»¶çš„æœ€å‰é¢åŠ å…¥è¿™ä¸ªé›¶å®½åº¦éæ¢è¡Œç©ºæ ¼å­—ç¬¦ï¼Œå¦‚æœä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚æ˜¯ &lt;code&gt;FE FF&lt;/code&gt;ï¼Œå°±è¡¨ç¤ºè¯¥æ–‡ä»¶é‡‡ç”¨å¤§ç«¯æ–¹å¼ï¼›å¦‚æœå¤´ä¸¤ä¸ªå­—èŠ‚æ˜¯&lt;code&gt;FF FE&lt;/code&gt;ï¼Œå°±è¡¨ç¤ºè¯¥æ–‡ä»¶é‡‡ç”¨å°ç«¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ¸…æ¥šçš„æ˜¯ï¼Œ&lt;strong&gt;ä¸æ˜¯æ‰€æœ‰çš„ä¸œè¥¿éƒ½æœ‰å­—èŠ‚åº&lt;/strong&gt;ï¼Œè€Œä¸”å­—ç¬¦åºæ˜¯ä»¥å•å­—èŠ‚ä¸ºå•ä½çš„é¡ºåºé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢æåˆ° &lt;code&gt;Unicode&lt;/code&gt; æœ‰å¤šç§å­—ç¬¦ç¼–ç å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç» &lt;code&gt;UTF-8&lt;/code&gt; ä¸ &lt;code&gt;UCS-2&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;UTF-8&quot;&gt;&lt;a href=&quot;#UTF-8&quot; class=&quot;headerlink&quot; title=&quot;UTF-8&quot;&gt;&lt;/a&gt;UTF-8&lt;/h4&gt;&lt;p&gt;&lt;code&gt;UTF-8&lt;/code&gt; ä½œä¸ºæœ€å¸¸è§çš„ Unicode å®ç°æ–¹å¼ï¼Œè§£å†³äº†å‰é¢æåˆ°çš„å­—ç¬¦ç¼–ç å‡ å¤§ç—›ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt; &lt;code&gt;UTF-8&lt;/code&gt; ç¼–ç æ˜¯&lt;strong&gt;å˜é•¿ç¼–ç &lt;/strong&gt;ï¼Œç”¨ 1 åˆ° 6 ä¸ªå­—èŠ‚ç¼–ç ï¼Œå®Œå…¨å…¼å®¹ &lt;code&gt;ASCII&lt;/code&gt; ç ï¼Œå¯¹äº ASCII æ¶µç›–çš„é‚£äº›å­—ç¬¦ï¼Œå•å­—èŠ‚å®ç°ï¼Œå…¶ä½™å¤§å¤šæ•°ä¸ºä¸‰å­—èŠ‚å®ç°ã€‚å¯¹äºä»¥è‹±æ–‡ä¸ºä¸»çš„æ–‡æœ¬éå¸¸å‹å¥½ï¼Œæœ€èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ç¼ºç‚¹ä¸»è¦åœ¨äº&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UTF-8&lt;/code&gt; ç¼–ç é€šè¿‡å¤šä¸ªå­—èŠ‚ç»„åˆçš„æ–¹å¼æ¥æ˜¾ç¤ºï¼Œè¿™æ˜¯è®¡ç®—æœºå¤„ç†&lt;code&gt;UTF-8&lt;/code&gt; çš„æœºåˆ¶ï¼Œå®ƒæ˜¯æ— å­—èŠ‚åºä¹‹åˆ†çš„ã€‚&lt;/p&gt;
&lt;p&gt;UTF å®¶æ—è¿˜æœ‰ &lt;code&gt;UTF-16ï¼ˆåŒå­—èŠ‚ï¼‰&lt;/code&gt; ä¸ &lt;code&gt;UTF-32ï¼ˆå››å­—èŠ‚ï¼‰&lt;/code&gt; å®ç°ï¼Œä¸¤è€…éƒ½æœ‰å­—èŠ‚åºé—®é¢˜ï¼Œå‰è€…æ›´é€‚åˆæ±‰å­—ç¼–ç ä½†ä¸æ”¯æŒå•å­—èŠ‚çš„ &lt;code&gt;ASCII&lt;/code&gt;ï¼Œåè€…ç”±äºæµªè´¹å‚¨å­˜ç©ºé—´å¾ˆä¸å¸¸è§ï¼ŒHTML5 ä¸­æ˜ç¡®è§„å®šç¦æ­¢ä½¿ç”¨ UTF-32 ç¼–ç ã€‚&lt;/p&gt;
&lt;h4 id=&quot;UCS-2&quot;&gt;&lt;a href=&quot;#UCS-2&quot; class=&quot;headerlink&quot; title=&quot;UCS-2&quot;&gt;&lt;/a&gt;UCS-2&lt;/h4&gt;&lt;p&gt;JavaScript è®¾è®¡ä¹‹åˆï¼Œè¿˜æ²¡æœ‰å‡ºç° &lt;code&gt;UTF-16&lt;/code&gt;ï¼Œå› æ­¤é‡‡ç”¨çš„æ˜¯ &lt;code&gt;USC-2&lt;/code&gt; ç¼–ç ã€‚å‰é¢æåˆ° &lt;strong&gt;Unicode çš„ç¼–ç å’Œ UCS çš„ç¼–ç éƒ½å®Œå…¨ä¸€è‡´&lt;/strong&gt;ã€‚&lt;code&gt;UCS-2&lt;/code&gt; æ˜¯ä¸€ç§å®šé•¿çš„ç¼–ç æ–¹å¼ï¼Œç”¨ä¸¤ä½å­—èŠ‚æ¥è¡¨ç¤ºä¸€ä½ç ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UTF-16&lt;/code&gt; å¯çœ‹æˆæ˜¯ &lt;code&gt;UCS-2&lt;/code&gt; çš„çˆ¶é›†ã€‚åœ¨æ²¡æœ‰&lt;code&gt;è¾…åŠ©å¹³é¢å­—ç¬¦ï¼ˆsurrogate code pointsï¼‰&lt;/code&gt;å‰ï¼Œ&lt;code&gt;UTF-16&lt;/code&gt; ä¸ &lt;code&gt;UCS-2&lt;/code&gt; æ‰€æŒ‡çš„æ˜¯åŒä¸€çš„æ„æ€ã€‚ä½†å½“å¼•å…¥è¾…åŠ©å¹³é¢å­—ç¬¦åï¼Œå°±ç§°ä¸º &lt;code&gt;UTF-16&lt;/code&gt; äº†ã€‚ç°åœ¨è‹¥æœ‰è½¯ä»¶å£°ç§°è‡ªå·±æ”¯æŒ &lt;code&gt;UCS-2&lt;/code&gt; ç¼–ç ï¼Œé‚£å…¶å®æ˜¯æš—æŒ‡å®ƒä¸èƒ½æ”¯æŒåœ¨ &lt;code&gt;UTF-16&lt;/code&gt; ä¸­è¶…è¿‡ 2 å­—èŠ‚çš„å­—é›†ã€‚å¯¹äºå°äº &lt;code&gt;0x10000&lt;/code&gt; çš„ &lt;code&gt;UCS&lt;/code&gt; ç ï¼Œ&lt;code&gt;UTF-16&lt;/code&gt; ç¼–ç å°±ç­‰äº &lt;code&gt;UCS&lt;/code&gt; ç ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript å¯¹äºè¶…å‡º USC-2 çš„å­—ç¬¦æ— æ³•æ­£ç¡®å¤„ç†ï¼Œä¼šå¯¼è‡´å­—ç¬¦é•¿åº¦ã€æ­£åˆ™åŒ¹é…åˆ¤æ–­é”™è¯¯ï¼Œä½¿ç”¨å­—ç¬¦ä¸²çš„ &lt;code&gt;charCodeAt()&lt;/code&gt; ä¸ &lt;code&gt;fromCharCode()&lt;/code&gt; ä¹Ÿæ— æ³•æ­£ç¡®è¯†åˆ«å­—ç¬¦ä¸ç ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ES6 æ–°å¢äº† &lt;code&gt;codePointAt()&lt;/code&gt; ä¸ &lt;code&gt;fromCodePoint()&lt;/code&gt; æ–¹æ³•ä»¥æ­£ç¡®å¤„ç† 32 ä½çš„ &lt;code&gt;UTF-16&lt;/code&gt; å­—ç¬¦ä¹‹å¤–çš„å­—ç¬¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Emoji&quot;&gt;&lt;a href=&quot;#Emoji&quot; class=&quot;headerlink&quot; title=&quot;Emoji&quot;&gt;&lt;/a&gt;Emoji&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;ğŸ˜‚&#39;&lt;/span&gt;.length &lt;span class=&quot;comment&quot;&gt;// 2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;1ï¸âƒ£&#39;&lt;/span&gt;.length &lt;span class=&quot;comment&quot;&gt;// 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦&#39;&lt;/span&gt;.length &lt;span class=&quot;comment&quot;&gt;// 8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&#39;&lt;/span&gt;.length &lt;span class=&quot;comment&quot;&gt;// 11&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;çœ‹èµ·æ¥å°±å¾ˆåˆºæ¿€ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ &lt;code&gt;Emoji&lt;/code&gt; è¡¨æƒ…çš„æµè¡Œï¼Œåœ¨å¼€å‘ä¸­å°±ä¸å¾—ä¸äº†è§£ã€è€ƒè™‘ &lt;code&gt;Emoji&lt;/code&gt; å­—ç¬¦äº†ã€‚å¦åˆ™æœ€ç®€å•çš„ textarea æ–‡æœ¬å­—æ•°é™åˆ¶éœ€æ±‚éƒ½éš¾ä»¥æ­£å¸¸å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;éšç€æ”¿æ²»æ­£ç¡®çš„å‘å±•ï¼ŒEmoji ç°åœ¨æ˜¯éå¸¸å¤šå…ƒåŒ–äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/09/03/5b8d23bc27a4c.jpg&quot; width=&quot;500&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/09/03/5b8d23bc4ed9b.jpg&quot; width=&quot;500&quot;&gt;&lt;/p&gt;
&lt;p&gt;è‚¤è‰²ï¼ŒèŒä¸šï¼Œæ€§åˆ«ï¼Œå–å‘ï¼Œå®¶åº­ç»„æˆéƒ½ååˆ†å¤šå…ƒï¼ŒåŸºæœ¬è¦†ç›–äº†æ‰€æœ‰æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®åœ¨åŸå…ˆçš„åŸºç¡€ Emoji å­—ç¬¦ä¸Šæ‹“å±•å‡ºè¿™äº›å¤šå…ƒåŒ–å­—ç¬¦å¹¶ä¸éš¾ï¼Œé€šè¿‡ç ç‚¹ç»„åˆå°±èƒ½å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;è‚¤è‰²ä¿®é¥°ç¬¦ï¼š ğŸ» ğŸ¼ ğŸ½ ğŸ¾ ğŸ¿&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™å‡ ä¸ªè‚¤è‰²ä¿®é¥°ç¬¦æ‹¼æ¥åˆ°åŸæœ‰è¡¨æƒ…ä¸Šï¼Œå°±å¯ä»¥å®ç°è‚¤è‰²å¤šå…ƒåŒ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/09/03/5b8d21b17273c.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;é›¶å®½å­—ç¬¦ ZWJ(U+200D)&lt;/code&gt; å¯ä»¥å®ç° family emojiï¼ŒU+200D ç›¸å½“äºæ˜¯ä¸€ä¸ªè¿æ¥ç¬¦ï¼Œè¿æ¥å®¶åº­æˆå‘˜ emojiï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// family (man, woman, boy)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &#39;\u&amp;#123;1F468&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F469&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F466&amp;#125;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ğŸ‘¨â€ + &#39;\u&amp;#123;200D&amp;#125;&#39; + ğŸ‘©â€ + &#39;\u&amp;#123;200D&amp;#125;&#39; + ğŸ‘¦&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// length: 8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; â€ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// family (woman, woman, girl)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &#39;\u&amp;#123;1F469&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F469&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F467&amp;#125;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ğŸ‘©â€ + &#39;\u&amp;#123;200D&amp;#125;&#39; + ğŸ‘©â€ &#39;\u&amp;#123;200D&amp;#125;&#39; + ğŸ‘§&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// length: 8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; â€ğŸ‘©â€ğŸ‘©â€ğŸ‘§&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// family (woman, woman, girl, girl)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &#39;\u&amp;#123;1F469&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F469&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F467&amp;#125;&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;\u&amp;#123;1F467&amp;#125;&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &#39;ğŸ‘©â€&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;ğŸ‘©â€&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39; + &#39;ğŸ‘§â€&#39; + &#39;\u&amp;#123;200D&amp;#125;&#39;+ ğŸ‘§&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// length: 11&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; â€ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å› æ­¤ï¼Œé‡åˆ°æ–‡æœ¬æœ‰å¯èƒ½å«æœ‰ Emoji çš„æƒ…å†µä¸­ï¼Œéœ€å°† Emoji å­—ç¬¦æ­£åˆ™åŒ¹é…å‡ºæ¥ï¼Œå•ç‹¬è¿›è¡Œè®¡ç®—ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒ&quot;&gt;&lt;a href=&quot;#å‚è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒ&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h3&gt;&lt;p&gt;å­—ç¬¦ç¼–ç ç›¸å…³çŸ¥è¯†è¿˜æœ‰å¾ˆå¤šï¼Œæœ¬æ–‡ä»…ä»‹ç»æœ€è¿‘å·¥ä½œä¸­æ‰€æ¶‰åŠçš„éƒ¨åˆ†ã€‚æ›´å®Œå–„æ›´å‡†ç¡®çš„å†…å®¹å»ºè®®å‚è€ƒè‹±æ–‡ç»´åŸºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.thoughtco.com/what-is-unicode-2034272&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;What Is Unicode?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;cenalulu.github.io/linux/character-encoding/&quot;&gt;ååˆ†é’Ÿææ¸…å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/41203455&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä» Unicode åˆ° emoji&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.ruanyifeng.com/blog/2016/11/byte-order.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç†è§£å­—èŠ‚åº&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.dailymail.co.uk/i/pix/2016/10/27/21/39C8A74600000578-3879480-The_touch_bar_can_display_emotions_in_messaging_apps_playback_co-a-5_1477598860842.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½œä¸ºç¼–ç¨‹çŸ¥è¯†åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œæœ‰å¿…è¦æ¶ˆåŒ–æ•´ç†è¾“å‡ºä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å­—ç¬¦ç¼–ç çš„å‡ ä¸ªé‡è¦åŸºç¡€æ¦‚å¿µï¼Œä» &lt;code&gt;ASCII&lt;/code&gt; åˆ° &lt;code&gt;Unicode&lt;/code&gt; å†åˆ° &lt;code&gt;Emoji&lt;/code&gt; ä¸ &lt;code&gt;JavaScript&lt;/code&gt; å­—ç¬¦å¤„ç†çš„ä¸€äº›å‘ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="cs" scheme="https://blog.colafornia.me/categories/cs/"/>
    
    
  </entry>
  
  <entry>
    <title>åˆåŒå’å•å­¦ä¹ äº†ä¸€éæ­£åˆ™è¡¨è¾¾å¼</title>
    <link href="https://blog.colafornia.me/post/2018/learning-regex-again/"/>
    <id>https://blog.colafornia.me/post/2018/learning-regex-again/</id>
    <published>2018-07-11T12:00:00.000Z</published>
    <updated>2019-10-24T02:59:57.055Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/regex.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä¸Šæ¯ç”¨åˆ°ä¸€æ¬¡å°±å¾—ä»å¤´è‡ªå­¦ä¸€æ¬¡ï¼Œç”¨å®Œäº†å†™å‡ºæ¥äº†ä¹Ÿå°±å¿˜å…‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸¤å¤©åœ¨ Twitter ä¸Šçœ‹åˆ°äº†é¢˜å›¾ï¼Œæ„Ÿè§‰åˆæ˜¯ä¸ªå¤§å‘ï¼Œè¶ç€æ‰‹å¤´è¿˜æœ‰ &lt;a href=&quot;https://caraws.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Caraws&lt;/a&gt; ç»™çš„ä¹¦å°±åˆåŒå’å•å­¦ä¹ äº†ä¸€éæ­£åˆ™è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è¯•å›¾å…ˆç”¨æœ€æ˜“æ‡‚çš„æ–¹å¼ç†é¡ºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ç‚¹ï¼ˆå°±ä¸è´´ä¸€æ‘ä¸€æ‘çš„æ–‡æ¡£æˆªå›¾äº†ï¼Œè‡³äºæ­£åˆ™çš„ä½¿ç”¨åœºæ™¯å’Œç”¨å¤„ä¹Ÿä¸å•°å—¦äº†ï¼‰ï¼Œä¸»è¦ä»‹ç»æ­£åˆ™æœ¬èº«å’Œåœ¨ JavaScript ä¸­ä½¿ç”¨æ­£åˆ™çš„å‘ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;&lt;p&gt;å½¢å¦‚é¢˜å›¾ä¸­çš„ &lt;code&gt;/abc/&lt;/code&gt; å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰ï¼Œä¸€èˆ¬è¢«ç§°ä¹‹ä¸ºæ¨¡å¼ï¼ˆpatternï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ›´å…·ä½“ä¸€ç‚¹çš„å®šä¹‰ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨â€œæ­£åˆ™è¡¨è¾¾å¼è¯­è¨€â€æ¥åˆ›å»ºçš„ï¼Œç”¨äºåŒ¹é…å’Œå¤„ç†æ–‡æœ¬çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯å†…ç½®äºå…¶å®ƒè¯­è¨€ä¸­çš„â€œè¿·ä½ è¯­è¨€â€ã€‚åœ¨ä¸åŒè¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å®ç°ä¸­ï¼Œ&lt;strong&gt;è¯­æ³•å’ŒåŠŸèƒ½å¯èƒ½ä¼šæœ‰ä¸€å®šå·®å¼‚&lt;/strong&gt;ï¼ˆåé¢æˆ‘ä»¬ä¼šè¯¦ç»†è®²ä¸€ä¸‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://regex101.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://regex101.com/&lt;/a&gt; æ˜¯ä¸€ä¸ªåœ¨çº¿ç»ƒä¹ ç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•Œé¢ä¸Šå‹¾é€‰ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½ï¼ˆåŒ¹é…å®Œæˆæ‰€éœ€æ—¶é—´ï¼‰ä»¥åŠå…·ä½“çš„åŒ¹é…æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸºç¡€&quot;&gt;&lt;a href=&quot;#åŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€&quot;&gt;&lt;/a&gt;åŸºç¡€&lt;/h2&gt;&lt;p&gt;æ€»ç»“äº†ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—æŠŠæ­£åˆ™ä¸­çš„è¯­æ³•ç¬¦å·åˆ†ä¸ºå››ç±»æ¯”è¾ƒå®¹æ˜“è®°å¿†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­—ç¬¦ä¸å­—ç¬¦é›†&lt;/li&gt;
&lt;li&gt;é¢„å®šä¹‰å­—ç¬¦ç±»&lt;/li&gt;
&lt;li&gt;é‡å¤æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½å­—ç¬¦ï¼ˆæœ€åè¿™ç§æ˜¯æˆ‘æ¦‚æ‹¬å‡ºæ¥çš„åå­—ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å­—ç¬¦ä¸å­—ç¬¦é›†&quot;&gt;&lt;a href=&quot;#å­—ç¬¦ä¸å­—ç¬¦é›†&quot; class=&quot;headerlink&quot; title=&quot;å­—ç¬¦ä¸å­—ç¬¦é›†&quot;&gt;&lt;/a&gt;å­—ç¬¦ä¸å­—ç¬¦é›†&lt;/h3&gt;&lt;p&gt;é¦–å…ˆè¦åˆ†æ¸…&lt;code&gt;å­—ç¬¦&lt;/code&gt;ä¸&lt;code&gt;å­—ç¬¦é›†&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/abc/&lt;/code&gt; ä¸­çš„ a åŒ¹é…çš„æ˜¯å•ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªæ¨¡å¼å°±åŒ¹é…çš„æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼Œå½“æ–‡æœ¬æ˜¯ â€˜abcdâ€™ æ—¶ä¼š&lt;strong&gt;ä¸€æ¬¡æ€§åŒ¹é…åˆ°å­—ç¬¦ä¸² â€˜abcâ€™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œç”¨ &lt;code&gt;[]&lt;/code&gt; &lt;strong&gt;å­—ç¬¦é›†æ“ä½œç¬¦&lt;/strong&gt;åŒ…è£¹èµ·æ¥çš„ &lt;code&gt;/[abc]/&lt;/code&gt; å°±æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œ&lt;code&gt;[abc]&lt;/code&gt; åŒ¹é…çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè¡¨æ˜åŒ¹é…ä¸º a æˆ– b æˆ– c çš„ä¸€ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œå½“æ–‡æœ¬æ˜¯ â€˜abcdâ€™ æ—¶æ‰§è¡ŒåŒ¹é…ï¼Œ&lt;strong&gt;æ¯æ¬¡åªèƒ½åŒ¹é…åˆ°å•ä¸ªå­—ç¬¦&lt;/strong&gt;ï¼Œç¬¬ä¸€æ¬¡åŒ¹é…åˆ° â€˜aâ€™ï¼Œç¬¬äºŒæ¬¡åŒ¹é…åˆ°â€™bâ€™â€¦â€¦&lt;/p&gt;
&lt;p&gt;åŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µå¹¶ä¸éš¾ï¼Œä¸€èˆ¬ï¼ˆæˆ‘è‡ªå·±æ˜¯ï¼‰ç­‰åˆ°äº†å„ç§è¡¨è¾¾å¼åµŒå¥—çš„æ—¶å€™å°±å¼€å§‹æ‡µé€¼äº†ã€‚&lt;/p&gt;
&lt;p&gt;åªèƒ½åœ¨å­—ç¬¦é›†ä¸­ä½¿ç”¨çš„æ“ä½œç¬¦æœ‰ä¸¤ä¸ªï¼Œ&lt;code&gt;å–éæ“ä½œç¬¦^&lt;/code&gt; ä¸ &lt;code&gt;å­—ç¬¦åŒºé—´-&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­—ç¬¦é›†ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code&gt;å–éæ“ä½œç¬¦^&lt;/code&gt;ï¼Œ&lt;code&gt;/[^abc]/&lt;/code&gt;å³ä¸ºåŒ¹é… aï¼Œbï¼Œc ä»¥å¤–çš„ä»»æ„å­—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/[a-c]/&lt;/code&gt; ä¸ &lt;code&gt;/[abc]/&lt;/code&gt; ç›¸åŒï¼Œé€šè¿‡å­—ç¬¦åŒºé—´æˆ‘ä»¬å¯ä»¥ç¼–å†™ &lt;code&gt;/[A-Za-z0-9]/&lt;/code&gt; è¿™ç§ç®€æ´æ˜“è¯»çš„æ­£åˆ™è¡¨è¾¾å¼äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é¢„å®šä¹‰å­—ç¬¦ç±»&quot;&gt;&lt;a href=&quot;#é¢„å®šä¹‰å­—ç¬¦ç±»&quot; class=&quot;headerlink&quot; title=&quot;é¢„å®šä¹‰å­—ç¬¦ç±»&quot;&gt;&lt;/a&gt;é¢„å®šä¹‰å­—ç¬¦ç±»&lt;/h3&gt;&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼é¢„å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„æœ¯è¯­æ¥ä»£è¡¨ä¸€ç±»å­—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ &lt;code&gt;\d&lt;/code&gt; ä¸ºä»»æ„æ•°å­—ï¼Œ&lt;code&gt;\D&lt;/code&gt; ä¸ºä»»æ„éæ•°å­—ï¼Œæ›´å¤šé¢„å®šä¹‰å­—ç¬¦å¯ä»¥å‚çœ‹ &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MDN&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é‡å¤æ¬¡æ•°&quot;&gt;&lt;a href=&quot;#é‡å¤æ¬¡æ•°&quot; class=&quot;headerlink&quot; title=&quot;é‡å¤æ¬¡æ•°&quot;&gt;&lt;/a&gt;é‡å¤æ¬¡æ•°&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹ç¬¦å·è·Ÿåœ¨å­—ç¬¦æˆ–è€…å­—ç¬¦é›†çš„åé¢ï¼Œä»£è¡¨é‡å¤æ¬¡æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt;ï¼šé‡å¤ä¸€æ¬¡æˆ–å¤šæ¬¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;*&lt;/code&gt;ï¼šé‡å¤é›¶æ¬¡æˆ–å¤šæ¬¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?&lt;/code&gt;ï¼šé‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{m, n}&lt;/code&gt;ï¼šå¯è¡¨ç¤ºåŒºé—´ï¼Œæˆ–æ˜¯è‡³å°‘ m æ¬¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™¤äº† &lt;code&gt;?&lt;/code&gt; ä¹‹å¤–çš„ä¸‰ç§éƒ½æ˜¯è´ªå©ªå‹å­—ç¬¦ï¼Œå¯èƒ½ä¼šå‘ç”Ÿ&lt;strong&gt;è¿‡åº¦åŒ¹é…&lt;/strong&gt;çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; str=&lt;span class=&quot;string&quot;&gt;&#39;aacbacbc&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; reg=&lt;span class=&quot;regexp&quot;&gt;/a.*b/&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(str.match(reg)); &lt;span class=&quot;comment&quot;&gt;// [&quot;aacbacb&quot;, index:0...]&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ­¤æ—¶æ‰§è¡Œä¸€æ¬¡åŒ¹é…ï¼Œç”±äº &lt;code&gt;*&lt;/code&gt; ä½œä¸ºè´ªå©ªå‹å­—ç¬¦ä¼šå°½å¯èƒ½åŒ¹é…æ›´å¤šå†…å®¹ï¼Œå› æ­¤åŒ¹é…åˆ°çš„æ˜¯ aacbacbï¼Œè€Œä¸æ˜¯ aacbã€‚åœ¨è´ªå©ªå‹å­—ç¬¦åé¢åŠ ä¸Š &lt;code&gt;?&lt;/code&gt; å³å˜ä¸ºéè´ªå©ªå­—ç¬¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŠŸèƒ½å­—ç¬¦&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½å­—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½å­—ç¬¦&quot;&gt;&lt;/a&gt;åŠŸèƒ½å­—ç¬¦&lt;/h3&gt;&lt;p&gt;ä¸¾å‡ ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ­£åˆ™å°¾éƒ¨çš„  &lt;code&gt;/i&lt;/code&gt; è¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼Œ&lt;code&gt;/g&lt;/code&gt; è¡¨ç¤ºåŒ¹é…æ‰€æœ‰å®ä¾‹ï¼Œ&lt;code&gt;/m&lt;/code&gt; å¤šè¡ŒåŒ¹é…&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç«–çº¿ç¬¦å· &lt;code&gt;|&lt;/code&gt; è¡¨æ˜â€œæˆ–â€ï¼Œ&lt;code&gt;a|b&lt;/code&gt; å³åŒ¹é… a æˆ– b&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å°æ‹¬å· &lt;code&gt;()&lt;/code&gt; å¯ä»¥ç”¨æ¥åˆ†å‰²å­è¡¨è¾¾å¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;^å­—ç¬¦ä¸²$&lt;/code&gt; ä»£è¡¨å­—ç¬¦ä¸²çš„å‰åè¾¹ç•Œ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;è¿›é˜¶&quot;&gt;&lt;a href=&quot;#è¿›é˜¶&quot; class=&quot;headerlink&quot; title=&quot;è¿›é˜¶&quot;&gt;&lt;/a&gt;è¿›é˜¶&lt;/h2&gt;&lt;p&gt;ä»¥ä¸Šä»‹ç»çš„éƒ½æ˜¯åŸºç¡€è¯­æ³•ä¸å­—ç¬¦åŒ¹é…è§„åˆ™ï¼Œæ­£åˆ™è¿˜æœ‰ä¸¤ç§è¾ƒä¸ºé«˜çº§çš„ä½¿ç”¨è¯­æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å›æº¯å¼•ç”¨-backreference&quot;&gt;&lt;a href=&quot;#å›æº¯å¼•ç”¨-backreference&quot; class=&quot;headerlink&quot; title=&quot;å›æº¯å¼•ç”¨ backreference&quot;&gt;&lt;/a&gt;å›æº¯å¼•ç”¨ backreference&lt;/h3&gt;&lt;p&gt;&lt;code&gt;å›æº¯å¼•ç”¨&lt;/code&gt;æ˜¯æŒ‡æ¨¡å¼çš„ååŠéƒ¨åˆ†å¼•ç”¨åœ¨å‰åŠéƒ¨åˆ†ä¸­å®šä¹‰çš„å­è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;(x)&lt;/code&gt; å­è¡¨è¾¾å¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;\&lt;/code&gt; æ ‡è¯†å›æº¯å¼•ç”¨ï¼Œ&lt;code&gt;\n&lt;/code&gt; å³ä»£è¡¨ç¬¬ n ä¸ªå­è¡¨è¾¾å¼æ‰€åŒ¹é…åˆ°çš„å†…å®¹ï¼ˆåœ¨ replace æ“ä½œä¸­ä½¿ç”¨ &lt;code&gt;$&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªå…¸å‹ä¾‹å­ï¼ŒåŒ¹é… HTML ä¸­çš„æ ‡é¢˜æ ‡ç­¾ï¼ŒHTML å¯èƒ½å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;111&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;h4&lt;/span&gt;&amp;gt;&lt;/span&gt;lalala&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;/&amp;lt;[Hh][1-5]&amp;gt;.*?&amp;lt;\/[Hh][1-5]&amp;gt;/&lt;/code&gt; æˆ‘ä»¬ä¼šå°† &lt;code&gt;&amp;lt;h4&amp;gt;lalala\&amp;lt;/h3&amp;gt;&lt;/code&gt; è¿™ç§éæ³•æ ‡ç­¾ä¹ŸåŒ¹é…åˆ°ã€‚å›æº¯å¼•ç”¨å°±é€‚ç”¨äºè¿™ç§åœºæ™¯ï¼Œå®ƒå¯ä»¥å®ç°&lt;strong&gt;å‰åä¸€è‡´åŒ¹é…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/&amp;lt;([hH][1-5])&amp;gt;.*?&amp;lt;\/\1&amp;gt;/&lt;/code&gt; ä¸­çš„ &lt;code&gt;\1&lt;/code&gt; åªåŒ¹é…ç¬¬ä¸€ä¸ªå­è¡¨è¾¾å¼ &lt;code&gt;([hH][1-5])&lt;/code&gt; æ‰€åŒ¹é…åˆ°çš„å†…å®¹ï¼Œä»è€Œé¿å…åŒ¹é…åˆ°å¯¹åº”ä¸ä¸Šçš„æ ‡ç­¾ç»„åˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‰åæŸ¥æ‰¾-lookaround&quot;&gt;&lt;a href=&quot;#å‰åæŸ¥æ‰¾-lookaround&quot; class=&quot;headerlink&quot; title=&quot;å‰åæŸ¥æ‰¾ lookaround&quot;&gt;&lt;/a&gt;å‰åæŸ¥æ‰¾ lookaround&lt;/h3&gt;&lt;p&gt;è¿˜æ˜¯å¼•ç”¨ä¸Šé¢çš„æ ‡é¢˜æ ‡ç­¾åŒ¹é…ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åªåŒ¹é…åˆ° &lt;code&gt;&amp;lt;h1&amp;gt;111&amp;lt;/h1&amp;gt;&lt;/code&gt; ä¸­çš„æ ‡é¢˜å†…å®¹è¦æ€ä¹ˆå†™æ­£åˆ™å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªæ–°è¯­æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;?=&lt;/code&gt;ï¼šå‘å‰æŸ¥æ‰¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?&amp;lt;=&lt;/code&gt;ï¼šå‘åæŸ¥æ‰¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä»¥å‘å‰ã€å‘åæŸ¥æ‰¾å¼€å¤´çš„å­è¡¨è¾¾å¼&lt;/strong&gt;å°±æ˜¯å‰åæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ­£åˆ™å¯ä»¥ä¸ºï¼š&lt;code&gt;/(?&amp;lt;=&amp;lt;[Hh][1-5]&amp;gt;).*(?=&amp;lt;\/[Hh][1-5]&amp;gt;)/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»“åˆå›æº¯å¼•ç”¨ä¸å‰åæŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥å®ç°æ¡ä»¶å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¨åŠ›çˆ†ç‚¸ï¼Œåªæ˜¯è¿™ç§å½¢å¼çš„æ­£åˆ™å¤ªéš¾è¯»äº†ï¼Œæœ‰å…´è¶£å¯ä»¥ Google å­¦ä¹ ä¸€ä¸‹ï¼Œè¿™é‡Œä¸è®²äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é«˜çº§&quot;&gt;&lt;a href=&quot;#é«˜çº§&quot; class=&quot;headerlink&quot; title=&quot;é«˜çº§&quot;&gt;&lt;/a&gt;é«˜çº§&lt;/h2&gt;&lt;p&gt;ä»¥ä¸Šæ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ç‚¹ï¼Œç°åœ¨è®²è®²å‘ã€‚é¦–å…ˆè¯´è¯´ JavaScript ä¸­çš„æ­£åˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å­—é¢é‡-VS-RegExp&quot;&gt;&lt;a href=&quot;#å­—é¢é‡-VS-RegExp&quot; class=&quot;headerlink&quot; title=&quot;å­—é¢é‡ VS RegExp()&quot;&gt;&lt;/a&gt;å­—é¢é‡ VS RegExp()&lt;/h3&gt;&lt;p&gt;åœ¨ JavaScript ä¸­åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ­£åˆ™å­—é¢é‡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pattern1 = &lt;span class=&quot;regexp&quot;&gt;/\d+/&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ„é€  RegExp å®ä¾‹ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼ä¼ å…¥æ­£åˆ™&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pattern2 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;\\d+&#39;&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸¤ç§æ–¹å¼åˆ›å»ºå‡ºçš„æ­£åˆ™æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚ä»åˆ›å»ºæ–¹å¼ä¸Šçœ‹ï¼Œ&lt;strong&gt;æ­£åˆ™å­—é¢é‡å¯è¯»æ€§æ›´ä¼˜&lt;/strong&gt;ï¼Œå› ä¸ºæ­£åˆ™ä¸­ç»å¸¸ä½¿ç”¨ &lt;code&gt;\&lt;/code&gt; åæ–œæ åœ¨å­—ç¬¦ä¸²ä¸­æ˜¯ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ï¼Œæƒ³ä»¥å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºåæ–œæ çš„è¯ï¼Œéœ€è¦ä½¿ç”¨ &lt;code&gt;\\&lt;/code&gt; ä¸¤ä¸ªåæ–œæ ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„ï¼Œ&lt;strong&gt;æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡è¡¨ç¤ºï¼Œæ¯æ¬¡åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œéƒ½ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¿™å’Œå…¶å®ƒç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰ä¸åŒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;strong&gt;è®©æ­£åˆ™è¡¨è¾¾å¼åªç¼–è¯‘ä¸€æ¬¡å¹¶å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ä»¥ä¾›åç»­ä½¿ç”¨&lt;/strong&gt;æ¥å®ç°ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œç¬¬ä¸€æ®µä»£ç å°†åˆ›å»ºä¸‰ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå¹¶è¿›è¡Œäº†ä¸‰æ¬¡ç¼–è¯‘ï¼Œè™½ç„¶è¡¨è¾¾å¼æ˜¯ç›¸åŒçš„ã€‚è€Œç¬¬äºŒæ®µä»£ç åˆ™æ€§èƒ½æ›´é«˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;regexp&quot;&gt;/abc/&lt;/span&gt;.test(&lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;regexp&quot;&gt;/abc/&lt;/span&gt;.test(&lt;span class=&quot;string&quot;&gt;&#39;ab&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;regexp&quot;&gt;/abc/&lt;/span&gt;.test(&lt;span class=&quot;string&quot;&gt;&#39;abc&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pattern = &lt;span class=&quot;regexp&quot;&gt;/abc/&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(pattern.test(&lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(pattern.test(&lt;span class=&quot;string&quot;&gt;&#39;ab&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(pattern.test(&lt;span class=&quot;string&quot;&gt;&#39;abc&#39;&lt;/span&gt;));&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å…¶ä¸­æœ‰&lt;strong&gt;æ€§èƒ½éšæ‚£&lt;/strong&gt;ã€‚å…ˆè®°ä½è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å†·çŸ¥è¯†-lastIndex&quot;&gt;&lt;a href=&quot;#å†·çŸ¥è¯†-lastIndex&quot; class=&quot;headerlink&quot; title=&quot;å†·çŸ¥è¯† lastIndex&quot;&gt;&lt;/a&gt;å†·çŸ¥è¯† lastIndex&lt;/h3&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬æ¥è§£é‡Šä¸‹é¢˜å›¾ä¸­çš„æƒ…å†µæ˜¯æ€ä¹ˆå›äº‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/regex.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™å…¶å®æ˜¯å…¨å±€åŒ¹é…çš„å‘ï¼Œä¹Ÿå°±æ˜¯æ­£åˆ™åçš„ &lt;code&gt;/g&lt;/code&gt; ç¬¦å·ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; pattern = &lt;span class=&quot;regexp&quot;&gt;/abc/g&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(pattern.global) &lt;span class=&quot;comment&quot;&gt;// true&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç”¨ &lt;code&gt;/g&lt;/code&gt; æ ‡è¯†çš„æ­£åˆ™ä½œä¸ºå…¨å±€åŒ¹é…ï¼Œä¹Ÿå°±æ‹¥æœ‰äº† global å±æ€§å¹¶å¯¼è‡´äº†é¢˜å›¾ä¸­å‘ˆç°çš„å¼‚å¸¸è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;å…¨å±€æ­£åˆ™è¡¨è¾¾å¼çš„å¦ä¸€ä¸ªå±æ€§ &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;lastIndex&lt;/a&gt; ç”¨äºå­˜æ”¾ä¸Šä¸€æ¬¡åŒ¹é…æ–‡æœ¬ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RegExp.prototype.exec()&lt;/code&gt; å’Œ &lt;code&gt;RegExp.prototype.test()&lt;/code&gt; æ–¹æ³•éƒ½ä»¥ &lt;code&gt;lastIndex&lt;/code&gt; å±æ€§ä¸­æ‰€å­˜å‚¨çš„ä½ç½®ä½œä¸ºä¸‹æ¬¡æ­£åˆ™åŒ¹é…æ£€ç´¢çš„èµ·ç‚¹ã€‚è¿ç»­è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å°±å¯ä»¥éå†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŒ¹é…æ–‡æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lastIndex&lt;/code&gt; å±æ€§å¯è¯»å†™ï¼Œå½“ &lt;code&gt;RegExp.prototype.exec()&lt;/code&gt; æˆ– &lt;code&gt;RegExp.prototype.test()&lt;/code&gt; å†ä¹Ÿæ‰¾ä¸åˆ°å¯ä»¥åŒ¹é…çš„æ–‡æœ¬æ—¶ï¼Œä¼šè‡ªåŠ¨æŠŠ lastIndex å±æ€§é‡ç½®ä¸º 0ã€‚å› æ­¤&lt;strong&gt;ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ¥æ£€ç´¢æ–‡æœ¬ï¼Œæ˜¯å¯ä»¥æ— é™æ‰§è¡Œä¸‹å»çš„&lt;/strong&gt;ã€‚æˆ‘ä»¬ä¹Ÿå°±æ˜ç™½äº†é¢˜å›¾ä¸­ä¸ºä½•æ¯æ¬¡æ‰§è¡Œ &lt;code&gt;RegExp.prototype.test()&lt;/code&gt; è¿”å›çš„ç»“æœéƒ½ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä»…å¦‚æ­¤ï¼Œçœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œèƒ½çœ‹å‡ºæ¥æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;regexp&quot;&gt;/a/g&lt;/span&gt;.test(&lt;span class=&quot;string&quot;&gt;&#39;ababc&#39;&lt;/span&gt;)) count++;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸è¦è½»æ˜“æ‹·è´åˆ°æ§åˆ¶å°ä¸­å°è¯•ï¼Œä¼šæŠŠæµè§ˆå™¨å¡æ­»çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ¯ä¸ªå¾ªç¯ä¸­ &lt;code&gt;/a/g.test(&amp;#39;ababc&amp;#39;)&lt;/code&gt; éƒ½åˆ›å»ºäº†æ–°çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œæ¯æ¬¡åŒ¹é…éƒ½æ˜¯é‡æ–°å¼€å§‹ï¼Œè¿™ä¸€æ“ä½œä¼šæ— é™æ‰§è¡Œä¸‹å»ï¼Œå½¢æˆæ­»å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®çš„å†™æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; regex = &lt;span class=&quot;regexp&quot;&gt;/a/g&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (regex.test(&lt;span class=&quot;string&quot;&gt;&#39;ababc&#39;&lt;/span&gt;)) count++;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·ï¼Œæ¯æ¬¡å¾ªç¯ä¸­æ“ä½œçš„éƒ½æ˜¯åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œéšç€æ¯æ¬¡åŒ¹é…å &lt;code&gt;lastIndex&lt;/code&gt; çš„å¢åŠ ï¼Œç­‰åˆ°å°†æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…å®Œæˆåï¼Œå°±è·³å‡ºå¾ªç¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç»™ä»¥ä¸ŠçŸ¥è¯†ç‚¹ç”»ä¸ª&lt;strong&gt;é‡ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†æ­£åˆ™è¡¨è¾¾å¼ä¿å­˜åˆ°å˜é‡ä¸­ï¼Œåªåœ¨é€»è¾‘ä¸­ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä¸ä»…æ€§èƒ½æ›´é«˜ï¼Œè¿˜å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;è°¨æ…ä½¿ç”¨å…¨å±€åŒ¹é…ï¼Œ&lt;code&gt;RegExp.prototype.exec()&lt;/code&gt; æˆ– &lt;code&gt;RegExp.prototype.test()&lt;/code&gt;è¿™ä¸¤ä¸ªæ–¹æ³•çš„æ‰§è¡Œç»“æœå¯èƒ½æ¯æ¬¡éƒ½ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;åšåˆ°äº†ä»¥ä¸Šä¸¤ç‚¹åï¼Œè¿˜è¦è°¨æ…åœ¨å¾ªç¯ä¸­ä½¿ç”¨æ­£åˆ™åŒ¹é…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;å›æº¯é™·é˜±-Catastrophic-Backtracking&quot;&gt;&lt;a href=&quot;#å›æº¯é™·é˜±-Catastrophic-Backtracking&quot; class=&quot;headerlink&quot; title=&quot;å›æº¯é™·é˜± Catastrophic Backtracking&quot;&gt;&lt;/a&gt;å›æº¯é™·é˜± Catastrophic Backtracking&lt;/h3&gt;&lt;p&gt;å›æº¯é™·é˜±æ˜¯æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«çš„ä¸€ä¸ªå‘äº†ï¼Œä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œäº‹æ•…ç°åœºå¯ä»¥å‚çœ‹&lt;a href=&quot;https://juejin.im/post/5b287ea6f265da596d04a324&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¼•å‘çš„è¡€æ¡ˆï¼Œè®©çº¿ä¸Š CPU100% å¼‚å¸¸ï¼ã€‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•ä»‹ç»ä¸€ä¸‹å›æº¯é™·é˜±çš„é—®é¢˜æºå¤´ï¼Œæ­£åˆ™å¼•æ“åˆ†ä¸º &lt;code&gt;NFAï¼ˆç¡®å®šå‹æœ‰ç©·è‡ªåŠ¨æœºï¼‰&lt;/code&gt; å’Œ &lt;code&gt;DFAï¼ˆä¸ç¡®å®šå‹æœ‰ç©·è‡ªåŠ¨æœºï¼‰&lt;/code&gt;ï¼Œ&lt;code&gt;DFA&lt;/code&gt; æ˜¯ä»åŒ¹é…æ–‡æœ¬å…¥æ‰‹ï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¸ä¼šåŒ¹é…ä¸¤æ¬¡ï¼ˆå¯ä»¥ç†è§£ä¸ºæ‰‹é‡Œæç€æ–‡æœ¬ï¼ŒæŒ¨ä¸ªå­—ç¬¦æ‹¿å»åŒ¹é…æ­£åˆ™ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œå®ƒçš„åŠŸèƒ½æœ‰é™ï¼Œä¸æ”¯æŒå›æº¯ã€‚å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€é€‰ç”¨çš„éƒ½æ˜¯ &lt;code&gt;NFA&lt;/code&gt;ï¼Œç›¸å½“äºæ‰‹é‡Œæ‹¿ç€æ­£åˆ™è¡¨è¾¾å¼ï¼Œå»åŒ¹é…æ–‡æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/(a(bdc|cbd|bcd)/&lt;/code&gt; ä¸­å·²ç»æœ‰ä¸‰ç§åŒ¹é…è·¯å¾„ï¼Œåœ¨ &lt;code&gt;NFA&lt;/code&gt; ä¸­ï¼Œä»¥æ–‡æœ¬ â€˜abcdâ€™ ä¸ºä¾‹ï¼Œå°†èŠ±è´¹ 7 æ­¥æ‰èƒ½åŒ¹é…æˆåŠŸï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2019/06/01/V1wCPe.jpg&quot; alt=&quot;regex101&quot;&gt;&lt;br&gt;ï¼ˆå›¾ä¸­è¿˜åŒ…æ‹¬äº†å­—ç¬¦è¾¹ç•Œçš„åŒ¹é…æ­¥éª¤ï¼Œå› æ­¤å¤šäº†ä¸‰æ­¥ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ a åŒ¹é…åˆ° â€˜abcdâ€™ ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ¯ â€˜aâ€™ï¼ŒåŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶é‡åˆ°äº†åŒ¹é…è·¯å¾„çš„åˆ†å‰å£ï¼Œbdc æˆ– cbd æˆ– bcdï¼Œå…ˆä½¿ç”¨ bdc æ¥åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;bdc ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ b åŒ¹é…åˆ°äº† â€˜abcdâ€™ ä¸­çš„ç¬¬äºŒä¸ªå­—æ¯ â€˜bâ€™ï¼ŒåŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;bdc ä¸­çš„ç¬¬äºŒä¸ªå­—ç¬¦ d ä¸ â€˜abcdâ€™ ä¸­çš„ç¬¬ä¸‰ä¸ªå­—æ¯ â€˜câ€™ ä¸åŒ¹é…ï¼Œè¿™æ¡è·¯å¾„åŒ¹é…å¤±è´¥ï¼Œæ­¤æ—¶å°†å‘ç”Ÿå›æº¯ï¼ˆbacktrackï¼‰ï¼ŒæŠŠ â€˜bâ€™ è¿˜å›å»ã€‚é€‰æ‹©ç¬¬äºŒæ¡è·¯å¾„ cbd è¿›è¡ŒåŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;cbd çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ â€˜câ€™ å°±ä¸ â€˜bâ€™ åŒ¹é…å¤±è´¥ã€‚å¼€å§‹ç¬¬ä¸‰æ¡è·¯å¾„ bcd çš„åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;bcd çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ â€˜bâ€™ ä¸æ–‡æœ¬ â€˜bâ€™ åŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;bcd çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ â€˜câ€™ ä¸æ–‡æœ¬ â€˜câ€™ åŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;bcd çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ â€˜dâ€™ ä¸æ–‡æœ¬ â€˜dâ€™ åŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è‡³æ­¤åŒ¹é…å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;å¯æƒ³è€ŒçŸ¥ï¼Œå¦‚æœæ­£åˆ™ä¸­å†å¤šä¸€äº›åŒ¹é…è·¯å¾„æˆ–è€…åŒ¹é…æœ¬æ–‡å†é•¿ä¸€ç‚¹ï¼ŒåŒ¹é…æ­¥éª¤å°†å¤šåˆ°éš¾ä»¥æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ç”¨ &lt;code&gt;/(a*)*bc/&lt;/code&gt; æ¥åŒ¹é… â€˜aaaaaaaaaaaabcâ€™ éƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼ŒåŒ¹é…æ–‡æœ¬ä¸­æ¯å¢åŠ ä¸€ä¸ª â€˜aâ€™ï¼Œéƒ½ä¼šå¯¼è‡´æ‰§è¡Œæ—¶é—´ç¿»å€ã€‚&lt;/p&gt;
&lt;p&gt;ç¦æ­¢è¿™ç§å›æº¯é™·é˜±çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å æœ‰ä¼˜å…ˆé‡è¯ï¼ˆPossessive Quantifiersï¼‰&lt;/li&gt;
&lt;li&gt;åŸå­åˆ†ç»„ï¼ˆAtomic Groupingï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯æƒœ &lt;strong&gt;JavaScript ä¸æ”¯æŒè¿™ä¸¤ç§è¯­æ³•&lt;/strong&gt;ï¼Œæœ‰å…´è¶£å¯ä»¥ Google è‡ªè¡Œäº†è§£ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ JavaScript ä¸­æˆ‘ä»¬æ²¡æœ‰æ–¹æ³•å¯ä»¥ç›´æ¥ç¦æ­¢å›æº¯é™·é˜±ï¼Œæˆ‘ä»¬åªèƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¿å…é‡è¯åµŒå¥— &lt;code&gt;(a*)* =&amp;gt; a*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å‡å°‘åŒ¹é…è·¯å¾„&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠæ­£åˆ™åŒ¹é…æ”¾åˆ° Service Worker ä¸­è¿›è¡Œï¼Œä»è€Œé¿å…å½±å“é¡µé¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥èµ„æ–™çš„æ—¶å€™å‘ç°ï¼Œå›æº¯é™·é˜±ä¸ä»…ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿæœ‰å®‰å…¨é—®é¢˜ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹å…ˆçŸ¥ç™½å¸½å¤§ä¼šä¸Šçš„&lt;a href=&quot;https://xianzhi.aliyun.com/forum/attachment/big_size/WAF%E6%98%AF%E6%97%B6%E5%80%99%E8%B7%9F%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%B4%E5%86%8D%E8%A7%81.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠWAFæ˜¯æ—¶å€™è·Ÿæ­£åˆ™è¡¨è¾¾å¼è¯´å†è§ã€‹&lt;/a&gt;åˆ†äº«ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/26285406/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šæ­£åˆ™è¡¨è¾¾å¼å¿…çŸ¥å¿…ä¼šã€‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/26638316/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠJavaScript å¿è€…ç§˜ç±ã€‹ç¬¬ä¸ƒç« &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/regex.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä¸Šæ¯ç”¨åˆ°ä¸€æ¬¡å°±å¾—ä»å¤´è‡ªå­¦ä¸€æ¬¡ï¼Œç”¨å®Œäº†å†™å‡ºæ¥äº†ä¹Ÿå°±å¿˜å…‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸¤å¤©åœ¨ Twitter ä¸Šçœ‹åˆ°äº†é¢˜å›¾ï¼Œæ„Ÿè§‰åˆæ˜¯ä¸ªå¤§å‘ï¼Œè¶ç€æ‰‹å¤´è¿˜æœ‰ &lt;a href=&quot;https://caraws.github.io/&quot;&gt;Caraws&lt;/a&gt; ç»™çš„ä¹¦å°±åˆåŒå’å•å­¦ä¹ äº†ä¸€éæ­£åˆ™è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è¯•å›¾å…ˆç”¨æœ€æ˜“æ‡‚çš„æ–¹å¼ç†é¡ºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ç‚¹ï¼ˆå°±ä¸è´´ä¸€æ‘ä¸€æ‘çš„æ–‡æ¡£æˆªå›¾äº†ï¼Œè‡³äºæ­£åˆ™çš„ä½¿ç”¨åœºæ™¯å’Œç”¨å¤„ä¹Ÿä¸å•°å—¦äº†ï¼‰ï¼Œä¸»è¦ä»‹ç»æ­£åˆ™æœ¬èº«å’Œåœ¨ JavaScript ä¸­ä½¿ç”¨æ­£åˆ™çš„å‘ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="regex javascript" scheme="https://blog.colafornia.me/categories/regex-javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨ GPU åŠ¨ç”»ä¼˜åŒ–ä¸ Render Pipeline</title>
    <link href="https://blog.colafornia.me/post/2018/gpu-animation-render-pipeline/"/>
    <id>https://blog.colafornia.me/post/2018/gpu-animation-render-pipeline/</id>
    <published>2018-05-28T10:17:00.000Z</published>
    <updated>2019-10-24T02:22:04.200Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/render-pipeline-cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå‘¨åœ¨ç»„é‡Œåšäº†ä¸€ä¸ªå°çš„æŠ€æœ¯åˆ†äº«ï¼Œæœ¬æ–‡æ˜¯å¯¹è¿™æ¬¡åˆ†äº«å†…å®¹çš„ä¸€ä¸ªæ–‡å­—åŒ–æ¢³ç†ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://p0.meituan.net/scarlett/e328aa2a7280812a89eced601d302f3418041.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ª Web é¡µé¢ç”±ä»£ç æœ€ç»ˆè½¬åŒ–ä¸ºå±å¹•ä¸Šçš„åƒç´ ç‚¹ï¼Œå¤§è‡´éµå¾ªå›¾ä¸­çš„æ­¥éª¤ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JS/CSS &amp;gt; æ ·å¼ &amp;gt; å¸ƒå±€ &amp;gt; ç»˜åˆ¶ &amp;gt; åˆæˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â‘  æŒ‡ç”± JavaScript å’Œ CSS ç¼–å†™çš„åŠ¨ç”»ä»£ç &lt;/p&gt;
&lt;p&gt;â‘¡ æµè§ˆå™¨æ ¹æ® CSS é€‰æ‹©å™¨åŒ¹é…è®¡ç®—ï¼ˆè®¡ç®—æƒé‡ç­‰ï¼‰æ¯ä¸ªå…ƒç´ çš„æœ€ç»ˆæ ·å¼&lt;/p&gt;
&lt;p&gt;â‘¢ æµè§ˆå™¨è®¡ç®—å…ƒç´ æ‰€å çš„ç©ºé—´å¤§å°åŠå…¶åœ¨å±å¹•ä¸Šçš„ä½ç½®ï¼ˆç”±äºå…ƒç´ ä¼šäº’ç›¸å½±å“ï¼Œè®¡ç®—å¸ƒå±€è¿™ä¸€æ­¥éª¤ä¼šç»å¸¸å‘ç”Ÿï¼‰&lt;/p&gt;
&lt;p&gt;â‘£ åœ¨å¤šä¸ªå±‚ä¸Šå¡«å……åƒç´ è¿›è¡Œç»˜åˆ¶ï¼Œç»˜åˆ¶æ¯ä¸ªå…ƒç´ çš„å¯è§†éƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;â‘¤ åˆæˆï¼Œå°†ä¸Šä¸€æ­¥ä¸­ç»˜åˆ¶å‡ºçš„å¤šä¸ªå±‚ï¼Œæ­£ç¡®åˆæˆåˆ°é¡µé¢ä¸Š&lt;/p&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„çŸ¥è¯†ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¦æ­£ç¡®ä½¿ç”¨ã€è®¿é—® CSS å±æ€§ï¼Œå°½é‡å°‘è§¦å‘æµè§ˆå™¨çš„ &lt;code&gt;é‡æ’é‡ç»˜&lt;/code&gt;ï¼Œä»è€Œæå‡åŠ¨ç”»æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;é‡æ’é‡ç»˜æŒ‡çš„æ˜¯ä¸Šè¿°çš„â‘¢â‘£æ­¥éª¤ï¼Œæœ¬æ–‡ä¸»è¦æ¢è®¨çš„æ˜¯æ­¥éª¤â‘¤ä¸­çš„&lt;strong&gt;åˆæˆ&lt;/strong&gt;ç›¸å…³çš„æ¦‚å¿µä¸ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€æ¸²æŸ“åŸºç¡€æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#äºŒã€æ¸²æŸ“åŸºç¡€æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€æ¸²æŸ“åŸºç¡€æ¦‚å¿µ&quot;&gt;&lt;/a&gt;äºŒã€æ¸²æŸ“åŸºç¡€æ¦‚å¿µ&lt;/h3&gt;&lt;p&gt;åœ¨ç ”ç©¶æµè§ˆå™¨çš„ Composite æ­¥éª¤å‰ï¼Œæœ‰å‡ ä¸ªæ¸²æŸ“ç›¸å…³çš„æ¦‚å¿µå¿…é¡»äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦åŸºäº Chrome çš„å†…æ ¸ &lt;code&gt;Blink&lt;/code&gt; çš„æ¸²æŸ“æ¦‚å¿µæè¿°ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-Blink&quot;&gt;&lt;a href=&quot;#1-Blink&quot; class=&quot;headerlink&quot; title=&quot;1.Blink&quot;&gt;&lt;/a&gt;1.Blink&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://p1.meituan.net/scarlett/dc2500cbb537de8934117c2579ecad3227964.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰æˆ‘ä¸€ç›´ä»¥ä¸º Chrome çš„å†…æ ¸ä¾ç„¶æ˜¯ &lt;code&gt;Webkit&lt;/code&gt;ï¼ŒçœŸæ˜¯æ‘é€šç½‘ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Š &lt;code&gt;Webkit&lt;/code&gt; å†…æ ¸æ˜¯è‹¹æœå›¢é˜Ÿçš„å¼€æºä½œå“ï¼ŒChrome åœ¨ 2013 å¹´ä¹‹å‰ä¸€ç›´åŸºäºå…¶ä½œä¸ºæµè§ˆå™¨å†…æ ¸ã€‚ç›´è‡³ &lt;code&gt;Webkit2&lt;/code&gt; ä¸ &lt;code&gt;Chromium&lt;/code&gt; çš„æ²™ç®±è®¾è®¡å­˜åœ¨å†²çªï¼Œä¸¤æ–¹å›¢é˜Ÿæ‰å†³å®šåˆ†é“æ‰¬é•³ã€‚&lt;/p&gt;
&lt;p&gt;Google å›¢é˜Ÿä» Webkit ä¸­ fork å‡ºä¸€ä»½ä»£ç ï¼Œå°†åœ¨ &lt;code&gt;WebKit&lt;/code&gt; ä»£ç çš„åŸºç¡€ä¸Šç ”å‘æ›´åŠ å¿«é€Ÿå’Œç®€çº¦çš„æ¸²æŸ“å¼•æ“ï¼Œå¹¶é€æ­¥è„±ç¦» &lt;code&gt;WebKit&lt;/code&gt; çš„å½±å“ï¼Œåˆ›é€ ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ &lt;code&gt;Blink&lt;/code&gt;ï¼ˆæ®è¯´åˆ æ‰äº† Webkit ä¸­ 880W è¡Œä»£ç ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ­¤ç¼˜æ•…ï¼ŒBlink ä¸ Webkit å¯¹äºæ¸²æŸ“è¿‡ç¨‹ä¸­çš„ä¸€äº›æµç¨‹ï¼Œæœ¯è¯­å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œæœ¬æ–‡ä»¥ Blink ä¸ºå‡†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2-RenderObject-ä¸-RenderLayer&quot;&gt;&lt;a href=&quot;#2-RenderObject-ä¸-RenderLayer&quot; class=&quot;headerlink&quot; title=&quot;2.RenderObject ä¸ RenderLayer&quot;&gt;&lt;/a&gt;2.RenderObject ä¸ RenderLayer&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://p1.meituan.net/scarlett/aabc7b208641fdf392dfe9b855a109b576936.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æµè§ˆå™¨è§£æ HTML æ–‡ä»¶ç”Ÿæˆ &lt;code&gt;DOM æ ‘&lt;/code&gt;ï¼Œç„¶è€Œ &lt;code&gt;DOM æ ‘&lt;/code&gt;æ˜¯ä¸å¯ä»¥ç›´æ¥è¢«ç”¨äºæ’ç‰ˆçš„ï¼Œå†…æ ¸è¿˜ä¼šå†ç”Ÿæˆ &lt;code&gt;RenderObject æ ‘&lt;/code&gt;ã€‚æ¯ä¸€ä¸ªå¯è§çš„ DOM èŠ‚ç‚¹éƒ½ä¼šç”Ÿæˆç›¸åº”çš„ RenderObject èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ’ç‰ˆå¼•æ“ç»è¿‡ DOM æ ‘ä¸ CSS å®šä¹‰å¯¹ Render æ ‘è¿›è¡Œæ’ç‰ˆï¼ŒRender æ ‘ä½œä¸ºæ’ç‰ˆå¼•æ“çš„è¾“å‡ºï¼Œæ¸²æŸ“å¼•æ“çš„è¾“å…¥ã€‚&lt;/p&gt;
&lt;p&gt;æ‹¥æœ‰ç›¸åŒåæ ‡ç©ºé—´çš„ RenderObject å±äºåŒä¸€æ¸²æŸ“å±‚ï¼ˆRenderLayerï¼‰ï¼ŒRenderLayer æœ€åˆè¢«ç”¨æ¥å®ç°&lt;code&gt;å±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contextï¼‰&lt;/code&gt;ï¼Œä»¥ä¿è¯é¡µé¢å…ƒç´ ä»¥æ­£ç¡®é¡ºåºåˆæˆã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆ RenderLayer ä¸å…·å¤‡å±‚å ä¸Šä¸‹æ–‡çš„æ¡ä»¶æ˜¯ä¸€æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p0.meituan.net/scarlett/85b3d7376bc7c693e872ca668bef980b232822.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;3-GraphicsLayer&quot;&gt;&lt;a href=&quot;#3-GraphicsLayer&quot; class=&quot;headerlink&quot; title=&quot;3.GraphicsLayer&quot;&gt;&lt;/a&gt;3.GraphicsLayer&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://p0.meituan.net/scarlett/d48ec20953d86e41c8fb62bb6267690d38392.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æŸäº›ç‰¹æ®Šçš„ &lt;code&gt;RenderLayer&lt;/code&gt; æ¸²æŸ“å±‚ä¼šè¢«è®¤ä¸ºæ˜¯&lt;code&gt;åˆæˆå±‚ï¼ˆCompositing Layersï¼‰&lt;/code&gt;ï¼Œåˆæˆå±‚æ‹¥æœ‰å•ç‹¬çš„ GraphicsLayerã€‚è¿™å…¶å®æ˜¯æµè§ˆå™¨ä¸ºäº†æå‡åŠ¨ç”»æ€§èƒ½åšå‡ºçš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åœ¨åŠ¨ç”»çš„æ¯ä¸€å¸§çš„è¿‡ç¨‹ä¸­ä¸å¿…æ¯æ¬¡éƒ½é‡æ–°ç»˜åˆ¶æ•´ä¸ªé¡µé¢ã€‚åœ¨ç‰¹å®šæ–¹å¼ä¸‹å¯ä»¥è§¦å‘ç”Ÿæˆä¸€ä¸ªåˆæˆå±‚ï¼Œåˆæˆå±‚æ‹¥æœ‰å•ç‹¬çš„ &lt;code&gt;GraphicsLayer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦è¿›è¡ŒåŠ¨ç”»çš„å…ƒç´ åŒ…å«åœ¨è¿™ä¸ªåˆæˆå±‚ä¹‹ä¸‹ï¼Œè¿™æ ·åŠ¨ç”»çš„æ¯ä¸€å¸§åªéœ€è¦å»é‡æ–°ç»˜åˆ¶è¿™ä¸ª &lt;code&gt;GraphicsLayer&lt;/code&gt; å³å¯ï¼Œä»è€Œè¾¾åˆ°æå‡åŠ¨ç”»æ€§èƒ½çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆ GraphicsLayer çš„æ¡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1.meituan.net/scarlett/5855a920418f70e0e50f1b0438601e42168085.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰ã€Render-Pipeline-æ¸²æŸ“æµæ°´çº¿&quot;&gt;&lt;a href=&quot;#ä¸‰ã€Render-Pipeline-æ¸²æŸ“æµæ°´çº¿&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ã€Render Pipeline æ¸²æŸ“æµæ°´çº¿&quot;&gt;&lt;/a&gt;ä¸‰ã€Render Pipeline æ¸²æŸ“æµæ°´çº¿&lt;/h3&gt;&lt;p&gt;åœ¨äº†è§£äº†ä»¥ä¸Šæ¸²æŸ“æ¦‚å¿µåï¼Œæˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹ä¸€ä¸ªæç®€ç‰ˆçš„æ¸²æŸ“æµæ°´çº¿ç¤ºæ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p0.meituan.net/scarlett/ff9a521cfb9093806a408fa2ba2a51c26992.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Blink å†…æ ¸è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œè´Ÿè´£ JavaScript çš„è§£ææ‰§è¡Œï¼ŒHTML/CSS è§£æï¼ŒDOM æ“ä½œï¼Œæ’ç‰ˆï¼Œå›¾å±‚æ ‘çš„æ„å»ºå’Œæ›´æ–°ç­‰ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Layer Compositorï¼ˆå›¾å±‚åˆæˆå™¨ï¼‰è¿è¡Œåœ¨ Compositor çº¿ç¨‹ä¸Šï¼Œæ¥æ”¶ Blink çš„è¾“å…¥ï¼Œè´Ÿè´£å›¾å±‚æ ‘çš„ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;Display Compositor æ¥æ”¶ Layer Compositor çš„è¾“å…¥ï¼Œè´Ÿè´£è¾“å‡ºæœ€ç»ˆçš„ OpenGL ç»˜åˆ¶æŒ‡ä»¤ï¼Œå°†ç½‘é¡µå†…å®¹é€šè¿‡ GL ç»˜åˆ¶åˆ°æ˜¾ç¤ºå±ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å°†æ¸²æŸ“æµæ°´çº¿çš„å†…å®¹æŒ‰ç…§çº¿ç¨‹åšä¸€ä¸‹åŒºåˆ†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p0.meituan.net/scarlett/f7537a196f23b0f1f6b7ed9d893fedea39673.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”±æ­¤ï¼ŒWeb åŠ¨ç”»å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆæˆå™¨åŠ¨ç”»ï¼šå¤§å¤šæ•°åŸºäº CSS çš„åŠ¨ç”»ï¼Œ&lt;code&gt;transforms&lt;/code&gt; å’Œ &lt;code&gt;opacity&lt;/code&gt; ç­‰éƒ½å¯ä»¥åœ¨åˆæˆçº¿ç¨‹ä¸­å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;éåˆæˆå™¨åŠ¨ç”»ï¼šå¼•èµ·äº†ç»˜åˆ¶ã€å¸ƒå±€çš„åŠ¨ç”»ï¼Œ&lt;code&gt;Timer&lt;/code&gt; æˆ–è€… &lt;code&gt;requestAnimationFrame&lt;/code&gt; ç­‰ç”± JavaScript é©±åŠ¨çš„åŠ¨ç”»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœæµè§ˆå™¨åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œä¸€äº›è€—æ—¶çš„ä»»åŠ¡ï¼Œåˆæˆå™¨åŠ¨ç”»å¯ä»¥ç»§ç»­è¿è¡Œè€Œä¸ä¼šä¸­æ–­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å››ã€Web-åŠ¨ç”»ä¼˜åŒ–å»ºè®®&quot;&gt;&lt;a href=&quot;#å››ã€Web-åŠ¨ç”»ä¼˜åŒ–å»ºè®®&quot; class=&quot;headerlink&quot; title=&quot;å››ã€Web åŠ¨ç”»ä¼˜åŒ–å»ºè®®&quot;&gt;&lt;/a&gt;å››ã€Web åŠ¨ç”»ä¼˜åŒ–å»ºè®®&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://www.html5rocks.com/zh/tutorials/speed/high-performance-animations/cheap-operations.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç°ä»£æµè§ˆå™¨åœ¨å®Œæˆä»¥ä¸Šå››ç§å±æ€§çš„åŠ¨ç”»æ—¶ï¼Œæ¶ˆè€—æˆæœ¬è¾ƒä½ã€‚æ ¹æœ¬åŸå› æ˜¯è¿™å››ç§å±æ€§ç”Ÿæˆäº†è‡ªå·±çš„å›¾å½¢å±‚ï¼ˆGraphicsLayerï¼‰ï¼Œå¼€å¯äº† &lt;code&gt;GPU ç¡¬ä»¶åŠ é€Ÿ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å¯ GPU ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;will-change&lt;/li&gt;
&lt;li&gt;transform: translateZ(0)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬äºŒç§æˆ‘ä»¬åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼Œç¬¬ä¸€ç§æ˜¯ CSS3 çš„å±æ€§ï¼Œå®ƒä¼šé€šçŸ¥æµè§ˆå™¨ä½ æ‰“ç®—æ›´æ”¹å…ƒç´ çš„å±æ€§ã€‚æµè§ˆå™¨ä¼šåœ¨ä½ è¿›è¡Œæ›´æ”¹ä¹‹å‰åšæœ€åˆé€‚çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œé€šè¿‡ç”Ÿæˆå›¾å½¢å±‚ï¼ˆGraphicsLayerï¼‰çš„æ–¹å¼æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–å´æœ‰ä¸ªæ·±å‘ â€”â€” &lt;code&gt;éšå¼åˆæˆ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1.meituan.net/scarlett/4651555d9265a7d0280b038d501d31ac60552.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œa, bä¸¤ä¸ªå…ƒç´ éƒ½å…·æœ‰ absolute å’Œ z-index å±æ€§ï¼Œå…¶ä¸­ a å…ƒç´ çš„ z-index å¤§äº bï¼Œå› æ­¤ a ä½äº b å›¾å±‚ä¹‹ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å°† a å…ƒç´ ä½¿ç”¨ left å±æ€§ï¼Œåšä¸€ä¸ªç§»åŠ¨åŠ¨ç”»ï¼Œé‚£ä¹ˆ aå…ƒç´ å°±æœ‰äº†ä¸€ä¸ªåˆæˆå±‚ï¼ŒåŠ¨ç”»å¾—åˆ°äº†æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œå¦‚æœ a é™æ­¢ä¸åŠ¨ï¼Œæˆ‘ä»¬è®© b å…ƒç´ åšåŠ¨ç”»å‘¢ï¼Ÿb å…ƒç´ å°†æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹åˆæˆå±‚ï¼›ç„¶åå®ƒä»¬å°†è¢« GPU åˆæˆã€‚ä½†æ˜¯å› ä¸º a å…ƒç´ è¦åœ¨ b å…ƒç´ çš„ä¸Šé¢ï¼ˆå› ä¸º a å…ƒç´ çš„ z-index æ¯” b å…ƒç´ é«˜ï¼‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šåšä»€ä¹ˆï¼Ÿ&lt;strong&gt;æµè§ˆå™¨ä¼šå°† a å…ƒç´ ä¹Ÿå•ç‹¬åšä¸€ä¸ªåˆæˆå±‚ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªåˆæˆå±‚ a å…ƒç´ æ‰€åœ¨çš„å¤åˆå±‚ã€b å…ƒç´ æ‰€åœ¨çš„åˆæˆå±‚ã€å…¶ä»–å†…å®¹åŠèƒŒæ™¯å±‚ã€‚&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰è‡ªå·±åˆæˆå±‚çš„å…ƒç´ è¦å‡ºç°åœ¨æœ‰åˆæˆå±‚å…ƒç´ çš„ä¸Šæ–¹ï¼Œå®ƒå°±ä¼šæ‹¥æœ‰è‡ªå·±çš„å¤åˆå±‚ï¼›è¿™ç§æƒ…å†µè¢«ç§°ä¸º&lt;strong&gt;éšå¼åˆæˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GraphicsLayer è™½å¥½ï¼Œä½†ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œæ¯ä¸€å¸§çš„æ¸²æŸ“å†…æ ¸éƒ½ä¼šå»éå†è®¡ç®—å½“å‰æ‰€æœ‰çš„ GraphicsLayer ï¼Œå¹¶è®¡ç®—ä»–ä»¬ä¸‹ä¸€å¸§çš„é‡ç»˜åŒºåŸŸï¼Œæ‰€ä»¥è¿‡é‡çš„ GraphicsLayer è®¡ç®—ä¹Ÿä¼šç»™æ¸²æŸ“é€ æˆæ€§èƒ½å½±å“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› æ­¤æˆ‘ä»¬çš„æœ€ç»ˆç»“è®ºæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°½é‡ä¿æŒè®©éœ€è¦è¿›è¡Œ CSS åŠ¨ç”»çš„å…ƒç´ çš„ z-index ä¿æŒåœ¨é¡µé¢æœ€ä¸Š&lt;/li&gt;
&lt;li&gt;æœ‰èŠ‚åˆ¶åœ°ä¼˜åŒ–ï¼Œä¸è¦è¿‡æ—©ä¼˜åŒ–ï¼ˆä¸è¦æ»¥ç”¨ will-change ç­‰ GPU åŠ é€Ÿæ‰‹æ®µï¼‰&lt;/li&gt;
&lt;li&gt;æ ¹æ® Chrome Devtool æŸ¥çœ‹ GraphicsLayer æ¯å±‚å ç”¨çš„å†…å­˜&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;äº”ã€å‚è€ƒå†…å®¹&quot;&gt;&lt;a href=&quot;#äº”ã€å‚è€ƒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;äº”ã€å‚è€ƒå†…å®¹&quot;&gt;&lt;/a&gt;äº”ã€å‚è€ƒå†…å®¹&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CSS GPU Animation: Doing It Right&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://taobaofed.org/blog/2016/04/25/performance-composite/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ— çº¿æ€§èƒ½ä¼˜åŒ–ï¼šComposite&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/30534023&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æµè§ˆå™¨æ¸²æŸ“æµæ°´çº¿è§£æä¸ç½‘é¡µåŠ¨ç”»æ€§èƒ½ä¼˜åŒ–&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/render-pipeline-cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå‘¨åœ¨ç»„é‡Œåšäº†ä¸€ä¸ªå°çš„æŠ€æœ¯åˆ†äº«ï¼Œæœ¬æ–‡æ˜¯å¯¹è¿™æ¬¡åˆ†äº«å†…å®¹çš„ä¸€ä¸ªæ–‡å­—åŒ–æ¢³ç†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="render animation" scheme="https://blog.colafornia.me/categories/render-animation/"/>
    
    
  </entry>
  
  <entry>
    <title>è£…é¥°è€…æ¨¡å¼ =&gt; AOP =&gt; ES7 decorator =&gt; React é«˜é˜¶ç»„ä»¶</title>
    <link href="https://blog.colafornia.me/post/2018/from-decorator-to-hoc/"/>
    <id>https://blog.colafornia.me/post/2018/from-decorator-to-hoc/</id>
    <published>2018-05-19T08:56:00.000Z</published>
    <updated>2019-10-24T02:22:04.199Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/1*o6Q0MpSmQni2Q_sB5y9jig.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;äº”æœˆæ˜¯å­¦ä¹ çš„å¥½æ—¶èŠ‚å•Šï¼Œç¿»ç¿»ä¹¦ç»§ç»­å­¦ä¹ ä¸€ä¸‹è®¾è®¡æ¨¡å¼å§ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åˆ°&lt;code&gt;è£…é¥°è€…æ¨¡å¼&lt;/code&gt;äº†ã€‚æ¥ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¹¦é‡Œçš„ &lt;code&gt;AOP&lt;/code&gt; æ˜¯å•¥ï¼Ÿå­¦ä¹ ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æ–°æ—¶ä»£äº†å†çœ‹çœ‹ ES7 è§„èŒƒçš„ &lt;code&gt;decorator&lt;/code&gt; å§ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å•Šè¿˜æœ‰ &lt;code&gt;React é«˜é˜¶ç»„ä»¶&lt;/code&gt;çš„äº‹å„¿å‘¢ï¼Œéƒ½å­¦åˆ°è¿™äº†ï¼Œä¸å·®è¿™ä¸€ä¼šå„¿ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ä¸€ã€è£…é¥°è€…æ¨¡å¼æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#ä¸€ã€è£…é¥°è€…æ¨¡å¼æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€è£…é¥°è€…æ¨¡å¼æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;ä¸€ã€è£…é¥°è€…æ¨¡å¼æ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;p&gt;å…ˆçœ‹ä¸€ä¸‹æœ€ä¸ºç²¾ç¡®çš„è‹±æ–‡ç»´åŸºå®šä¹‰ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In object-oriented programming, the decorator pattern is a design pattern that allows behavior to be added to an individual object, either statically or dynamically, without affecting the behavior of other objects from the same class.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹äºä¼ ç»Ÿçš„ OOP è¯­è¨€æ¥è¯´ï¼Œç»™å¯¹è±¡(object)æ·»åŠ åŠŸèƒ½é€šå¸¸ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼Œè¿™ä¸ä»…å¯¼è‡´äº†è¶…ç±»ä¸å­ç±»é—´çš„å¼ºè€¦åˆï¼Œä¹Ÿè¿åäº†&lt;a href=&quot;https://en.wikipedia.org/wiki/Single_responsibility_principle&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å•ä¸€èŒè´£åŸåˆ™&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€è£…é¥°è€…æ¨¡å¼çš„å…¸å‹åº”ç”¨ï¼šAOP&quot;&gt;&lt;a href=&quot;#äºŒã€è£…é¥°è€…æ¨¡å¼çš„å…¸å‹åº”ç”¨ï¼šAOP&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€è£…é¥°è€…æ¨¡å¼çš„å…¸å‹åº”ç”¨ï¼šAOP&quot;&gt;&lt;/a&gt;äºŒã€è£…é¥°è€…æ¨¡å¼çš„å…¸å‹åº”ç”¨ï¼šAOP&lt;/h3&gt;&lt;p&gt;AOP å…¨ç§°ä¸º &lt;code&gt;Aspect-oriented programming&lt;/code&gt;ï¼Œå³&lt;code&gt;é¢å‘åˆ‡é¢ç¼–ç¨‹&lt;/code&gt;ã€‚ä¸»è¦é€‚ç”¨äºéœ€è¦æœ‰æ¨ªåˆ‡é€»è¾‘çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®ä¸ŠæŠ¥ï¼Œé”™è¯¯å¤„ç†ï¼Œé‰´æƒï¼Œè¯·æ±‚æ‹¦æˆªç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£è¿™ä¸ªæ¦‚å¿µä¹‹åï¼Œå®é™…æ“ä½œå°±å¹¶ä¸å¤æ‚ã€‚å¯ä»¥é€šè¿‡åœ¨åŸå‹ä¸Šè®¾ç½® &lt;code&gt;Function.prototype.before&lt;/code&gt; æ–¹æ³•å’Œ &lt;code&gt;Function.prototype.after&lt;/code&gt; æ–¹æ³•ï¼Œå®ç° &lt;code&gt;AOP è£…é¥°å‡½æ•°&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Function&lt;/span&gt;.prototype.before = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;beforefn&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; __self = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    beforefn.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; __self.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Function&lt;/span&gt;.prototype.after = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;afterfn&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; __self = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; ret = __self.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    afterfn.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; ret;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªè£…é¥°å‡½æ•°éƒ½æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåªæ˜¯æ‰€æ¥æ”¶å‚æ•°çš„æ‰§è¡Œé¡ºåºä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ service ç¼–å†™è£…é¥°å‡½æ•°ï¼Œä½œä¸ºæ¥å£æ‹¦æˆªå™¨ã€‚å¦‚ &lt;a href=&quot;https://github.com/axios/axios&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;axios&lt;/a&gt; ä¸­çš„ &lt;code&gt;Interceptors&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç»™è¯·æ±‚æ·»åŠ æ‹¦æˆªå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;axios.interceptors.request.use(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;config&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// åœ¨å‘èµ·è¯·æ±‚å‰ do something&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; config;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;error&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¤„ç†é”™è¯¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;.reject(error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç»™è¿”å›æ·»åŠ æ‹¦æˆªå™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;axios.interceptors.response.use(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;response&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¤„ç†è¿”å›æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; response;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;error&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¤„ç†é”™è¯¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;.reject(error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€å¤„ç†é”™è¯¯ä¸æ•°æ®ï¼Œä¸å†éœ€è¦åœ¨æ¯ä¸€ä¸ª Promise ä¸­éƒ½å†™ä¸€éäº†ï¼Œä¹Ÿä¾¿äºç»Ÿä¸€é¡¹ç›®ä¸­çš„å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº AOP ç®€å•ä»‹ç»åˆ°è¿™é‡Œã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰ã€ES7-Decorator&quot;&gt;&lt;a href=&quot;#ä¸‰ã€ES7-Decorator&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ã€ES7 Decorator&quot;&gt;&lt;/a&gt;ä¸‰ã€ES7 Decorator&lt;/h3&gt;&lt;p&gt;ES7 çš„ decorator è£…é¥°å™¨å€Ÿé‰´äº Python çš„æ€æƒ³ï¼Œç”± Yehuda Katz æå‡ºï¼Œè¿™é‡Œæœ‰&lt;a href=&quot;https://github.com/wycats/javascript-decorators&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ææ¡ˆçš„ç»†èŠ‚è®¾è®¡ä¸è¯­æ³•ç³–åœ¨ ES6/ES5 ä¸­çš„è½¬æ¢&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰éå¸¸ç®€çŸ­ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Decorators make it possible to annotate and modify classes and properties at design time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€è£…é¥°å™¨å¯ä»¥è®©æˆ‘ä»¬åœ¨è®¾è®¡æ—¶å¯¹ç±»å’Œç±»çš„å±æ€§è¿›è¡Œæ³¨è§£å’Œä¿®æ”¹â€œ&lt;/p&gt;
&lt;p&gt;æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬å…ˆå…¨ç›˜äº†è§£è¿™äº›è®¯æ¯å†æ¥ç ”ç©¶åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³ç†è§£ &lt;code&gt;decorator&lt;/code&gt; çš„ç”¨æ³•ï¼Œç¦»ä¸å¼€ &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Object.defineProperty&lt;/a&gt;ï¼ŒES7 ä¹Ÿæ­£æ˜¯åˆ©ç”¨ &lt;code&gt;Object.defineProperty&lt;/code&gt; å®ç°è£…é¥°å™¨ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-å‰ç½®çŸ¥è¯†ï¼šObject-defineProperty&quot;&gt;&lt;a href=&quot;#1-å‰ç½®çŸ¥è¯†ï¼šObject-defineProperty&quot; class=&quot;headerlink&quot; title=&quot;1. å‰ç½®çŸ¥è¯†ï¼šObject.defineProperty&quot;&gt;&lt;/a&gt;1. å‰ç½®çŸ¥è¯†ï¼šObject.defineProperty&lt;/h4&gt;&lt;p&gt;å¦‚æœäº†è§£è¿‡ Vue åŒå‘ç»‘å®šçš„å®ç°åŸç†ï¼Œå¯¹ &lt;code&gt;Object.defineProperty&lt;/code&gt; å°±ä¸€å®šä¸é™Œç”Ÿã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Object.defineProperty(obj, prop, descriptor)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰æ–°å±æ€§ï¼Œæˆ–ä¿®æ”¹å·²æœ‰å±æ€§ï¼Œå¹¶å°†å¯¹è±¡è¿”å›&lt;/p&gt;
&lt;p&gt;å‚æ•° &lt;code&gt;obj&lt;/code&gt;ï¼šè¦åœ¨å…¶ä¸Šæ·»åŠ æˆ–ä¿®æ”¹å±æ€§çš„å¯¹è±¡&lt;/p&gt;
&lt;p&gt;å‚æ•° &lt;code&gt;prop&lt;/code&gt;ï¼šå±æ€§å&lt;/p&gt;
&lt;p&gt;å‚æ•° &lt;code&gt;descriptor&lt;/code&gt;ï¼šå±æ€§æè¿°ç¬¦ï¼Œå¯ä»¥è®¾ç½®å±æ€§çš„æ•°æ®å±æ€§ä¸è®¿é—®å™¨å±æ€§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶ä¸­ &lt;code&gt;descriptor&lt;/code&gt; å¯è®¾ç½®çš„å±æ€§æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;é€šç”¨æè¿°ç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;enumerableï¼šBooleanï¼Œå±æ€§å¯å¦æšä¸¾&lt;/li&gt;
&lt;li&gt;configurableï¼šBooleanï¼Œè‹¥ä¸º falseï¼Œä»»ä½•å°è¯•åˆ é™¤ç›®æ ‡å±æ€§æˆ–ä¿®æ”¹å±æ€§ä»¥ä¸‹ç‰¹æ€§ï¼ˆwritable, configurable, enumerableï¼‰çš„è¡Œä¸ºå°†è¢«æ— æ•ˆåŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°æ®æè¿°ç¬¦ data descriptorï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;valueï¼šå±æ€§å€¼&lt;/li&gt;
&lt;li&gt;writableï¼šBooleanï¼Œæ˜¯å¦å¯å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®¿é—®å™¨æè¿°ç¬¦ accessor descriptorï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;getï¼š ä¸€æ—¦ç›®æ ‡å±æ€§è¢«è®¿é—®å°±ä¼šè°ƒå›æ­¤æ–¹æ³•ï¼Œå¹¶å°†æ­¤æ–¹æ³•çš„è¿ç®—ç»“æœè¿”å›ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;setï¼šä¸€æ—¦ç›®æ ‡å±æ€§è¢«èµ‹å€¼ï¼Œå°±ä¼šè°ƒå›æ­¤æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ï¼ˆVue å°±æ˜¯åœ¨ get å’Œ set å‡½æ•°ä¸­è¿›è¡Œäº†æ‹¦æˆªï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦å˜åŒ–ï¼Œå‘é€é€šçŸ¥åˆ°è®¢é˜…å™¨ä¸­ï¼Œè¯¦æƒ…å¯å‚è€ƒ&lt;a href=&quot;https://blog.colafornia.me/2017/03/14/observer-pattern-in-vue/&quot;&gt;ã€Šè§‚å¯Ÿè€…æ¨¡å¼ä»¥åŠåœ¨ Vue æºç ä¸­çš„å®è·µã€‹&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;h4 id=&quot;2-ES7-Decorator-çš„ç”¨æ³•&quot;&gt;&lt;a href=&quot;#2-ES7-Decorator-çš„ç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;2. ES7 Decorator çš„ç”¨æ³•&quot;&gt;&lt;/a&gt;2. ES7 Decorator çš„ç”¨æ³•&lt;/h4&gt;&lt;p&gt;ES7 Decorator çš„ä½¿ç”¨åœºæ™¯ä¸å°‘ï¼Œæˆ‘ä»¬å…ˆçœ‹æœ€ç®€å•å…¸å‹çš„ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;readonly&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;target, name, descriptor&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  descriptor.writable = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; descriptor&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cat&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @readonly&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    say() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;å–µ&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; tom = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Cat();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tom.say = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;æ±ª&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;tom.say()    &lt;span class=&quot;comment&quot;&gt;// å–µ&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;readonly å°±æ˜¯ä¸€ä¸ª decorator è£…é¥°å™¨ï¼Œå®ƒé€šè¿‡è®¾ç½®ä¿®é¥°ç¬¦çš„ &lt;code&gt;writable&lt;/code&gt; å±æ€§ï¼Œä½¿å¾—è¢«è£…é¥°çš„ &lt;code&gt;say()&lt;/code&gt; åªè¯»ã€‚&lt;/p&gt;
&lt;p&gt;è£…é¥°å™¨æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œtargetï¼Œname å’Œ descriptorã€‚&lt;/p&gt;
&lt;p&gt;å†™ä¸€ä¸ª log è£…é¥°å™¨æ¥çœ‹çœ‹è¿™ä»¨å‚æ•°éƒ½æ˜¯å•¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;target, name, descriptor&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(target);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(target.hasOwnProperty(&lt;span class=&quot;string&quot;&gt;&#39;constructor&#39;&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(target.constructor);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(name);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(descriptor);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Foo&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @log&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    bar() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; test = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Foo();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;test.bar();&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/decorator1.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œtarget å°±æ˜¯è¢«è£…é¥°çš„ç±»æœ¬èº«ï¼Œname ä¸ºè¢«è£…é¥°çš„å±æ€§åï¼Œdescriptor ä¸å‰è¿° Object.defineProperty æ–¹æ³•çš„å±æ€§æè¿°ç¬¦å®Œå…¨ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä»…ä»…æ˜¯ä½œä¸ºç±»å±æ€§çš„è£…é¥°å™¨è€Œè¨€ã€‚å®é™…ä¸Š decorator æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è£…é¥° Classï¼Œä½œä¸ºç±»è£…é¥°å™¨&lt;/li&gt;
&lt;li&gt;è£…é¥°ç±»çš„å±æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½œä¸ºç±»è£…é¥°å™¨æ—¶ï¼Œç”±äºç±»æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤ decorator ä»…æœ‰ &lt;code&gt;target&lt;/code&gt; è¿™ä¸€ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;decorator ä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;3-decorator-çš„ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;a href=&quot;#3-decorator-çš„ä½¿ç”¨åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;3. decorator çš„ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;/a&gt;3. decorator çš„ä½¿ç”¨åœºæ™¯&lt;/h4&gt;&lt;p&gt;å¦‚å‰é¢æ‰€æåˆ°çš„ AOP çš„ç”¨é€”ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ decorator å®ç°æ¨ªåˆ‡é€»è¾‘ï¼Œå¦‚æ—¥å¿—ä¸ŠæŠ¥ï¼Œé‰´æƒç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/jayphelps/core-decorators/tree/master/src&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;core-decorators&lt;/a&gt; ä¸­å®ç°äº†ä¸€ç³»åˆ—åŸºç¡€å¸¸ç”¨çš„è£…é¥°å™¨ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹å…¶ä¸­çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å¹³æ—¶å¼€å‘ä¸­éš¾å…é‡åˆ°éœ€è¦ä½¿ç”¨å®šæ—¶å™¨çš„åœºæ™¯ï¼Œäºæ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(() =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  doSomething();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é‡åˆ°ä¸€ä¸ªå°±å¾—å†™ä¸€ä¸ªï¼Œå‡½æ•°è¢«åŒ…è£¹æ¥åŒ…è£¹å»ï¼Œå¹¶ä¸æ˜¯å¾ˆç¾è§‚ã€‚å¯ä»¥ç¼–å†™ä¸€ä¸ªç®€å•çš„ &lt;code&gt;timeout&lt;/code&gt; è£…é¥°å™¨æ¥é‡æ„ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;timeout&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;milliseconds = 0&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt; target, key, descriptor &lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; fn = descriptor.value;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    descriptor.value = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;...args&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      setTimeout(() =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        fn.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, args);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &amp;#125;, milliseconds);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; descriptor;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Demo&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  @timeout()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  doSomething() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  @timmeout(&lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  doAnotherThing() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»£ç ç»“æ„æ¸…æ™°å¤šäº†ï¼Œè£…é¥°å™¨ä¹Ÿèµ·åˆ°äº†æ³¨é‡Šçš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;4-decorator-åœ¨ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Ÿ&quot;&gt;&lt;a href=&quot;#4-decorator-åœ¨ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;4. decorator åœ¨ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Ÿ&quot;&gt;&lt;/a&gt;4. decorator åœ¨ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Ÿ&lt;/h4&gt;&lt;p&gt;å°è¯•ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;message&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(message);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;before class&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;@log(&lt;span class=&quot;string&quot;&gt;&#39;class Bar&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Bar&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @log(&lt;span class=&quot;string&quot;&gt;&#39;class method bar&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    bar() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @log(&lt;span class=&quot;string&quot;&gt;&#39;class property foo&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    foo = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;after class&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; bar = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @log(&lt;span class=&quot;string&quot;&gt;&#39;object method bar&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    bar() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;br&gt;&lt;img src=&quot;/images/decorator2.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è£…é¥°å™¨æ˜¯åœ¨å£°æ˜æœŸå°±èµ·æ•ˆçš„ï¼Œå¹¶ä¸éœ€è¦ç±»è¿›è¡Œå®ä¾‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç±»å®ä¾‹åŒ–å¹¶ä¸ä¼šè‡´ä½¿è£…é¥°å™¨å¤šæ¬¡æ‰§è¡Œï¼Œå› æ­¤ä¸ä¼šå¯¹å®ä¾‹åŒ–å¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç¼–ç æ—¶çš„å£°æ˜é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸ä¼šå°†å±æ€§ã€æ–¹æ³•ã€è®¿é—®å™¨è¿›è¡Œé‡æ’åºã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºä»¥ä¸Šè¿™ 2 ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨è£…é¥°å™¨è¿è¡Œæ—¶ï¼Œä½ æ‰€èƒ½å¾—åˆ°çš„ç¯å¢ƒæ˜¯ç©ºçš„ï¼Œåœ¨ Bar.prototype æˆ–è€… Bar ä¸Šçš„å±æ€§æ˜¯è·å–ä¸åˆ°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•´ä¸ª target é‡Œå…¶å®åªæœ‰ constructor è¿™ä¸€ä¸ªå±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æ¢å¥è¯è¯´ï¼Œè£…é¥°å™¨è¿è¡Œæ—¶æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•å‡æœªå®šä¹‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å››ã€React-é«˜é˜¶ç»„ä»¶&quot;&gt;&lt;a href=&quot;#å››ã€React-é«˜é˜¶ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å››ã€React é«˜é˜¶ç»„ä»¶&quot;&gt;&lt;/a&gt;å››ã€React é«˜é˜¶ç»„ä»¶&lt;/h3&gt;&lt;p&gt;ä¹‹æ‰€ä»¥ä¼šæœ‰&lt;code&gt;é«˜é˜¶ç»„ä»¶ higher-order component(HOC)&lt;/code&gt;è¿™ä¸ªä¸œè¥¿ï¼Œä¸»è¦æ˜¯ä¸ºäº†å®ç°&lt;strong&gt;ç»„ä»¶çš„æŠ½è±¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-Mixin&quot;&gt;&lt;a href=&quot;#1-Mixin&quot; class=&quot;headerlink&quot; title=&quot;1. Mixin&quot;&gt;&lt;/a&gt;1. Mixin&lt;/h4&gt;&lt;p&gt;æƒ³äº†è§£ HOC å¹²äº†å•¥ï¼Œä»¥åŠä¸ºå•¥éœ€è¦å®ƒã€‚ä¾ç„¶è¦ç”¨ Vue ä¸¾ä¾‹ï¼ŒVue çš„ &lt;code&gt;mixins&lt;/code&gt; æ··å…¥æ–¹æ³•å®ç°äº†ç»„ä»¶çš„æ··å…¥ï¼Œå€Ÿæ­¤æˆ‘ä»¬å¯ä»¥å°†ç»„ä»¶ç²’åº¦åˆ‡ç»†ï¼Œä½¿å¾—é¡¹ç›®é«˜åº¦é…ç½®åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å®˜ç½‘ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ä¸€ä¸ªæ··å…¥å¯¹è±¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myMixin = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  created: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.hello()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  methods: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    hello: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;hello from mixin!&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ··å…¥å¯¹è±¡çš„ç»„ä»¶&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; Component = Vue.extend(&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  mixins: [myMixin]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; component = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Component() &lt;span class=&quot;comment&quot;&gt;// =&amp;gt; &quot;hello from mixin!&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Vue ä¸­çš„ mixin æ•°æ®å¯¹è±¡åœ¨å†…éƒ¨ä¼šè¿›è¡Œæµ…åˆå¹¶ (ä¸€å±‚å±æ€§æ·±åº¦)ï¼Œåœ¨å’Œç»„ä»¶çš„æ•°æ®å‘ç”Ÿå†²çªæ—¶&lt;strong&gt;ä»¥ç»„ä»¶æ•°æ®ä¼˜å…ˆ&lt;/strong&gt;ã€‚è¿™ä¹Ÿæ˜¯å®ç° mixin çš„é‡ç‚¹é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ &lt;code&gt;core-decorators&lt;/code&gt; ä¸­ mixin çš„æ ¸å¿ƒå®ç°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; getOwnPropertyDescriptors &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./private/utils&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &amp;#123; defineProperty &amp;#125; = &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handleClass&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;target, mixins&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!mixins.length) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;SyntaxError&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;`@mixin() class &lt;span class=&quot;subst&quot;&gt;$&amp;#123;target.name&amp;#125;&lt;/span&gt; requires at least one mixin as an argument`&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, l = mixins.length; i &amp;lt; l; i++) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; descs = getOwnPropertyDescriptors(mixins[i]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; keys = getOwnKeys(descs);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; j = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, k = keys.length; j &amp;lt; k; j++) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; key = keys[j];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!(hasProperty(key, target.prototype))) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        defineProperty(target.prototype, key, descs[key]);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;mixin&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;...mixins&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; mixins[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] === &lt;span class=&quot;string&quot;&gt;&#39;function&#39;&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; handleClass(mixins[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], []);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; target =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; handleClass(target, mixins);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­æŠŠå¾… mixin å¯¹è±¡çš„æ¯ä¸ªæ–¹æ³•éƒ½å åŠ åˆ°äº† target å¯¹è±¡çš„åŸå‹ä¸Šã€‚å…¶ä¸­é€šè¿‡ &lt;code&gt;defineProperty&lt;/code&gt; è¿™ä¸ªæ–¹æ³•é¿å…äº†è¦†ç›– target çš„åŸæœ‰å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ mixin æœ‰å¾ˆå¤šå¼Šç—…ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ€åæˆ‘ä»¬é€‰æ‹©äº†é«˜é˜¶ç»„ä»¶æ¥å®ç°ç»„ä»¶çš„ composeã€‚ä¸»è¦é—®é¢˜æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç ´åç»„ä»¶åŸæœ‰å°è£…&lt;/strong&gt;ï¼šè¢« mixin è¿›æ¥çš„ç»„ä»¶éƒ½æœ‰è‡ªå·±çš„ props å’Œ stateï¼Œå¯¼è‡´åœ¨å¼•å…¥çš„æ—¶å€™éœ€è¦åƒèˆ¬å°å¿ƒï¼Œå»ç»´æŠ¤é‚£äº›æˆ‘ä»¬ä¸å¯è§çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘½åå†²çª&lt;/strong&gt;ï¼šmixin æ˜¯ä¸€ä¸ªå¹³é¢ç»“æ„ï¼Œä¸åŒ mixin ä¸­çš„å‘½åä¸å¯çŸ¥ï¼Œè­¬å¦‚ &lt;code&gt;handleChange&lt;/code&gt; è¿™ç§å¸¸è§åå°±å¾ˆå®¹æ˜“å†²çªï¼Œæ— å½¢ä¸­å¢åŠ äº†å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤é«˜é˜¶ç»„ä»¶åº”è¿è€Œç”Ÿã€‚&lt;/p&gt;
&lt;h4 id=&quot;2-é«˜é˜¶ç»„ä»¶&quot;&gt;&lt;a href=&quot;#2-é«˜é˜¶ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;2. é«˜é˜¶ç»„ä»¶&quot;&gt;&lt;/a&gt;2. é«˜é˜¶ç»„ä»¶&lt;/h4&gt;&lt;p&gt;&lt;code&gt;é«˜é˜¶ç»„ä»¶ï¼ˆhigher-order componentï¼‰&lt;/code&gt;çš„æ¦‚å¿µç±»ä¼¼äº&lt;code&gt;é«˜é˜¶å‡½æ•°&lt;/code&gt;ï¼Œå®ƒæ¥å— React ç»„ä»¶ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ªæ–°çš„ React ç»„ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; EnhancedComponent = higherOrderComponent(WrappedComponent);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; React, &amp;#123; Component &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;react&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; simpleHoc &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./simple-hoc&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Normal&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Component&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// å¯ä»¥åšå¾ˆå¤šè‡ªå®šä¹‰é€»è¾‘&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  render() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.props, &lt;span class=&quot;string&quot;&gt;&#39;props&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Usual&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;lt;/div&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    )&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; simpleHoc(Normal);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; React, &amp;#123; Component &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;react&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; simpleHoc = WrappedComponent =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;im a hoc!&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Component&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    render() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &amp;lt;WrappedComponent &amp;#123;...this.props&amp;#125;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;export default simpleHoc;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬æ‰€å®šä¹‰çš„ Normal ç»„ä»¶é€šè¿‡ simpleHoc çš„åŒ…è£¹åè¾“å‡ºçš„æ–°ç»„ä»¶åï¼Œåœ¨ Normal æœ¬èº«çš„åŠŸèƒ½ä¸Šå¯ä»¥å¤šæ‰“ä¸€ä¸ª Logï¼Œå¹¶ç»§æ‰¿äº† simpleHoc çš„ propsã€‚è¿™æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­å•¦ï¼Œé«˜é˜¶ç»„ä»¶åšçš„äº‹æƒ…ä¹Ÿæ¯”è¾ƒé€Šã€‚æˆ‘ä»¬ç»§ç»­çœ‹çœ‹~&lt;/p&gt;
&lt;p&gt;å®ç°é«˜é˜¶ç»„ä»¶çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å±æ€§ä»£ç†ï¼ˆ&lt;code&gt;props proxy&lt;/code&gt;ï¼‰ï¼šé«˜é˜¶ç»„ä»¶é€šè¿‡ WrappedComponent æ¥æ“ä½œ props&lt;/li&gt;
&lt;li&gt;åå‘ä»£ç†ï¼ˆ&lt;code&gt;inheritance inversion&lt;/code&gt;ï¼‰ï¼šé«˜é˜¶ç»„ä»¶ç»§æ‰¿äº WrappedComponent&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸¤ç§æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ä¹Ÿå„ä¸ç›¸åŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;äº”ã€å®ç°é«˜é˜¶ç»„ä»¶çš„ä¸¤ç§æ–¹æ³•ä¸ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;a href=&quot;#äº”ã€å®ç°é«˜é˜¶ç»„ä»¶çš„ä¸¤ç§æ–¹æ³•ä¸ä½¿ç”¨åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;äº”ã€å®ç°é«˜é˜¶ç»„ä»¶çš„ä¸¤ç§æ–¹æ³•ä¸ä½¿ç”¨åœºæ™¯&quot;&gt;&lt;/a&gt;äº”ã€å®ç°é«˜é˜¶ç»„ä»¶çš„ä¸¤ç§æ–¹æ³•ä¸ä½¿ç”¨åœºæ™¯&lt;/h3&gt;&lt;h4 id=&quot;1-å±æ€§ä»£ç†&quot;&gt;&lt;a href=&quot;#1-å±æ€§ä»£ç†&quot; class=&quot;headerlink&quot; title=&quot;1. å±æ€§ä»£ç†&quot;&gt;&lt;/a&gt;1. å±æ€§ä»£ç†&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯è¾ƒä¸ºå¸¸è§çš„ä¸€ç§æ–¹æ³•ï¼Œä¸Šé¢çš„ &lt;code&gt;simpleHoc&lt;/code&gt; çš„å®ç°å…¶å®å°±å±äºå±æ€§ä»£ç†ã€‚&lt;strong&gt;é€šè¿‡é«˜é˜¶ç»„ä»¶ä¼ é€’ props çš„æ–¹æ³•å°±æ˜¯å±æ€§ä»£ç†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ“ä½œ &lt;code&gt;props&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;Refs&lt;/code&gt; è®¿é—®åˆ°ç»„ä»¶å®ä¾‹&lt;/li&gt;
&lt;li&gt;æå– &lt;code&gt;state&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç”¨å…¶ä»–å…ƒç´ åŒ…è£¹ &lt;code&gt;WrappedComponent&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€ä¸‹æœ€å¸¸è§çš„ï¼Œæ“ä½œ propsã€‚å…¶å®ƒä¸‰ç§åº”ç”¨åœ¨ç½‘ä¸Šä¹Ÿèƒ½æ‰¾åˆ°å…·ä½“ä¾‹å­ï¼Œä¸èµ˜è¿°äº†ï¼ˆæ–‡ç« åˆ°è¿™é‡Œæ„Ÿè§‰å·²ç»éå¸¸é•¿äº†â€¦â€¦ï¼‰&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§ä»£ç†ï¼Œæ¥è¯»å–ï¼Œç¼–è¾‘ï¼Œå¢åŠ æˆ–æ˜¯åˆ é™¤ WrappedComponent çš„ propsã€‚ä½†åº”è¯¥æ³¨æ„å°å¿ƒç¼–è¾‘ã€åˆ é™¤é‡è¦çš„ propsï¼Œå°½é‡é€šè¿‡&lt;strong&gt;å¯¹é«˜é˜¶ç»„ä»¶çš„ props ä½œæ–°çš„å‘½åæ¥é¿å…æ··æ·†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myHOC&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;WrappedComponent&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myHoc&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;React&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Component&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    render() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; newProps = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        user: currentLoggedInUser&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &amp;lt;WrappedComponent &amp;#123;...this.props&amp;#125; &amp;#123;...newProps&amp;#125;/&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·ï¼Œè¾“å‡ºçš„æ–°ç»„ä»¶å°±å¯ä»¥é€šè¿‡ &lt;code&gt;this.props.user&lt;/code&gt; æ¥è·å¾—å½“å‰ç™»å½•äººçš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨çš„æ—¶å€™å¯ä»¥é€šè¿‡ decorator æ¥ç®€åŒ–ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;@myHoc&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;React&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Component&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  render() &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; MyComponent;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2-åå‘ç»§æ‰¿&quot;&gt;&lt;a href=&quot;#2-åå‘ç»§æ‰¿&quot; class=&quot;headerlink&quot; title=&quot;2. åå‘ç»§æ‰¿&quot;&gt;&lt;/a&gt;2. åå‘ç»§æ‰¿&lt;/h4&gt;&lt;p&gt;å…ˆçœ‹ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myHOC&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;WrappedComponent&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myHoc&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;WrappedComponent&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    render() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.render()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶ç»§æ‰¿äº WrappedComponentï¼Œå› æ­¤è¢«ç§°ä¸º &lt;code&gt;Inheritance Inversion&lt;/code&gt; åå‘ç»§æ‰¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åå‘ç»§æ‰¿æ¨¡å¼ä¸‹çš„é«˜é˜¶ç»„ä»¶å¯ä»¥é€šè¿‡ this è®¿é—®åˆ° WrappedComponent çš„ stateã€propsã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œ render æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¸²æŸ“åŠ«æŒï¼ˆ&lt;code&gt;Render Highjacking&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;æ“ä½œ &lt;code&gt;state&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¸²æŸ“åŠ«æŒæ˜¯æŒ‡é«˜é˜¶ç»„ä»¶å¯ä»¥æ§åˆ¶ WrappedComponent çš„æ¸²æŸ“è¿‡ç¨‹å¹¶ä¿®æ”¹æ¸²æŸ“ç»“æœï¼Œè¿™æ„å‘³ç€å¯ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç”± render &lt;strong&gt;è¾“å‡º&lt;/strong&gt;çš„ä»»ä½• React å…ƒç´ ä¸­è¯»å–ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ props&lt;/li&gt;
&lt;li&gt;è¯»å–å’Œä¿®æ”¹ç”± render è¾“å‡ºçš„ React å…ƒç´ æ ‘&lt;/li&gt;
&lt;li&gt;æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ æ ‘&lt;/li&gt;
&lt;li&gt;æŠŠæ ·å¼åŒ…è£¹è¿›å…ƒç´ æ ‘ï¼ˆå°±åƒåœ¨ &lt;code&gt;Props Proxy&lt;/code&gt; ä¸­çš„é‚£æ ·ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;myHOC&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;WrappedComponent&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Enhancer&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;WrappedComponent&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    render() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.props.show) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.render()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‰é¢æåˆ°äº†é«˜é˜¶ç»„ä»¶å¯ä»¥é€šè¿‡ this è®¿é—®åˆ° WrappedComponent çš„ stateï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œç¼–è¾‘ã€åˆ é™¤ï¼Œä½†è¿™ä¼šä½¿å¾— WrappedComponent çš„å†…éƒ¨çŠ¶æ€æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œåº”é¿å…è¿™æ ·ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é«˜é˜¶ç»„ä»¶ä¸ Mixin çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/decorator3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;é«˜é˜¶ç»„ä»¶æ›´ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼ŒåŸç»„ä»¶ä¸ä¼šæ„ŸçŸ¥åˆ°é«˜é˜¶ç»„ä»¶çš„å­˜åœ¨ï¼Œæœ€åæˆ‘ä»¬æ‰€ä½¿ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œä»è€Œé¿å…äº† Mixin çš„é‚£äº›å¼Šç—…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äº”ã€å‚è€ƒå†…å®¹&quot;&gt;&lt;a href=&quot;#äº”ã€å‚è€ƒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;äº”ã€å‚è€ƒå†…å®¹&quot;&gt;&lt;/a&gt;äº”ã€å‚è€ƒå†…å®¹&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/26918038/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šæ·±å…¥ReactæŠ€æœ¯æ ˆã€‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://efe.baidu.com/blog/introduction-to-es-decorator/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ES Decoratorsç®€ä»‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/24776678&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ·±å…¥ç†è§£ React é«˜é˜¶ç»„ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/1*o6Q0MpSmQni2Q_sB5y9jig.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;äº”æœˆæ˜¯å­¦ä¹ çš„å¥½æ—¶èŠ‚å•Šï¼Œç¿»ç¿»ä¹¦ç»§ç»­å­¦ä¹ ä¸€ä¸‹è®¾è®¡æ¨¡å¼å§ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åˆ°&lt;code&gt;è£…é¥°è€…æ¨¡å¼&lt;/code&gt;äº†ã€‚æ¥ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¹¦é‡Œçš„ &lt;code&gt;AOP&lt;/code&gt; æ˜¯å•¥ï¼Ÿå­¦ä¹ ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æ–°æ—¶ä»£äº†å†çœ‹çœ‹ ES7 è§„èŒƒçš„ &lt;code&gt;decorator&lt;/code&gt; å§ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å•Šè¿˜æœ‰ &lt;code&gt;React é«˜é˜¶ç»„ä»¶&lt;/code&gt;çš„äº‹å„¿å‘¢ï¼Œéƒ½å­¦åˆ°è¿™äº†ï¼Œä¸å·®è¿™ä¸€ä¼šå„¿ã€‚ã€‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="javascript react" scheme="https://blog.colafornia.me/categories/javascript-react/"/>
    
    
  </entry>
  
  <entry>
    <title>Git åŸç†åº”çŸ¥åº”ä¼š</title>
    <link href="https://blog.colafornia.me/post/2018/dive-into-git/"/>
    <id>https://blog.colafornia.me/post/2018/dive-into-git/</id>
    <published>2018-05-08T05:10:00.000Z</published>
    <updated>2019-10-24T02:22:04.197Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;åˆå­¦ç¼–ç¨‹æ—¶ï¼ŒGit ç®—æ˜¯æœ€ä»¤äººå¿ƒæœ‰ä½™æ‚¸çš„ Boss äº†ï¼Œæ¯•ç«Ÿç›¸æ¯”äºå†™å‡º Bug è¿™ç§å¸¸è§äº‹æƒ…ï¼ŒæŠŠè‡ªå·±/åˆ«äººä»£ç å¼„ä¸¢è¿™ç§äº‹æ›´ä¸ºå¯æ€•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åªä»‹ç» Git åŸç†ä¸­æœ€ä¸ºç¡¬æ ¸çš„éƒ¨åˆ†ï¼Œå¦‚æœæƒ³æŠŠæ‰€æœ‰åŸç†éƒ½æ¢ç©¶æ˜ç™½ï¼Œå†…å®¹å¤šåˆ°å¯ä»¥å†™æœ¬ä¹¦ã€‚å› æ­¤ï¼Œæœ¬æ–‡åªè¯•å›¾è§£ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Git æ˜¯æ€ä¹ˆå­˜å‚¨å†…å®¹çš„ï¼Ÿå­˜åˆ°å“ªé‡Œäº†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“ï¼Œå„ç§æ•™ç¨‹é‡Œè¿™ä»¨åè¯ä¸€çœ‹å°±æ™•ï¼Œèƒ½è¯´äººè¯å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;git reset æ¥ï¼Œgit reset å»ï¼Œæ„Ÿè§‰å•¥éƒ½èƒ½ resetï¼Œæˆ‘åˆ°åº•åœ¨å¹²å•¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Git å¿«åœ¨å“ªé‡Œï¼Ÿå¤§ç¥éƒ½è¯´ Git å¥½ç”¨ï¼Œæ€ä¹ˆè¿˜è¿™ä¹ˆéš¾å­¦ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;Letâ€™s go!&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ä¸€ã€Git-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä¸€ã€Git-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Git ç®€ä»‹&quot;&gt;&lt;/a&gt;ä¸€ã€Git ç®€ä»‹&lt;/h3&gt;&lt;p&gt;é¦–å…ˆå›é¡¾ä¸€ä¸‹ Git æ˜¯ä»€ä¹ˆï¼ŒGit æ˜¯ä¸€ä¸ª&lt;code&gt;åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆDistributed Version Control System - DVCSï¼‰&lt;/code&gt;ã€‚ç”± Linux ä¹‹çˆ¶ Linus Torvalds ç”¨ä¸¤å‘¨æ—¶é—´å†™å‡ºäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚ç»è¿‡åå¤šå¹´çš„å‘å±•ï¼ŒGit çš„å†…éƒ¨è®¾è®¡åŸºæœ¬æ²¡æœ‰å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä¸å…ˆå‰æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ &lt;code&gt;SVN&lt;/code&gt; ç›¸æ¯”ï¼ŒåŒºåˆ«åœ¨äºï¼Œé™¤äº†ä¸­å¤®ä»“åº“ï¼Œè¿˜æœ‰æœ¬åœ°ä»“åº“ã€‚ä¸­å¤®ä»“åº“ä»…è´Ÿè´£åŒæ­¥å›¢é˜Ÿä»£ç ï¼Œå…¶å®ƒå¦‚æŸ¥çœ‹å†å²ï¼Œæäº¤ä»£ç ç­‰æ“ä½œå¯ä»¥åœ¨æˆå‘˜çš„æœ¬åœ°ä»“åº“ä¸­è¿›è¡Œã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒSVN å­˜å‚¨çš„æ˜¯ç‰ˆæœ¬é—´çš„æ–‡ä»¶å·®å¼‚ï¼ŒGit å­˜å‚¨çš„åˆ™æ˜¯æ¯ä¸€ä¸ªç‰ˆæœ¬çš„&lt;code&gt;å¿«ç…§&lt;/code&gt;ï¼Œåé¢æˆ‘ä»¬å°†è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€Git-æ–‡ä»¶ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#äºŒã€Git-æ–‡ä»¶ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€Git æ–‡ä»¶ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;äºŒã€Git æ–‡ä»¶ç³»ç»Ÿ&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å¯¹äº Git çš„ä½¿ç”¨ï¼Œéƒ½æ˜¯åœ¨ä½¿ç”¨å‘½ä»¤ï¼Œä¾‹å¦‚ &lt;code&gt;git add&lt;/code&gt;ï¼Œ&lt;code&gt;git commit&lt;/code&gt; ç­‰ï¼Œå®ƒä»¬éƒ½å±äº Git çš„&lt;code&gt;é«˜å±‚å‘½ä»¤&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;git help -a&lt;/code&gt; æŸ¥çœ‹æ‰€æœ‰çš„ Git å‘½ä»¤ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git1.jpg&quot; alt=&quot;dive-into-git1&quot;&gt;&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼ŒGit æœ‰ä¸€ç™¾å¤šä¸ªå‘½ä»¤ï¼Œå…¶ä¸­&lt;code&gt;åº•å±‚å‘½ä»¤&lt;/code&gt;è¢«è®¾è®¡ä¸º Unix é£æ ¼ï¼Œç”±è„šæœ¬è°ƒç”¨ï¼Œå¹¶ä¸å¸¸ç”¨ã€‚æˆ‘ä»¬å¹³æ—¶æ‰€ä½¿ç”¨çš„&lt;code&gt;é«˜å±‚å‘½ä»¤&lt;/code&gt;è®¾è®¡çš„æ›´ä¸ºå‹å¥½ï¼ˆå¯ä»¥ç†è§£ä¸ºæ˜¯è¢«é«˜åº¦å°è£…è¿‡çš„ç°æˆå·¥å…·ï¼‰ã€‚å› æ­¤ï¼Œæƒ³è¦äº†è§£ Git åŸç†å°±å¿…é¡»ä»&lt;code&gt;åº•å±‚å‘½ä»¤&lt;/code&gt;å…¥æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://yanhaijing.com/blog/464.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ¯å½“æ‰§è¡Œ &lt;code&gt;git init&lt;/code&gt; æ—¶ï¼ŒGit ä¾¿ä¼šåˆ›å»ºä¸€ä¸ª &lt;code&gt;.git&lt;/code&gt; ç›®å½•ï¼Œå‡ ä¹ Git æ‰€å‚¨å­˜ï¼Œæ“ä½œçš„æ‰€æœ‰å†…å®¹éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼ˆå¦‚æœæƒ³æ‹·è´ä¸€ä¸ª Git ä»“åº“ï¼Œæ‹·è´è¿™ä¸ªç›®å½•å³å¯ï¼‰ã€‚äº†è§£ Git åŸç†ä¹Ÿå¯ä»¥ç§°ä¸ºäº†è§£è¿™ä¸ªè¿™ä¸ªç›®å½•å„éƒ¨åˆ†æ˜¯åšä»€ä¹ˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git2.jpg&quot; alt=&quot;dive-into-git2&quot;&gt;&lt;br&gt;ï¼ˆå›¾ä¸­æ˜¯æˆ‘çš„ä¸€ä¸ªå°é¡¹ç›®çš„ &lt;code&gt;.git&lt;/code&gt; ç›®å½•ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡é’ˆ (HEAD, FETCH_HEAD, ORIG_HEAD)&lt;/li&gt;
&lt;li&gt;å¯¹è±¡&lt;ul&gt;
&lt;li&gt;objects/ï¼ˆæ‰€æœ‰çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬blobï¼Œ treeï¼Œ commitï¼‰&lt;/li&gt;
&lt;li&gt;refs/ ï¼ˆæ‰€æœ‰çš„å¼•ç”¨ï¼‰&lt;ul&gt;
&lt;li&gt;local branch&lt;/li&gt;
&lt;li&gt;remote branch&lt;/li&gt;
&lt;li&gt;tag&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;index (ç´¢å¼•)&lt;/li&gt;
&lt;li&gt;config (è®¾ç½®)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç»ä¸€ä¸‹ objects å’Œ refs ä¸¤ä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-objects&quot;&gt;&lt;a href=&quot;#1-objects&quot; class=&quot;headerlink&quot; title=&quot;1. objects&quot;&gt;&lt;/a&gt;1. objects&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git7.jpg&quot; alt=&quot;dive-into-git7&quot;&gt;&lt;br&gt;ï¼ˆåˆšåˆå§‹åŒ–çš„é¡¹ç›®ï¼Œobjects ç›®å½•ä¸‹åªæœ‰ä¸¤ä¸ªç©ºæ–‡ä»¶å¤¹ï¼‰&lt;/p&gt;
&lt;p&gt;é¦–å…ˆçœ‹ä¸€ä¸‹æœ€åŸºæœ¬çš„éƒ¨åˆ†ï¼Œobjects ç›®å½•ï¼ŒGit æ‰€å­˜å‚¨çš„æ•°æ®éƒ½åœ¨è¿™é‡Œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ Git åˆ°åº•æ˜¯æ€ä¹ˆå­˜å‚¨å†…å®¹çš„å§ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢æåˆ°äº† Git å­˜å‚¨çš„æ˜¯&lt;code&gt;å¿«ç…§&lt;/code&gt;ï¼Œè¿™å®é™…ä¸Šè¯´çš„æ˜¯ &lt;code&gt;SHA-1 å“ˆå¸Œå€¼&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Git ä¸ºæ¯ä»½å†…å®¹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œå–å¾—å…¶ SHA-1 å“ˆå¸Œå€¼ï¼Œç”¨å“ˆå¸Œå€¼çš„å‰ä¸¤ä¸ªå­—ç¬¦ä¸ºåç§°åˆ›å»ºå­ç›®å½•ï¼Œç”¨å‰©ä¸‹ 38 ä¸ªå­—ç¬¦ä¸ºæ–‡ä»¶å‘½å (ä¿å­˜è‡³å­ç›®å½•ä¸‹)ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¬èµ·æ¥æœ‰ç‚¹ç»•å£ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ‰‹æ“ä½œå®éªŒä¸€ä¸‹ï¼Œé€šè¿‡åº•å±‚å‘½ä»¤ &lt;code&gt;hash-object&lt;/code&gt; å¯ä»¥è®¡ç®—å†…å®¹çš„ SHA-1 å€¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git3.jpg&quot; alt=&quot;dive-into-git3&quot;&gt;&lt;br&gt;å­—ç¬¦ä¸² hello git çš„å“ˆå¸Œç»“æœæ˜¯ &lt;code&gt;8d0e41234f24b6da002d962a26c2495ea16a425f&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŠŠè¿™æ®µå­—ç¬¦ä¸²ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å†è®¡ç®— SHA-1ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git4.jpg&quot; alt=&quot;dive-into-git4&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¾—åˆ°äº†ä¸€æ ·çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ”¹å˜ä¸€ä¸‹æ–‡ä»¶çš„æ–‡æœ¬å†…å®¹ï¼Œå“ˆå¸Œå€¼åˆ™å‘ç”Ÿäº†æ”¹å˜ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git5.jpg&quot; alt=&quot;dive-into-git5&quot;&gt;&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Git ç”±æ–‡ä»¶å†…å®¹è®¡ç®—å…¶å“ˆå¸Œå€¼&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œå€¼ç›¸åŒåˆ™æ–‡ä»¶å†…å®¹ç›¸åŒï¼ˆå³ä½¿æˆ‘ä»¬å°†ä¸€ä¸ªæ–‡ä»¶æ‹·è´åˆ°ä¸åŒç›®å½•ä¸‹ï¼ŒGit ä¹Ÿä»…å­˜å‚¨ä¸€ä»½å†…å®¹ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬æŠŠ hello.txt æ–‡ä»¶æäº¤ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git8.jpg&quot; alt=&quot;dive-into-git8&quot;&gt;&lt;/p&gt;
&lt;p&gt;å†çœ‹ä¸€ä¸‹ objects ç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git6.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°å¤šäº†ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼å…¶ä¸­ 8d æ–‡ä»¶å¤¹å’Œå­æ–‡ä»¶ååŠ èµ·æ¥ï¼ˆ&lt;code&gt;8d0e4123...&lt;/code&gt;ï¼‰æ­£å¥½æ˜¯å­—ç¬¦ä¸² hello git çš„å“ˆå¸Œç»“æœã€‚è€Œ 10 æ–‡ä»¶å¤¹åˆ™æ˜¯æœ¬æ¬¡ commit çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº† &lt;code&gt;hash-object&lt;/code&gt; å‘½ä»¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½ç”¨çš„åº•å±‚å‘½ä»¤ &lt;code&gt;cat-file&lt;/code&gt;ï¼Œå®ƒå¯ä»¥å°†æ•°æ®å†…å®¹å–å›ï¼Œä¼ å…¥ &lt;code&gt;-p&lt;/code&gt; å‚æ•°å¯ä»¥è®©è¯¥å‘½ä»¤è¾“å‡ºæ•°æ®å†…å®¹çš„ç±»å‹ã€‚æˆ‘ä»¬æ‹¿ commit çš„å“ˆå¸Œå€¼è¯•ä¸€è¯•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git9.jpg&quot; alt=&quot;dive-into-git9&quot;&gt;&lt;br&gt;æˆ‘ä»¬å¾—åˆ°äº† commit å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†æœ¬æ¬¡æäº¤çš„æ—¶é—´ï¼Œcommit messageï¼Œæäº¤è€…ä¿¡æ¯ï¼Œä»¥åŠä¸€ä¸ªç±»å‹ä¸º &lt;code&gt;tree&lt;/code&gt; çš„å“ˆå¸Œå€¼ 07ed5a7ã€‚å¯¹å…¶å–å€¼æŸ¥çœ‹ï¼Œå‘ç°äº†ç¬¬ä¸‰ä¸ªå“ˆå¸Œå¯¹è±¡ï¼Œç±»å‹ä¸º blobï¼Œå…¶å“ˆå¸Œå€¼ä¸º hello.txt å†…å®¹çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‰ä¸ªå“ˆå¸Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git10.jpg&quot; alt=&quot;dive-into-git10&quot;&gt;&lt;br&gt;åœ¨æ­¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ä¸‰ç§ &lt;code&gt;Git åŸºæœ¬å¯¹è±¡&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Blob å¯¹è±¡ï¼šå¯¹å•ä¸ªæ–‡ä»¶çš„å‹ç¼©å­˜å‚¨&lt;/li&gt;
&lt;li&gt;Tree å¯¹è±¡ï¼šå¯¹æ–‡ä»¶ç›®å½•æ ‘çš„å­˜å‚¨&lt;/li&gt;
&lt;li&gt;Commit å¯¹è±¡ï¼šå¯¹ tree å¯¹è±¡çš„åŒ…è£…ï¼Œå¸¦æœ‰å…¶å®ƒæäº¤ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ä»“åº“ä¸­çš„ä¸€ä¸ªå¸¸è§„é¡¹ç›®ç»“æ„ï¼Œåœ¨ .git ä¸­ä¼šå­˜å‚¨ä¸ºå³å›¾æ‰€ç¤ºçš„ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git12.jpg&quot; alt=&quot;dive-into-git12&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å†æŠŠ bye.txt ä¹Ÿæäº¤äº†ã€‚å¯ä»¥å‘ç°æ–°çš„ commit å“ˆå¸Œå¯¹è±¡ä¸­è¿˜åŒ…å«äº† parent ä¿¡æ¯ï¼Œå…¶å€¼ä¸ºä¸Šä¸€ä¸ª commit çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Git history ä¸­çš„å„ä¸ª commit å…¶å®æ˜¯ä¸€ä¸ª&lt;code&gt;å•å‘é“¾è¡¨&lt;/code&gt;çš„ç»“æ„ï¼Œé€šè¿‡ parent å…³è”çˆ¶èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git11.jpg&quot; alt=&quot;dive-into-git11&quot;&gt;&lt;br&gt;å…¶ä¸­æ¯ä¸ª commit ä¸­éƒ½åŒ…å«äº†å½“æ—¶ä»“åº“çš„ç›®å½•ç»“æ„ä¸æ–‡ä»¶å†…å®¹ã€‚è¿™ä¾¿æ˜¯è¾¾æˆç‰ˆæœ¬ç®¡ç†çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2-refs&quot;&gt;&lt;a href=&quot;#2-refs&quot; class=&quot;headerlink&quot; title=&quot;2. refs&quot;&gt;&lt;/a&gt;2. refs&lt;/h4&gt;&lt;p&gt;refs ç›®å½•å­˜å‚¨äº†æ‰€æœ‰çš„å¼•ç”¨æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git13.jpg&quot; alt=&quot;dive-into-git13&quot;&gt;&lt;br&gt;å¼•ç”¨æ–‡ä»¶çš„å†…å®¹ä¹Ÿéƒ½æ˜¯ 40 ä½çš„ SHA-1 å€¼ã€‚å…ˆçœ‹ä¸€ä¸‹ master æ˜¯ä»€ä¹ˆï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cat .git/refs/heads/master&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å“ˆå¸Œå€¼ä¸º &lt;code&gt;38779e1ee3e4959e21e599ad0974a2c915613d9e&lt;/code&gt;ï¼Œå°±æ˜¯ç¬¬äºŒæ¬¡æäº¤ commit çš„å“ˆå¸Œå€¼ã€‚æˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œ&lt;strong&gt;branch å…¶å®å°±æ˜¯ commit çš„å¼•ç”¨&lt;/strong&gt;ã€‚ä¸ºäº†éªŒè¯ä¸€ä¸‹è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªåˆ†æ”¯è¯•è¯•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git14.jpg&quot; alt=&quot;dive-into-git14&quot;&gt;&lt;br&gt;å¯ä»¥å‘ç°ï¼Œrefs ç›®å½•ä¸­å¤šäº†ä¸€ä¸ªä¸æ–°åˆ†æ”¯åŒåçš„æ–‡ä»¶ï¼Œä¸”å…¶å“ˆå¸Œå€¼ä¾ç„¶ä¸ºç¬¬äºŒæ¬¡æäº¤ commit çš„å“ˆå¸Œå€¼ã€‚æ‰€ä»¥æˆ‘ä»¬çš„çŒœæƒ³æ²¡é”™ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å½“æˆ‘ä»¬æ–°å»º new-branch åˆ†æ”¯æ—¶ï¼ŒGit æ˜¯æ€ä¹ˆçŸ¥é“æœ€åä¸€æ¬¡æäº¤çš„ SHA-1 å€¼å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ &lt;code&gt;HEAD æ–‡ä»¶&lt;/code&gt;ã€‚&lt;strong&gt;&lt;code&gt;HEAD æ–‡ä»¶&lt;/code&gt;æ˜¯ä¸€ä¸ªæŒ‡å‘ä½ å½“å‰æ‰€åœ¨åˆ†æ”¯çš„å¼•ç”¨æ ‡è¯†ç¬¦&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡æŸ¥æ‰¾ log æ—¶çœ‹åˆ°çš„ HEAD æ ‡è®°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git15.jpg&quot; alt=&quot;dive-into-git15&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»‹ç»åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°&lt;strong&gt;Git ä¸­çš„å¼•ç”¨æ˜¯éå¸¸å»‰ä»·çš„&lt;/strong&gt;ï¼Œå¼€æ–°çš„ branch å’Œ tag éƒ½åªæ˜¯å¤šäº†ä¸€ä¸ªå¼•ç”¨æ–‡ä»¶ï¼Œè€Œæœ‰äº›ä¸­å¤®å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¼€åˆ†æ”¯æ—¶ä¼šå¤åˆ¶ä¸€ä»½å†…å®¹ï¼Œéå¸¸è€—è´¹èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;åˆ†æ”¯æ˜¯ä¸€ç§ç§»åŠ¨çš„å¼•ç”¨ã€‚è€Œæ ‡ç­¾åˆ™æ˜¯é™æ­¢çš„å¼•ç”¨ã€‚&lt;code&gt;.git/refs&lt;/code&gt; ç›®å½•ä¸‹çš„ tags ç›®å½•å°±æ˜¯ä¿å­˜æ ‡ç­¾ä¿¡æ¯çš„åœ°æ–¹ï¼Œæ ‡ç­¾åŒæ ·ä¹Ÿæ˜¯ commit å¯¹è±¡çš„å¼•ç”¨ï¼Œåªæ˜¯å®ƒ&lt;strong&gt;æ°¸è¿œæŒ‡å‘åŒä¸€ä¸ª commitï¼Œä¸ä¼šå˜åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åä¸€ç§å¼•ç”¨ç±»å‹æ˜¯ &lt;code&gt;remote reference è¿œç¨‹å¼•ç”¨&lt;/code&gt;ï¼Œæˆ‘ä»¬æ¯æ¬¡æ‰§è¡Œå°†æäº¤ push åˆ°è¿œç«¯åï¼Œ&lt;code&gt;.git/refs/remotes/&lt;/code&gt; ç›®å½•ä¸‹å°±ä¼šè®°å½•æ­¤æ¬¡ä¸è¿œç«¯é€šä¿¡çš„æœ€åä¸€ä¸ª commit çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ Git çš„å¼•ç”¨æ–‡ä»¶å¼ºç›¸å…³çš„é«˜å±‚å‘½ä»¤æ˜¯ &lt;code&gt;git reset [--soft | --mixed | --hard | --merge | --keep] [-q] [&amp;lt;commit&amp;gt;]&lt;/code&gt;ï¼Œè™½ç„¶è¿™ä¸ªå‘½ä»¤åé¢å¯ä»¥åŠ å¾ˆå¤šå‚æ•°ï¼Œä½†å®é™…ä¸Šå®ƒä»¬æ‰€æ“ä½œçš„éƒ½æ˜¯ &lt;code&gt;.git/refs/heads&lt;/code&gt; ç›®å½•ä¸‹å½“å‰åˆ†æ”¯å¯¹åº”çš„å¼•ç”¨æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰ã€Git-æš‚å­˜åŒº&quot;&gt;&lt;a href=&quot;#ä¸‰ã€Git-æš‚å­˜åŒº&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ã€Git æš‚å­˜åŒº&quot;&gt;&lt;/a&gt;ä¸‰ã€Git æš‚å­˜åŒº&lt;/h3&gt;&lt;p&gt;å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“ï¼Œè¿™ä¸‰ä¸ªåè¯æ˜¯æˆ‘ä¸€å¼€å§‹çœ‹å„ç§ Git æ•™ç¨‹æ—¶æœ€è„‘é˜”ç–¼çš„ä¸œè¥¿ï¼Œæ¯æ¬¡éƒ½è¦å°å¿ƒè¾¨è®¤ï¼Œå†å¿ƒé‡Œé»˜å¿µä¸€éæ‰åˆ†çš„æ¸…æ¥šã€‚å…¶ä¸­å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“è¿˜å¥½ç†è§£ï¼Œ&lt;code&gt;æš‚å­˜åŒº&lt;/code&gt; æ˜¯æœ€ä¸ºæ‡µé€¼çš„ä¸€ä¸ªæ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ¥çœ‹çœ‹ Git æš‚å­˜åŒºåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªä¸œè¥¿å‘¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ .git ç›®å½•ä¸‹ä¸­æœ‰ä¸€ä¸ª index æ–‡ä»¶å®ƒä¸æš‚å­˜åŒºçš„æ¦‚å¿µç›¸å…³ï¼Œæˆ‘ä»¬åŠ¨æ‰‹å®éªŒçœ‹çœ‹å®ƒæ˜¯å¹²å•¥çš„ã€‚å°±ç€å‰é¢çš„å®éªŒï¼Œæˆ‘ä»¬ç»§ç»­æ“ä½œä¸€ä¸‹ï¼Œæ”¹ä¸€ä¸‹ hello.txt çš„å†…å®¹ï¼Œç„¶åæ‰§è¡Œ &lt;code&gt;git checkout&lt;/code&gt; æ’¤é”€å¯¹è¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git16.jpg&quot; alt=&quot;dive-into-git16&quot;&gt;&lt;br&gt;æ’¤é”€åå·¥ä½œåŒºå·²ç»æ²¡æœ‰æ–‡ä»¶æ”¹åŠ¨äº†ï¼Œå‘ç° &lt;code&gt;.git/index&lt;/code&gt;æ–‡ä»¶çš„æ—¶é—´æˆ³æ˜¯ 17:02:00ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git17.jpg&quot; alt=&quot;dive-into-git17&quot;&gt;&lt;br&gt;å†é€šè¿‡ &lt;code&gt;git status&lt;/code&gt; çœ‹ä¸€ä¸‹å·¥ä½œåŒºçŠ¶æ€ï¼Œå‘ç° &lt;code&gt;.git/index&lt;/code&gt; æ–‡ä»¶çš„æ—¶é—´æˆ³æ²¡æœ‰å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç”¨ Linux å‘½ä»¤ &lt;code&gt;touch&lt;/code&gt; æ”¹ä¸€ä¸‹ hello.txt çš„æ—¶é—´æˆ³å†çœ‹çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dive-into-git/dive-into-git18.jpg&quot; alt=&quot;dive-into-git18&quot;&gt;&lt;br&gt;å‘ç°è™½ç„¶æ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œ&lt;code&gt;.git/index&lt;/code&gt; æ–‡ä»¶çš„æ—¶é—´æˆ³å´å‘ç”Ÿäº†æ”¹å˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸º &lt;code&gt;git status&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹å·¥ä½œåŒºçŠ¶æ€æ—¶ï¼Œå…ˆæ ¹æ® .git/index æ–‡ä»¶ä¸­è®°å½•çš„æ—¶é—´æˆ³ï¼Œé•¿åº¦ç­‰ä¿¡æ¯åˆ¤æ–­å·¥ä½œåŒºæ–‡ä»¶æ˜¯å¦æ”¹å˜ã€‚å¦‚æœæ—¶é—´æˆ³å˜äº†ï¼Œè¯´æ˜æ–‡ä»¶&lt;strong&gt;æœ‰å¯èƒ½&lt;/strong&gt;å‘ç”Ÿæ”¹å˜ï¼ŒGit éœ€è¦è¯»å–æ–‡ä»¶ï¼Œä¸åŸå§‹æ–‡ä»¶è¿›è¡Œå¯¹æ¯”ï¼Œå»åˆ¤æ–­å®ƒæ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœæ²¡æœ‰æ”¹å˜ï¼Œåˆ™å°†æ–‡ä»¶æ–°çš„æ—¶é—´æˆ³è®°å½•åˆ° .git/index æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å› ä¸ºåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ›´æ”¹ï¼Œä½¿ç”¨æ—¶é—´æˆ³ã€æ–‡ä»¶é•¿åº¦ç­‰ä¿¡æ¯è¿›è¡Œæ¯”è¾ƒè¦æ¯”é€šè¿‡æ–‡ä»¶å†…å®¹æ¯”è¾ƒè¦å¿«çš„å¤š&lt;/strong&gt;ï¼Œæ‰€ä»¥ Git è¿™æ ·çš„å®ç°æ–¹å¼å¯ä»¥è®©å·¥ä½œåŒºçŠ¶æ€æ‰«ææ›´å¿«é€Ÿçš„æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯ Git é«˜æ•ˆçš„å› ç´ ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;.git/index æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒ…å«æ–‡ä»¶ç´¢å¼•çš„ç›®å½•æ ‘ï¼Œå°±æ˜¯æ‰€è°“çš„&lt;code&gt;æš‚å­˜åŒº&lt;/code&gt;&lt;/strong&gt;ï¼Œå®ƒè®°å½•äº†æ–‡ä»¶çš„åç§°ï¼Œæ—¶é—´æˆ³ï¼Œé•¿åº¦ç­‰ä¿¡æ¯ï¼Œä½†å¹¶ä¸å‚¨å­˜æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¾ç„¶ä½äº &lt;code&gt;.git/objects&lt;/code&gt; ä¸­ã€‚&lt;code&gt;.git/index&lt;/code&gt; ä¸­çš„ç´¢å¼•å»ºç«‹äº†æ–‡ä»¶å’Œå¯¹è±¡åº“ä¸­å¯¹è±¡å®ä½“ä¹‹é—´çš„å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.worldhello.net/wpfiles/2010/11/git-stage.png&quot; alt=&quot;index&quot;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­ç‰ˆæœ¬åº“ä¸­çš„ index åŒºåŸŸå°±æ˜¯æš‚å­˜åŒºï¼Œå¯ä»¥çœ‹åˆ° index åŒºåŸŸä¸ master åŒºåŸŸå…¶å®éƒ½æ˜¯å¯¹ objects ä¸­å­˜å‚¨çš„æ–‡ä»¶å†…å®¹çš„ç´¢å¼•ã€‚ä¸å…ˆå‰äº†è§£åˆ°çš„ä¸€è‡´ï¼Œæ¸¸æ ‡å½¢çŠ¶çš„ &lt;code&gt;HEAD&lt;/code&gt; æ˜¯ä¸€ä¸ªæŒ‡å‘å½“å‰æ‰€åœ¨åˆ†æ”¯çš„æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ä¸­è¿˜åˆ—å‡ºäº† Git å‘½ä»¤æ˜¯å¦‚ä½•å½±å“å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ &lt;code&gt;git reset HEAD&lt;/code&gt; å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git reset&lt;/code&gt; æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;git reset [--soft | --mixed | --hard | --merge | --keep] [-q] [&amp;lt;commit&amp;gt;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git reset [-q] [&amp;lt;commit&amp;gt;] [--] &amp;lt;paths&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨å‰é¢æˆ‘ä»¬äº†è§£åˆ°ç¬¬ä¸€ç§ä½¿ç”¨æ–¹æ³•å®é™…ä¸Šæ˜¯æ”¹å˜äº†å¼•ç”¨æ–‡ä»¶ã€‚ git reset çš„ç¬¬äºŒç§ä½¿ç”¨æ–¹æ³•å¹¶ä¸ä¼šæ”¹å˜å¼•ç”¨ï¼Œå®ƒä¼šç”¨å·²ç» commit åˆ°ç‰ˆæœ¬åº“çš„æ–‡ä»¶æ›¿æ¢æ‰æš‚å­˜åŒºä¸­çš„æ–‡ä»¶ã€‚å› æ­¤ï¼Œ&lt;code&gt;git reset HEAD &amp;lt;paths&amp;gt;&lt;/code&gt; å°±æ˜¯å–æ¶ˆä¹‹å‰æ‰§è¡Œ &lt;code&gt;git commit &amp;lt;paths&amp;gt;&lt;/code&gt; æ—¶æ‰€æ”¹å˜çš„æš‚å­˜åŒºã€‚&lt;/p&gt;
&lt;h3 id=&quot;å››ã€Git-çš„ç—›ç‚¹&quot;&gt;&lt;a href=&quot;#å››ã€Git-çš„ç—›ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;å››ã€Git çš„ç—›ç‚¹&quot;&gt;&lt;/a&gt;å››ã€Git çš„ç—›ç‚¹&lt;/h3&gt;&lt;p&gt;ç²—æµ…åœ°äº†è§£äº†ä»¥ä¸ŠåŸç†ä¹‹åï¼Œå¯¹äº Git çš„ç—›ç‚¹ä¹Ÿå¯ä»¥çª¥çŸ¥ä¸€äºŒã€‚&lt;/p&gt;
&lt;p&gt;Git çš„è¯ç”Ÿç»å†å’Œ JavaScript æœ‰äº›ç›¸ä¼¼ï¼Œéƒ½æ˜¯çŸ­æ—¶é—´å†…æ‰“é€ çš„å…µå™¨ï¼Œå…¶è®¾è®¡æ€è·¯ä¸€å¼€å§‹å°±æ˜¯å¾ˆç²—ç³™çš„ï¼Œç”šè‡³æœ‰äº›ä¸åˆç†åäººç±»çš„åœ°æ–¹ã€‚ï¼ˆä½†æ˜¯ JavaScript è¿˜æœ‰ ECMAScript ä¸€å¹´ä¸€å¹´çš„ä¿®è¡¥ï¼ŒGit å´æ²¡å•¥æŒ‡æœ›æ”¹è¿›äº†â€¦â€¦ï¼‰&lt;/p&gt;
&lt;p&gt;æœ€æ˜æ˜¾çš„ä¸€ä¸ªç—›ç‚¹æ˜¯ï¼Œä¸€ä¸ª Git å‘½ä»¤èº«å…¼æ•°èŒçš„æƒ…å†µéå¸¸å¤šï¼ˆgit rebaseï¼Œgit resetï¼Œgit checkout æ˜¯é‡ç¾åŒºï¼‰ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆæ–°æ‰‹å…¥é—¨æ—¶æ¯å¤©ä¸€è„¸æ‡µé€¼çš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;Git æœ¬èº«çš„è®¾è®¡ç†å¿µæ˜¯éå¸¸æ¸…æ™°æ˜ç¡®çš„ï¼Œå¦‚æœå¯ä»¥é‡æ–°è®¾è®¡çš„è¯ï¼Œå¸Œæœ›æŒ‡ä»¤å¯ä»¥ä¸å…¶è®¾è®¡æ€è·¯ç»Ÿä¸€ï¼ŒæŒ‡ä»¤åˆ†ä¸ºå››ç±»ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;æ“ä½œå½“å‰æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;æ“ä½œåˆ†æ”¯&lt;/li&gt;
&lt;li&gt;æ“ä½œç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;æ“ä½œå·¥ä½œç¯å¢ƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰ä¸€ç¯‡è®ºæ–‡&lt;a href=&quot;https://groups.csail.mit.edu/sdg/pubs/2016/gitless-oopsla16.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠPurposes, Concepts, Misfits, and a Redesign of Gitã€‹&lt;/a&gt;ä¸“é—¨åˆ†æ Git çš„è®¾è®¡é—®é¢˜ã€‚æœ€åè®¾è®¡äº†ä¸€æ¬¾æ–°å·¥å…·å« Gitlessã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è¿™ä¸€ç‚¹ä¹‹å¤–ï¼Œç”±äº Git å­˜å‚¨çš„æ˜¯æ–‡ä»¶å¿«ç…§ï¼Œå¦‚æœé¡¹ç›®éœ€è¦é¢‘ç¹ä¿®æ”¹å¤§æ–‡ä»¶çš„è¯å¾ˆå®¹æ˜“é€ æˆå­˜å‚¨åº“çš„è†¨èƒ€ï¼Œè¿™ä¸€ç‚¹è™½ç„¶æœ‰&lt;a href=&quot;https://blog.colafornia.me/2018/03/09/slove-git-clone-speed/&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/a&gt;ï¼Œä½†ä¸å¯å¦è®¤ä¾ç„¶æ˜¯å…¶ç—›ç‚¹ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äº”ã€æœ€å&quot;&gt;&lt;a href=&quot;#äº”ã€æœ€å&quot; class=&quot;headerlink&quot; title=&quot;äº”ã€æœ€å&quot;&gt;&lt;/a&gt;äº”ã€æœ€å&lt;/h3&gt;&lt;p&gt;é™¤äº†ä»¥ä¸Šä»‹ç»åˆ°çš„å†…å®¹ï¼Œgit rebaseï¼Œgit reflogï¼Œgit checkoutï¼Œgit cherry-pick ä¹Ÿéƒ½æ˜¯å€¼å¾—æ¢ç©¶çš„å‘½ä»¤ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‚è€ƒå†…å®¹ï¼š&quot;&gt;&lt;a href=&quot;#å‚è€ƒå†…å®¹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒå†…å®¹ï¼š&quot;&gt;&lt;/a&gt;å‚è€ƒå†…å®¹ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git Internals&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gotgit.readthedocs.io/en/latest/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git æƒå¨æŒ‡å—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://yanhaijing.com/git/2017/02/08/deep-git-3/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;èµ·åº•Git-Gitå†…éƒ¨åŸç†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/dive-into-git/cover.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;åˆå­¦ç¼–ç¨‹æ—¶ï¼ŒGit ç®—æ˜¯æœ€ä»¤äººå¿ƒæœ‰ä½™æ‚¸çš„ Boss äº†ï¼Œæ¯•ç«Ÿç›¸æ¯”äºå†™å‡º Bug è¿™ç§å¸¸è§äº‹æƒ…ï¼ŒæŠŠè‡ªå·±/åˆ«äººä»£ç å¼„ä¸¢è¿™ç§äº‹æ›´ä¸ºå¯æ€•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åªä»‹ç» Git åŸç†ä¸­æœ€ä¸ºç¡¬æ ¸çš„éƒ¨åˆ†ï¼Œå¦‚æœæƒ³æŠŠæ‰€æœ‰åŸç†éƒ½æ¢ç©¶æ˜ç™½ï¼Œå†…å®¹å¤šåˆ°å¯ä»¥å†™æœ¬ä¹¦ã€‚å› æ­¤ï¼Œæœ¬æ–‡åªè¯•å›¾è§£ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Git æ˜¯æ€ä¹ˆå­˜å‚¨å†…å®¹çš„ï¼Ÿå­˜åˆ°å“ªé‡Œäº†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“ï¼Œå„ç§æ•™ç¨‹é‡Œè¿™ä»¨åè¯ä¸€çœ‹å°±æ™•ï¼Œèƒ½è¯´äººè¯å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;git reset æ¥ï¼Œgit reset å»ï¼Œæ„Ÿè§‰å•¥éƒ½èƒ½ resetï¼Œæˆ‘åˆ°åº•åœ¨å¹²å•¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Git å¿«åœ¨å“ªé‡Œï¼Ÿå¤§ç¥éƒ½è¯´ Git å¥½ç”¨ï¼Œæ€ä¹ˆè¿˜è¿™ä¹ˆéš¾å­¦ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;Letâ€™s go!&lt;/p&gt;
    
    </summary>
    
      <category term="git" scheme="https://blog.colafornia.me/categories/git/"/>
    
    
  </entry>
  
  <entry>
    <title>Thrift é€Ÿè®°</title>
    <link href="https://blog.colafornia.me/post/2018/thrift-note/"/>
    <id>https://blog.colafornia.me/post/2018/thrift-note/</id>
    <published>2018-03-27T03:11:00.000Z</published>
    <updated>2019-10-24T02:22:04.206Z</updated>
    
    <content type="html">&lt;h3 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Apache Thrift&lt;/code&gt; æ˜¯ä¸€æ¬¾ &lt;code&gt;RPC&lt;/code&gt; (è·¨è¯­è¨€çš„æœåŠ¡)æ¡†æ¶ï¼Œä¼ è¾“æ•°æ®é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œç›¸å¯¹ XML å’Œ JSON ä½“ç§¯æ›´å°ï¼Œå¯¹äºé«˜å¹¶å‘ã€å¤§æ•°æ®é‡å’Œå¤šè¯­è¨€çš„ç¯å¢ƒæ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/thrift.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;RPC-æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#RPC-æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;RPC æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;RPC æ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Remote Procedure Call&lt;/code&gt; å³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;RPC æ˜¯ä¸€ä¸ª &lt;code&gt;è®¡ç®—æœºé€šä¿¡åè®®&lt;/code&gt;ã€‚è¯¥åè®®å…è®¸è¿è¡Œäºä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€å°è®¡ç®—æœºçš„å­ç¨‹åºï¼Œè€Œç¨‹åºå‘˜æ— éœ€é¢å¤–åœ°ä¸ºè¿™ä¸ªäº¤äº’ä½œç”¨ç¼–ç¨‹ã€‚ â€”â€” ä¸­æ–‡ç»´åŸº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ€»æ˜¯ç”±å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨å‘å‡ºä¸€ä¸ªæ‰§è¡Œè‹¥å¹²è¿‡ç¨‹è¯·æ±‚ï¼Œå¹¶ç”¨å®¢æˆ·ç«¯æä¾›çš„å‚æ•°ã€‚æ‰§è¡Œç»“æœå°†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;æ ‡å‡†åŒ–çš„ RPC å¤§éƒ¨åˆ†é‡‡ç”¨æ¥å£æè¿°è¯­è¨€ï¼ˆInterface Description Languageï¼ŒIDLï¼‰ï¼Œæ–¹ä¾¿è·¨å¹³å°çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äº &lt;a href=&quot;http://www.ruanyifeng.com/blog/2011/09/restful&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RESTful&lt;/a&gt;ï¼ŒRPC çš„ä¼˜åŠ¿åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨äºŒè¿›åˆ¶çš„ä¼ è¾“æ ¼å¼ï¼Œç›¸æ¯”äº RESTful é‡‡ç”¨çš„ JSON æ ¼å¼ä½“ç§¯æ›´å°é€Ÿåº¦æ›´å¿«&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šç§ä¼ è¾“åè®®ä¸ä¼ è¾“æ ¼å¼&lt;/li&gt;
&lt;li&gt;æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Thrift-æ–‡ä»¶æ¦‚è§ˆ&quot;&gt;&lt;a href=&quot;#Thrift-æ–‡ä»¶æ¦‚è§ˆ&quot; class=&quot;headerlink&quot; title=&quot;Thrift æ–‡ä»¶æ¦‚è§ˆ&quot;&gt;&lt;/a&gt;Thrift æ–‡ä»¶æ¦‚è§ˆ&lt;/h3&gt;&lt;p&gt;ä»¥ &lt;code&gt;.thrift&lt;/code&gt; ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œæ˜¯æœåŠ¡æ¶ˆè´¹æ–¹ï¼ˆConsumerï¼‰ä¸æœåŠ¡æä¾›æ–¹ï¼ˆProviderï¼‰ä¹‹é—´ç”¨æ¥è¿›è¡Œæ¥å£æè¿°ï¼ˆIDLï¼‰çš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-ä»£ç ç¤ºä¾‹ï¼š&quot;&gt;&lt;a href=&quot;#1-ä»£ç ç¤ºä¾‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;1.ä»£ç ç¤ºä¾‹ï¼š&quot;&gt;&lt;/a&gt;1.ä»£ç ç¤ºä¾‹ï¼š&lt;/h4&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// thrift æ–‡ä»¶ä¸€èˆ¬åŒ…å«ä¸¤éƒ¨åˆ†çš„å†…å®¹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 1) ç±»å‹è¯´æ˜ï¼Œç±»ä¼¼äºå‰åç«¯æ‰€çº¦å®šçš„è¯·æ±‚å¯¹è±¡æœ‰å“ªäº›å­—æ®µå€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 2) æ¥å£æœåŠ¡ Service è¯´æ˜ï¼ŒåŒ…å«ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œç±»ä¼¼äºå‰åç«¯ä¹‹é—´çº¦å®šçš„è¯·æ±‚æ–¹æ³•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// IDL ä¸­å¯ä»¥å®šä¹‰ä»¥ä¸‹ä¸€äº›ç±»å‹ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼Œç»“æ„ä½“ï¼Œå®¹å™¨ï¼Œå¼‚å¸¸ã€æœåŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ä»¥ä¸‹ IDL å®šä¹‰äº†ä¸€ä¸ªå« Sample çš„æœåŠ¡ï¼Œå…¶æœ‰ä¸€ä¸ªå« getOrderById çš„æ–¹æ³•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;struct Order &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:i64 id;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:i32 status;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service Sample&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;Order &lt;span class=&quot;title&quot;&gt;getOrderById&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:i64 id)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2-åŸºæœ¬ç±»å‹ï¼š&quot;&gt;&lt;a href=&quot;#2-åŸºæœ¬ç±»å‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;2.åŸºæœ¬ç±»å‹ï¼š&quot;&gt;&lt;/a&gt;2.åŸºæœ¬ç±»å‹ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;bool&lt;/code&gt;: å¸ƒå°”ç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;byte&lt;/code&gt;: æœ‰ç¬¦å·å­—èŠ‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;i16/i32/i64&lt;/code&gt;: 16/32/64ä½æœ‰ç¬¦å·æ•´å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;double&lt;/code&gt;: 64ä½æµ®ç‚¹æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;string&lt;/code&gt;: æœªçŸ¥ç¼–ç æˆ–è€…äºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;3-å®¹å™¨ï¼š&quot;&gt;&lt;a href=&quot;#3-å®¹å™¨ï¼š&quot; class=&quot;headerlink&quot; title=&quot;3.å®¹å™¨ï¼š&quot;&gt;&lt;/a&gt;3.å®¹å™¨ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;list&amp;lt;t1&amp;gt;&lt;/code&gt;: æ’åºæ•°ç»„ï¼Œå¯ä»¥é‡å¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;set&amp;lt;t1&amp;gt;&lt;/code&gt;: é›†åˆï¼Œæ¯ä¸ªå…ƒç´ å”¯ä¸€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;map&amp;lt;t1, t2&amp;gt;&lt;/code&gt;: key/value é”®å€¼å¯¹ï¼ˆkey çš„ç±»å‹æ˜¯ t1ä¸” key å”¯ä¸€ï¼Œvalue ç±»å‹æ˜¯ t2ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;4-é€šè¿‡-IDL-æ–‡ä»¶ç”Ÿæˆä»£ç &quot;&gt;&lt;a href=&quot;#4-é€šè¿‡-IDL-æ–‡ä»¶ç”Ÿæˆä»£ç &quot; class=&quot;headerlink&quot; title=&quot;4.é€šè¿‡ IDL æ–‡ä»¶ç”Ÿæˆä»£ç &quot;&gt;&lt;/a&gt;4.é€šè¿‡ IDL æ–‡ä»¶ç”Ÿæˆä»£ç &lt;/h4&gt;&lt;p&gt;é€šè¿‡ IDL ä¸€èˆ¬ç”Ÿæˆä¸¤ç§ç±»å‹çš„æ–‡ä»¶ï¼Œ1ï¼‰ç±»å‹æ–‡ä»¶ 2ï¼‰æ¥å£æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;å½¢å¦‚ &lt;code&gt;xxx_types.js&lt;/code&gt; å³æ˜¯å°† IDL æ–‡ä»¶ä¸­çš„ç±»å‹è¯´æ˜è¾“å‡ºä¸ºç±»å‹æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å½¢å¦‚ &lt;code&gt;xxxService.js&lt;/code&gt; å³æ˜¯æ¥å£æ–‡ä»¶ï¼ŒæœåŠ¡æ¶ˆè´¹æ–¹é€šè¿‡æ¥å£æ–‡ä»¶æ¥åˆ›å»ºå’Œ Provider çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œthrift ä¼šå¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–åä¼ é€’ç»™å¦ä¸€æ–¹ï¼Œåœ¨æ¥æ”¶æ–¹åˆ™å¯¹æ•°æ®è¿›è¡Œååºåˆ—åŒ–åæ˜ å°„æˆå¯¹åº”çš„è¯­è¨€å¯¹è±¡ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸å…³å¿ƒæ•°æ®æ ¼å¼å’Œç±»å‹è½¬æ¢ï¼Œç›´æ¥è°ƒç”¨è¿œç¨‹æœåŠ¡äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Node-Thrift-åº”ç”¨&quot;&gt;&lt;a href=&quot;#Node-Thrift-åº”ç”¨&quot; class=&quot;headerlink&quot; title=&quot;Node Thrift åº”ç”¨&quot;&gt;&lt;/a&gt;Node Thrift åº”ç”¨&lt;/h3&gt;&lt;h4 id=&quot;1-å®‰è£…&quot;&gt;&lt;a href=&quot;#1-å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;1.å®‰è£…&quot;&gt;&lt;/a&gt;1.å®‰è£…&lt;/h4&gt;&lt;p&gt;é™¤äº†&lt;a href=&quot;http://thrift.apache.org/docs/install/os_x&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜ç½‘ä¸‹è½½&lt;/a&gt;ï¼ŒMac ä¸‹æ¯”è¾ƒæ–¹ä¾¿çš„å®‰è£…æ–¹å¼æ˜¯ä½¿ç”¨ homebrewï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;brew install thrift&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-ç”Ÿæˆä»£ç &quot;&gt;&lt;a href=&quot;#2-ç”Ÿæˆä»£ç &quot; class=&quot;headerlink&quot; title=&quot;2.ç”Ÿæˆä»£ç &quot;&gt;&lt;/a&gt;2.ç”Ÿæˆä»£ç &lt;/h4&gt;&lt;p&gt;è¯­æ³•ä¸º &lt;code&gt;thrift --gen &amp;lt;language&amp;gt; &amp;lt;Thrift filename&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆ Node.js ä»£ç çš„è¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thrift --gen js:node Service.thrift&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬ä¼šå°è£…å¤šä¸ª shell è„šæœ¬æ¥åšè¿™ä»¶äº‹ï¼Œæ–¹ä¾¿ç»´æŠ¤ä¸ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;3-ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#3-ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;3.ä½¿ç”¨&quot;&gt;&lt;/a&gt;3.ä½¿ç”¨&lt;/h4&gt;&lt;p&gt;Apache å·²ç»æ¨å‡ºäº† &lt;a href=&quot;http://thrift.apache.org/tutorial/nodejs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜æ–¹çš„ Node.js åº“&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Client:&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ­¤ç¤ºä¾‹ä»£ç å¤§è‡´æµè§ˆå³å¯&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; thrift = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;thrift&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; Calculator = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;./gen-nodejs/Calculator&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; ttypes = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;./gen-nodejs/tutorial_types&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; assert = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;assert&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; transport = thrift.TBufferedTransport;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; protocol = thrift.TBinaryProtocol;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; connection = thrift.createConnection(&lt;span class=&quot;string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9090&lt;/span&gt;, &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  transport : transport,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  protocol : protocol&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;connection.on(&lt;span class=&quot;string&quot;&gt;&#39;error&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  assert(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, err);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Create a Calculator client with the connection&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; client = thrift.createClient(Calculator, connection);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;client.ping(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err, response&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;ping()&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;client.add(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;err, response&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&quot;1+1=&quot;&lt;/span&gt; + response);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ ·ï¼Œå°±å¯ä»¥è°ƒç”¨å…¶å®ƒè¯­è¨€ç¼–å†™çš„æœåŠ¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…¬å¸å†…éƒ¨æœ‰ä¸€ä¸ªå°è£…å¥½äº†è¿æ¥è¿‡ç¨‹çš„ thrift åŒ…ï¼Œä½¿ç”¨èµ·æ¥æ›´ç®€å•äº›ï¼ŒæŠŠç«¯å£å·ï¼Œip ç­‰ä¿¡æ¯ä¼ è¿›å»å³å¯ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ›´å¤šè¯­è¨€å’Œä½¿ç”¨ç¤ºä¾‹å¯å‚è€ƒ &lt;a href=&quot;http://thrift-tutorial.readthedocs.io/en/latest/usage-example.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;thrift-tutorial&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;å¾®æœåŠ¡æ¦‚è§ˆ&quot;&gt;&lt;a href=&quot;#å¾®æœåŠ¡æ¦‚è§ˆ&quot; class=&quot;headerlink&quot; title=&quot;å¾®æœåŠ¡æ¦‚è§ˆ&quot;&gt;&lt;/a&gt;å¾®æœåŠ¡æ¦‚è§ˆ&lt;/h3&gt;&lt;p&gt;ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä½¿ç”¨ HTTP åè®®è¿›è¡Œæ¥å£è°ƒç”¨ï¼ŒåªçŸ¥é“æœ‰ä¸€äº›â€œåç«¯ä¹‹é—´çš„æœåŠ¡è°ƒç”¨â€æ˜¯ä½¿ç”¨ Thrift æ¥å£ï¼Œæ²¡æœ‰æƒ³è¿‡å‰ç«¯é¡¹ç›®ä¸­ä¹Ÿä¼šç›´æ¥è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥ä¼šç”¨åˆ° Thriftï¼Œæ˜¯å› ä¸ºå…¬å¸é‡‡ç”¨çš„æ˜¯â€œé¢å‘æœåŠ¡çš„æ¶æ„â€ï¼Œæˆ‘ä»¬æ‰€å¼€å‘çš„ Web åº”ç”¨ä¹Ÿæ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œå…¶ä¸­è¿˜ä¼šä¾èµ–å…¶å®ƒæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SOAï¼ˆService-Oriented Architectureï¼Œé¢å‘æœåŠ¡çš„æ¶æ„ï¼‰&lt;/code&gt;æ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œè€ŒæœåŠ¡ä¹‹é—´é€šè¿‡é…åˆæœ€ç»ˆä¼šæä¾›ä¸€ç³»åˆ—åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨äºæ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚æœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè°ƒç”¨ï¼Œè€Œéé‡‡ç”¨è¿›ç¨‹å†…è°ƒç”¨çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡æ¶æ„æ˜¯ SOA çš„ä¸€ç§ç‰¹å®šæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2018-3-microservices.png&quot; alt=&quot;microservices&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ›´å¤šå†…å®¹å‚è€ƒ&lt;a href=&quot;https://book.douban.com/subject/26772677/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šå¾®æœåŠ¡è®¾è®¡ã€‹&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Apache Thrift&lt;/code&gt; æ˜¯ä¸€æ¬¾ &lt;code&gt;RPC&lt;/code&gt; (è·¨è¯­è¨€çš„æœåŠ¡)æ¡†æ¶ï¼Œä¼ è¾“æ•°æ®é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œç›¸å¯¹ XML å’Œ JSON ä½“ç§¯æ›´å°ï¼Œå¯¹äºé«˜å¹¶å‘ã€å¤§æ•°æ®é‡å’Œå¤šè¯­è¨€çš„ç¯å¢ƒæ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/thrift.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;RPC-æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#RPC-æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;RPC æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;RPC æ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Remote Procedure Call&lt;/code&gt; å³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;RPC æ˜¯ä¸€ä¸ª &lt;code&gt;è®¡ç®—æœºé€šä¿¡åè®®&lt;/code&gt;ã€‚è¯¥åè®®å…è®¸è¿è¡Œäºä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€å°è®¡ç®—æœºçš„å­ç¨‹åºï¼Œè€Œç¨‹åºå‘˜æ— éœ€é¢å¤–åœ°ä¸ºè¿™ä¸ªäº¤äº’ä½œç”¨ç¼–ç¨‹ã€‚ â€”â€” ä¸­æ–‡ç»´åŸº&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="thrift" scheme="https://blog.colafornia.me/categories/thrift/"/>
    
    
  </entry>
  
  <entry>
    <title>è§£å†³ git clone æ…¢çš„é—®é¢˜</title>
    <link href="https://blog.colafornia.me/post/2018/slove-git-clone-speed/"/>
    <id>https://blog.colafornia.me/post/2018/slove-git-clone-speed/</id>
    <published>2018-03-09T08:20:00.000Z</published>
    <updated>2019-10-24T02:22:04.205Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/2018-3-git.png&quot; alt=&quot;git-cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¹´åè¿™æ®µæ—¶é—´è¿ç»­é‡åˆ°äº†ä¸¤æ¬¡ git clone é¾Ÿé€Ÿç¼“æ…¢ï¼Œä¸€å¤©ä¹‹å†…éƒ½ clone ä¸ä¸‹æ¥çš„é—®é¢˜ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ³•å’ŒåŸç†ã€‚&lt;/p&gt;
&lt;p&gt;git clone å¤ªæ…¢çš„å¸¸è§„åŸå› æœ‰ä¸¤ç§ï¼Œ&lt;strong&gt;ç¬¬ä¸€ç§æ˜¯ git ä»“åº“æœ¬èº«å¯¼è‡´çš„ï¼Œç¬¬äºŒç§æ˜¯æˆ‘ä»¬ä½¿ç”¨è€…çš„ç½‘ç»œé—®é¢˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ä¸€ã€Git-ä»“åº“ä½“ç§¯å¤ªå¤§&quot;&gt;&lt;a href=&quot;#ä¸€ã€Git-ä»“åº“ä½“ç§¯å¤ªå¤§&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Git ä»“åº“ä½“ç§¯å¤ªå¤§&quot;&gt;&lt;/a&gt;ä¸€ã€Git ä»“åº“ä½“ç§¯å¤ªå¤§&lt;/h2&gt;&lt;p&gt;å¤§ä½“ç§¯ Git ä»“åº“ä¸€èˆ¬ä¹Ÿæœ‰ä¸¤ç§ï¼Œä¸€æ˜¯ commit å†å²é•¿ï¼Œåä½œåˆ†æ”¯å¤šå¯¼è‡´çš„ä»“åº“è‡ªèº«ä½“ç§¯å˜å¤§ï¼ŒäºŒæ˜¯æœ‰è¿‡å¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-commit-å†å²é•¿ï¼Œåä½œåˆ†æ”¯å¤šå¯¼è‡´çš„ä»“åº“è‡ªèº«ä½“ç§¯å˜å¤§&quot;&gt;&lt;a href=&quot;#1-commit-å†å²é•¿ï¼Œåä½œåˆ†æ”¯å¤šå¯¼è‡´çš„ä»“åº“è‡ªèº«ä½“ç§¯å˜å¤§&quot; class=&quot;headerlink&quot; title=&quot;1. commit å†å²é•¿ï¼Œåä½œåˆ†æ”¯å¤šå¯¼è‡´çš„ä»“åº“è‡ªèº«ä½“ç§¯å˜å¤§&quot;&gt;&lt;/a&gt;1. commit å†å²é•¿ï¼Œåä½œåˆ†æ”¯å¤šå¯¼è‡´çš„ä»“åº“è‡ªèº«ä½“ç§¯å˜å¤§&lt;/h4&gt;&lt;p&gt;Git ä¼šæŠŠæ–‡ä»¶çš„æ¯ä¸€ä¸ªå·®å¼‚åŒ–ç‰ˆæœ¬éƒ½å­˜å‚¨èµ·æ¥ï¼Œéšç€ commit è¶Šæ¥è¶Šå¤šï¼Œæ¯ä¸€æ¬¡å°çš„ä¿®æ”¹ Git éƒ½ä¼šå­˜å‚¨ä¸€ä¸ªæ–°çš„å¿«ç…§ï¼Œè‡ªç„¶ç‰ˆæœ¬åº“ä½“ç§¯ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ã€‚&lt;/p&gt;
&lt;h5 id=&quot;â‘ -æµ…å…‹éš†-shallow-clone&quot;&gt;&lt;a href=&quot;#â‘ -æµ…å…‹éš†-shallow-clone&quot; class=&quot;headerlink&quot; title=&quot;â‘  æµ…å…‹éš† shallow clone&quot;&gt;&lt;/a&gt;â‘  æµ…å…‹éš† shallow clone&lt;/h5&gt;&lt;p&gt;&lt;code&gt;git clone --depth n git://someserver/somerepo&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªå¯¹ç‰ˆæœ¬åº“çš„æœ€è¿‘å‡ æ¬¡æäº¤æ„Ÿå…´è¶£ï¼Œå°±å¯ä»¥é€šè¿‡ shallow clone ä»…ä»…å…‹éš†æœ€æ–°çš„ n æ¡è®°å½•åˆ°æœ¬åœ°ï¼ŒèŠ‚çœäº†éå¸¸å¤šçš„æ—¶é—´ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºå½“æˆ‘ä»¬æƒ³å¯¹æŸ¥çœ‹ç ”ç©¶æŸè¿œç«¯åº“æ—¶ä½¿ç”¨ï¼Œå¦‚æœæƒ³åœ¨æµ…å…‹éš†çš„åº“ä¸Šæ¨é€æäº¤ï¼Œä¼šæœ‰ä¸€äº›é™åˆ¶ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡æµ…å…‹éš†æ–¹å¼å…‹éš†å‡ºæ¥çš„ç‰ˆæœ¬åº“ï¼Œæ¯ä¸€ä¸ªæäº¤çš„ SHA1 å“ˆå¸Œå€¼å’Œæºç‰ˆæœ¬åº“çš„ç›¸åŒï¼ŒåŒ…æ‹¬æäº¤çš„æ ¹èŠ‚ç‚¹ä¹Ÿæ˜¯å¦‚æ¬¡ï¼Œä½†æ˜¯ git é€šè¿‡ç‰¹æ®Šçš„å®ç°ï¼Œä½¿å¾—æµ…å…‹éš†çš„æ ¹èŠ‚ç‚¹æäº¤çœ‹èµ·æ¥æ²¡æœ‰çˆ¶æäº¤ã€‚æ­£å› ä¸ºæµ…å…‹éš†çš„æäº¤å¯¹è±¡çš„ SHA1 å“ˆå¸Œå€¼å’Œæºç‰ˆæœ¬åº“ä¸€è‡´ï¼Œæ‰€ä»¥æµ…å…‹éš†ç‰ˆæœ¬åº“å¯ä»¥æ‰§è¡Œ git fetch æˆ–è€… git pull ä»æºç‰ˆæœ¬åº“è·å–æ–°çš„æäº¤ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;â‘¡-åª-clone-ä¸€ä¸ªåˆ†æ”¯&quot;&gt;&lt;a href=&quot;#â‘¡-åª-clone-ä¸€ä¸ªåˆ†æ”¯&quot; class=&quot;headerlink&quot; title=&quot;â‘¡ åª clone ä¸€ä¸ªåˆ†æ”¯&quot;&gt;&lt;/a&gt;â‘¡ åª clone ä¸€ä¸ªåˆ†æ”¯&lt;/h4&gt;&lt;p&gt;&lt;code&gt;git clone URL --branch branch_name --single-branch [folder]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬å¯ä»¥æŒ‡å®šåª clone master åˆ†æ”¯åˆ°æœ¬åœ°ï¼ŒåŒæ ·äº†èŠ‚çœäº†å¾ˆå¤šæ—¶é—´ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2-æœ‰è¿‡å¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#2-æœ‰è¿‡å¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;2. æœ‰è¿‡å¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶&quot;&gt;&lt;/a&gt;2. æœ‰è¿‡å¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶&lt;/h4&gt;&lt;p&gt;Git ä¸»è¦é€‚ç”¨äºå¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶çš„å¢é‡æäº¤ï¼Œæ¯æ¬¡æ›´æ–°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å°±ä¼šæŠŠè¿™ä»½æ–‡ä»¶çš„å®Œæ•´å†…å®¹å­˜å‚¨ä¸€ä»½ï¼Œéšç€æ›´æ–°ä¿®æ”¹è¶Šæ¥è¶Šå¤šï¼Œç‰ˆæœ¬åº“çš„ä½“ç§¯ä¹Ÿä¼šéå¸¸å¤§ï¼Œå½±å“ä»£ç çš„æ‹‰å–é€Ÿåº¦ï¼ˆè¿™åº”è¯¥ä¹Ÿæ˜¯æ¸¸æˆå›¢é˜Ÿä¸»è¦è¿˜åœ¨ä½¿ç”¨ SVN çš„åŸå› ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µè¾ƒå°‘ä¼šå‘ç”Ÿåœ¨å‰ç«¯é¡¹ç›®ä»“åº“ä¸­ï¼Œé’ˆå¯¹è¿™ç§åŸå› é€ æˆçš„ git clone æ…¢ä¾ç„¶å¯ä»¥é€šè¿‡ä¸Šé¢ä¸¤ç§æ–¹æ³•æ¥èŠ‚çœå…‹éš†æ—¶é—´ï¼Œé™¤æ­¤ä¹‹å¤–åœ¨æ­¤ç®€å•ä»‹ç»ä¸€ä¸‹&lt;strong&gt;å¦‚ä½•è§£å†³ç”±äºäºŒè¿›åˆ¶æ–‡ä»¶é€ æˆçš„ç‰ˆæœ¬åº“ä½“ç§¯è¿‡å¤§é—®é¢˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;â‘ -ç¨€ç–æ£€å‡º-sparse-checkout&quot;&gt;&lt;a href=&quot;#â‘ -ç¨€ç–æ£€å‡º-sparse-checkout&quot; class=&quot;headerlink&quot; title=&quot;â‘  ç¨€ç–æ£€å‡º sparse checkout&quot;&gt;&lt;/a&gt;â‘  ç¨€ç–æ£€å‡º sparse checkout&lt;/h4&gt;&lt;p&gt;é€šè¿‡ Git åœ¨ 1.7.0 ç‰ˆæœ¬ä¹‹åæä¾›çš„ç¨€ç–æ£€å‡ºåŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®åª checkout å‡ºè‡ªå·±æƒ³è¦çš„å†…å®¹ã€‚æ­¤æ—¶å°±å¯ä»¥é€šè¿‡å®ƒæ¥è·³è¿‡äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Worktree ä¸­å°±åªæœ‰æˆ‘ä»¬æŒ‡å®šæ£€å‡ºçš„æ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;git config core.sparseCheckout true // å¼€å¯ç¨€ç–æ£€å‡ºåŠŸèƒ½&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;echo &amp;quot;path1/&amp;quot; &amp;gt;&amp;gt; .git/info/sparse-checkout // æŒ‡å®šæ£€å‡ºè·¯å¾„&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸç†æ˜¯ git åœ¨æš‚å­˜åŒºä¸ºæ¯ä¸ªæ–‡ä»¶æä¾›ä¸€ä¸ªåä¸º &lt;code&gt;skip-worktree&lt;/code&gt; æ ‡è¯†ä½ï¼Œå¦‚æœæ ‡è¯†ä½å¼€å¯åˆ™æ— è®ºå·¥ä½œåŒºå¯¹åº”çš„æ–‡ä»¶å­˜åœ¨ä¸å¦ï¼Œæ˜¯å¦è¢«ä¿®æ”¹ï¼Œgit éƒ½è®¤ä¸ºè¯¥æ–‡ä»¶çš„ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼Œæ²¡æœ‰å˜åŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;â‘¡-å¤§æ–‡ä»¶å‚¨å­˜-Git-LFS&quot;&gt;&lt;a href=&quot;#â‘¡-å¤§æ–‡ä»¶å‚¨å­˜-Git-LFS&quot; class=&quot;headerlink&quot; title=&quot;â‘¡ å¤§æ–‡ä»¶å‚¨å­˜ Git LFS&quot;&gt;&lt;/a&gt;â‘¡ å¤§æ–‡ä»¶å‚¨å­˜ Git LFS&lt;/h4&gt;&lt;p&gt;Github å’Œ Gitlab ç›®å‰éƒ½å·²ç»ä½¿ç”¨ &lt;a href=&quot;https://git-lfs.github.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git LFS&lt;/a&gt; æ¥æ”¯æŒäºŒè¿›åˆ¶å¤§æ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå°†äºŒè¿›åˆ¶æ–‡ä»¶å­˜åœ¨ç‰ˆæœ¬åº“ä¹‹å¤–ï¼Œåœ¨ç‰ˆæœ¬åº“å†…ä½¿ç”¨æ–‡æœ¬æŒ‡é’ˆæ¥ä»£æ›¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://git-lfs.github.com/images/facebook-promo.png&quot; alt=&quot;Git LFS&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€ç½‘ç»œè¢«å¢™&quot;&gt;&lt;a href=&quot;#äºŒã€ç½‘ç»œè¢«å¢™&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€ç½‘ç»œè¢«å¢™&quot;&gt;&lt;/a&gt;äºŒã€ç½‘ç»œè¢«å¢™&lt;/h2&gt;&lt;p&gt;æˆ‘è¿™ä¸¤æ¬¡é‡åˆ°çš„é—®é¢˜å…¶å®éƒ½æ˜¯ç½‘ç»œé—®é¢˜ã€‚æ˜¥èŠ‚å‰åè¾½å®é‚£è¾¹çš„ç½‘ç»œéƒ½æ˜¯è¿™ä¸ªçŠ¶å†µï¼Œå¹´åå›æ¥æˆ‘å¸çš„ç½‘ç»œä¹Ÿè¢« github å¢™äº†ã€‚è¿™é‡Œä»‹ç»ä¸€ä¸‹ç»™ Git è®¾ç½®ä»£ç†çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;git clone æœ‰ä¸¤ç§åè®®å¯ä¾›é€‰æ‹©ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/git-clone-shot.jpeg&quot; alt=&quot;git clone&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»çš„æ˜¯é’ˆå¯¹ HTTPS åè®®çš„ä»£ç†ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹ä¸€ä¸‹è‡ªå·±çš„ SS ä»£ç†è®¾ç½® socks5 ç›‘å¬ç«¯å£æ˜¯å¤šå°‘ï¼Œæ¯”å¦‚æˆ‘çš„ç«¯å£å°±æ˜¯1086ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/ss.jpeg&quot; alt=&quot;ss&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;git config --global http.https://github.com.proxy socks5://127.0.0.1:1086&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git config --global https.https://github.com.proxy socks5://127.0.0.1:1086&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªè®¾ç½®åªä»£ç†äº† githubï¼Œä¸ä¼šå¯¹å›½å†…ä»“åº“ä½¿ç”¨ä»£ç†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‚è€ƒå†…å®¹&quot;&gt;&lt;a href=&quot;#å‚è€ƒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒå†…å®¹&quot;&gt;&lt;/a&gt;å‚è€ƒå†…å®¹&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.worldhello.net/gotgit/08-git-misc/090-sparse-checkout-and-shallow-clone.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GotGitï¼š ç¨€ç–æ£€å‡ºå’Œæµ…å…‹éš†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://segmentfault.com/q/1010000000118837&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;segmentfaultï¼šå¦‚ä½•ä¸º Git è®¾ç½®ä»£ç†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2018-3-git.png&quot; alt=&quot;git-cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¹´åè¿™æ®µæ—¶é—´è¿ç»­é‡åˆ°äº†ä¸¤æ¬¡ git clone é¾Ÿé€Ÿç¼“æ…¢ï¼Œä¸€å¤©ä¹‹å†…éƒ½ clone ä¸ä¸‹æ¥çš„é—®é¢˜ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ³•å’ŒåŸç†ã€‚&lt;/p&gt;
&lt;p&gt;git clone å¤ªæ…¢çš„å¸¸è§„åŸå› æœ‰ä¸¤ç§ï¼Œ&lt;strong&gt;ç¬¬ä¸€ç§æ˜¯ git ä»“åº“æœ¬èº«å¯¼è‡´çš„ï¼Œç¬¬äºŒç§æ˜¯æˆ‘ä»¬ä½¿ç”¨è€…çš„ç½‘ç»œé—®é¢˜&lt;/strong&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="git" scheme="https://blog.colafornia.me/categories/git/"/>
    
    
  </entry>
  
  <entry>
    <title>å›é¡¾ä¸€ä¸‹ JavaScript ä¸­çš„æ·±æµ…æ‹·è´ä»¥åŠå†…å­˜ç®¡ç†</title>
    <link href="https://blog.colafornia.me/post/2018/review-copy-in-javascript/"/>
    <id>https://blog.colafornia.me/post/2018/review-copy-in-javascript/</id>
    <published>2018-01-13T01:05:00.000Z</published>
    <updated>2019-10-24T02:22:04.205Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/review-copy-in-javascript.png&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨ç»„å†… code review ä¸­é‡åˆ°äº†ä¸€å¤„ä¸šåŠ¡ä»£ç ä¸­éœ€è¦æ·±æ‹·è´çš„åœ°æ–¹ï¼ŒåŒå­¦ç®€å•åœ°é€šè¿‡ &lt;code&gt;JSON.parse(JSON.stringify(target))&lt;/code&gt; æ¥è¿›è¡Œï¼Œåœ¨è®¨è®ºä¸­å‘ç°äº†ä¸€äº›å¥½ç©çš„ä¸œè¥¿ï¼Œç‰¹æ­¤æ¥å›é¡¾ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;åŸºæœ¬ç±»å‹-VS-å¼•ç”¨ç±»å‹ï¼Œå€¼ä¼ é€’-VS-å¼•ç”¨ä¼ é€’&quot;&gt;&lt;a href=&quot;#åŸºæœ¬ç±»å‹-VS-å¼•ç”¨ç±»å‹ï¼Œå€¼ä¼ é€’-VS-å¼•ç”¨ä¼ é€’&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬ç±»å‹ VS å¼•ç”¨ç±»å‹ï¼Œå€¼ä¼ é€’ VS å¼•ç”¨ä¼ é€’&quot;&gt;&lt;/a&gt;åŸºæœ¬ç±»å‹ VS å¼•ç”¨ç±»å‹ï¼Œå€¼ä¼ é€’ VS å¼•ç”¨ä¼ é€’&lt;/h3&gt;&lt;p&gt;é¦–å…ˆå›é¡¾ä¸€ä¸‹é«˜ç¨‹ä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;ECMAScript å˜é‡åŒ…å«ä¸¤ç§æ•°æ®ç±»å‹çš„å€¼ï¼šåŸºæœ¬ç±»å‹å€¼ä¸å¼•ç”¨ç±»å‹å€¼ã€‚åŸºæœ¬ç±»å‹æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®æ®µï¼Œå¦‚ &lt;code&gt;Undefined&lt;/code&gt;ã€&lt;code&gt;Null&lt;/code&gt;ã€&lt;code&gt;Boolean&lt;/code&gt;ã€&lt;code&gt;Number&lt;/code&gt; å’Œ &lt;code&gt;String&lt;/code&gt;ï¼ˆES6 ä¸­å‡ºç°çš„ &lt;code&gt;Symbol&lt;/code&gt; ä¹Ÿå±äºåŸºæœ¬ç±»å‹ï¼‰ã€‚å¼•ç”¨ç±»å‹æŒ‡çš„æ˜¯å¯èƒ½ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼è®¿é—®çš„ï¼Œ&lt;strong&gt;å¯ä»¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¼•ç”¨ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œ&lt;strong&gt;JavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„ä½ç½®&lt;/strong&gt;ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œè®¿é—®å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨ä¸¤ç§æ–¹å¼ï¼Œè€Œ &lt;strong&gt;å‚æ•°åªèƒ½æŒ‰å€¼ä¼ é€’&lt;/strong&gt;ã€‚åœ¨å‘å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œä¼šæŠŠå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™å¦ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ·±å…¥å†…å­˜&quot;&gt;&lt;a href=&quot;#æ·±å…¥å†…å­˜&quot; class=&quot;headerlink&quot; title=&quot;æ·±å…¥å†…å­˜&quot;&gt;&lt;/a&gt;æ·±å…¥å†…å­˜&lt;/h3&gt;&lt;p&gt;ä»¥ä¸Šè™½ç„¶ä¸éš¾ç†è§£ï¼Œä½†æ˜¯ä¸æ·±å±‚æŒ–æ˜ä¸€ä¸‹è¿˜æ˜¯å¾ˆéš¾å®Œå…¨è®°ä½ã€‚æ‰€ä»¥æ¥çœ‹çœ‹å†…å­˜ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹çœ‹å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/dt-fe/weekly/master/assets/29/1.jpg&quot; alt=&quot;life&quot;&gt;&lt;/p&gt;
&lt;p&gt;å³ å†…å­˜åˆ†é… =&amp;gt; å†…å­˜è¯»å†™ =&amp;gt; å†…å­˜é‡Šæ”¾&lt;/p&gt;
&lt;p&gt;JavaScript åœ¨å®šä¹‰å˜é‡æ—¶å³å®Œæˆäº†å†…å­˜åˆ†é…ã€‚&lt;strong&gt;è¿ç®—ç¬¦= å°±æ˜¯åˆ›å»ºæˆ–ä¿®æ”¹å˜é‡åœ¨å†…å­˜ä¸­çš„æŒ‡å‘ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; a = &amp;#123; b: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125;; &lt;span class=&quot;comment&quot;&gt;// a ä¸ºå¼•ç”¨ç±»å‹ï¼Œç»™ a åˆ†é…å†…å­˜ &amp;#123; b: 1 &amp;#125;ï¼Œ a å­˜å‚¨çš„å³ä¸º &amp;#123; b: 1 &amp;#125; çš„åœ°å€&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; c = a; &lt;span class=&quot;comment&quot;&gt;// ç»™ c åˆ†é…å†…å­˜ æŒ‡å‘ a å­˜å‚¨çš„åœ°å€ï¼Œå³ &amp;#123; b: 1 &amp;#125; çš„åœ°å€&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// ä¿®æ”¹ a çš„å†…å­˜æŒ‡å‘åˆ° 2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(c); &lt;span class=&quot;comment&quot;&gt;// c å­˜å‚¨çš„ä»ä¸º &amp;#123; b: 1 &amp;#125; çš„åœ°å€ï¼Œå› æ­¤ç»“æœä¸º &amp;#123; b: 1 &amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‰ä¸¤è¡Œä»£ç åœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å˜é‡&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å†…å­˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;a&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;{ b: 1 } åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;c&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;{ b: 1 } åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç¬¬ä¸‰è¡Œä¿®æ”¹äº†å†…å­˜æŒ‡å‘ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å˜é‡&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å†…å­˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;a&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å˜é‡ c ä»ç„¶æŒ‡å‘ { b: 1 } çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; m = &amp;#123; a: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, b: &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; n = m; &lt;span class=&quot;comment&quot;&gt;// å¤åˆ¶å¼•ç”¨ç±»å‹çš„å€¼ï¼Œä½¿ n å’Œ m æŒ‡å‘åŒä¸€åœ°å€&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;n.a = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(m.a);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿˜æ˜¯å…ˆçœ‹å‰ä¸¤è¡Œï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å˜é‡&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å†…å­˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;m&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;{ a: 10, b: 20 } åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;n&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;{ a: 10, b: 20 } åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç¬¬ä¸‰è¡Œé€šè¿‡ n.a ä¿®æ”¹äº†å˜é‡ï¼Œä½† m å’Œ n ä»ç„¶æŒ‡å‘åŒä¸€åœ°å€ä¸å˜ï¼Œå› æ­¤ m.a çš„å€¼ä¹Ÿä¸º 15&lt;/p&gt;
&lt;p&gt;å¯¹äºå‚æ•°ä¼ é€’è¿‡ç¨‹ä¸­çš„å†…å­˜å˜åŒ–ä¸æ˜¯æœ¬æ–‡é‡ç‚¹ï¼Œå¯ä»¥è§‚æ‘© &lt;a href=&quot;https://github.com/mqyqingfeng/Blog/issues/10&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JavaScriptæ·±å…¥ä¹‹å‚æ•°æŒ‰å€¼ä¼ é€’&lt;/a&gt; ä¸‹é¢ç²¾å½©çš„è¯„è®ºæ¥å­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å¾ˆå¤šåšæ–‡è¿˜é’ˆå¯¹ JavaScript çš„å†…å­˜ç©ºé—´ï¼Œæ ˆå†…å­˜ä¸å †å†…å­˜è¿›è¡Œäº†è®²è§£ï¼Œä½†æ˜¯å¯¹äºè¿™æ–¹é¢å®åœ¨æ²¡æœ‰ç»éªŒï¼Œæ²¡ä»€ä¹ˆé‰´åˆ«èƒ½åŠ›ï¼Œæš‚æ—¶å…ˆä¸è¯´äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;JavaScript-ä¸­çš„æ·±æµ…æ‹·è´&quot;&gt;&lt;a href=&quot;#JavaScript-ä¸­çš„æ·±æµ…æ‹·è´&quot; class=&quot;headerlink&quot; title=&quot;JavaScript ä¸­çš„æ·±æµ…æ‹·è´&quot;&gt;&lt;/a&gt;JavaScript ä¸­çš„æ·±æµ…æ‹·è´&lt;/h3&gt;&lt;p&gt;å›é¡¾å®Œä»¥ä¸ŠçŸ¥è¯†ç‚¹åï¼Œå¯ä»¥å‘ç°å¯¹äºå¯¹è±¡çš„æ‹·è´ï¼Œå…¶å®åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼ˆè¿™é‡Œï¼Œå°†è¢«æ‹·è´å¯¹è±¡ç§°ä¸ºæºå¯¹è±¡ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;shallow clone æµ…æ‹·è´ï¼šå¦‚æœå¯¹è±¡ä¸­æŸä¸ªå±æ€§å€¼æ˜¯å¯¹è±¡çš„è¯ï¼Œæµ…æ‹·è´çš„åªæ˜¯å†…å­˜æŒ‡é’ˆï¼Œå½“å†…å­˜ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–åï¼Œæ‹·è´å¯¹è±¡ä¸æºå¯¹è±¡ä¸éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;deep clone æ·±æ‹·è´ï¼šæ‹·è´å¯¹è±¡ä¸æºå¯¹è±¡æ˜¯å®Œå…¨å•ç‹¬çš„å¯¹è±¡ï¼Œæ²¡æœ‰å±æ€§å€¼æ˜¯æŒ‡å‘åŒä¸€å†…å­˜æŒ‡é’ˆçš„ï¼Œæºå¯¹è±¡å‘ç”Ÿä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå¼•èµ·æ‹·è´å¯¹è±¡å‘ç”Ÿå˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼ŒES6 ä¸­ Object çš„æ–°æ–¹æ³• &lt;code&gt;Object.assign&lt;/code&gt; æ‰§è¡Œçš„å°±æ˜¯æµ…æ‹·è´ï¼ŒStack Overflow ä¸Šæœ‰ä¸€ä¸ªé«˜ç¥¨å›ç­”è¯¯å°†å…¶ç­”ä¸ºæ·±æ‹·è´ï¼Œæˆ‘å°±è¸©äº†å‘ï¼Œé¿å…åŠ æ·±é”™è¯¯å°è±¡ï¼Œè¿™é‡Œä¸æ”¾é“¾æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ES6 ä¸­çš„ Object &lt;code&gt;rest/spread destructuring&lt;/code&gt; ä¹Ÿæ˜¯æµ…æ‹·è´ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; existing = &amp;#123; a: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, b: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, c: &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &amp;#123; ...clone &amp;#125; = existing;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯¹äºæ·±æ‹·è´ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œéœ€è¦å¯¹åµŒå¥—å¯¹è±¡è¿›è¡Œé€’å½’éå†ï¼Œä½†æ˜¯çœŸæ­£å®ç° deep clone æ²¡æœ‰æƒ³è±¡çš„ç®€å•ï¼Œä¸»è¦åŸå› åœ¨äº deep clone çš„å®šä¹‰å¹¶ä¸ç»Ÿä¸€ï¼Œä»¥åŠ edge case éå¸¸å¤šï¼ŒåŒ…å« DOM/BOM å¯¹è±¡å¦‚ä½•å¤„ç†ï¼Œå‡½æ•°å¦‚ä½•å¤„ç†ï¼ŒåŸå‹é“¾å¦‚ä½•å¤„ç†ç­‰é—®é¢˜ã€‚ä½†æ˜¯å¸Œæœ› â€œåšå‡ºä¿®æ”¹ä¸å½±å“å…¶å®ƒå¼•ç”¨â€ ç¡®å®æ˜¯ä¸€ä¸ªå¸¸è§åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å¼€å¤´æåˆ°çš„ &lt;code&gt;JSON.parse(JSON.stringify(target))&lt;/code&gt;ã€‚ç¼ºç‚¹åœ¨äºæ— æ³•å¤„ç† Dateã€Function ç­‰ç±»å‹çš„å±æ€§å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤åœ¨ä¸šåŠ¡ä¸­æ¨èä½¿ç”¨ lodash çš„ &lt;a href=&quot;https://lodash.com/docs/4.17.4#cloneDeep&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;_.cloneDeep&lt;/a&gt; å®ç°æ·±æ‹·è´ï¼Œç®€æ´å¯é ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œåœ¨ &lt;a href=&quot;http://facebook.github.io/immutable-js/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;immutable.js&lt;/a&gt; å‡ºç°åï¼Œå®ç°æ•°æ®ç»“æ„çš„æŒä¹…åŒ–æœ‰äº†æ›´ä¼˜é›…çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¸Œæœ›ä¹‹å…‰-Immutable&quot;&gt;&lt;a href=&quot;#å¸Œæœ›ä¹‹å…‰-Immutable&quot; class=&quot;headerlink&quot; title=&quot;å¸Œæœ›ä¹‹å…‰ Immutable&quot;&gt;&lt;/a&gt;å¸Œæœ›ä¹‹å…‰ Immutable&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/4c698f4cef2ae6b69873aa7de91f6d10f28162e1/687474703a2f2f696d672e616c6963646e2e636f6d2f7470732f69312f544231796b395f4b585858585862565846585845745848387058582d3930302d3334322e706e67&quot; alt=&quot;Immutable&quot;&gt;&lt;/p&gt;
&lt;p&gt;JavaScript ä¸­çš„å¯¹è±¡ä¸€èˆ¬éƒ½æ˜¯å¯å˜çš„ï¼ˆmutableï¼‰ï¼Œè™½ç„¶èŠ‚çœäº†å†…å­˜ï¼Œå´ç»™å¤æ‚çš„å¤§å‹åº”ç”¨é€ æˆå¾ˆå¤šéšæ‚£ã€‚Immutable Data ä¸ºä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½å†è¢«ä¿®æ”¹çš„æ•°æ®ã€‚é€šè¿‡ &lt;strong&gt;Persistent Data Structure&lt;/strong&gt;ï¼ˆæŒä¹…åŒ–æ•°æ®ç»“æ„ï¼‰ä½¿å¾—åœ¨ä½¿ç”¨æ—§æ•°æ®åˆ›å»ºæ–°æ•°æ®æ—¶ï¼Œä¹Ÿä¿è¯äº†æ—§æ•°æ®åŒæ—¶å¯ç”¨ä¸”ä¸å˜ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢æ‰€è¿°çš„ deep clone æ–¹æ³•æ˜¯æŠŠæ‰€æœ‰èŠ‚ç‚¹éƒ½å¤åˆ¶ä¸€éï¼Œæ€§èƒ½æŸè€—éå¸¸å¤§ã€‚Immutable ä½¿ç”¨äº† &lt;strong&gt;Structural Sharing&lt;/strong&gt;ï¼ˆç»“æ„å…±äº«ï¼‰ï¼Œæ€§èƒ½æå‡å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ immutable.js å®ç° deep clone:&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; defaultConfig = Immutable.fromJS(&amp;#123;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; config = defaultConfig.merge(initConfig); &lt;span class=&quot;comment&quot;&gt;// defaultConfigä¸ä¼šæ”¹å˜ï¼Œè¿”å›æ–°å€¼ç»™ config&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; config = defaultConfig.mergeDeep(initConfig); &lt;span class=&quot;comment&quot;&gt;// æ·±å±‚merge&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;immutable.js æä¾›äº†7ç§ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼šList, Stack, Map, OrderedMap, Set, OrderedSet, Recordã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ immutable.js é€šå¸¸ä¸ facebook åŒå‚å‡ºå“çš„ React ä¸€èµ·ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒå…¶å®æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„åº“ï¼Œæ— è®ºåŸºäºä»€ä¹ˆæ¡†æ¶éƒ½å¯ä»¥ä½¿ç”¨ã€‚è¯´å®ƒæ˜¯å¸Œæœ›ä¹‹å…‰å¹¶æ²¡æœ‰è¨€è¿‡å…¶å®ã€‚æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://github.com/camsong/blog/issues/3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Immutable è¯¦è§£åŠ React ä¸­å®è·µ&lt;/a&gt;ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/review-copy-in-javascript.png&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨ç»„å†… code review ä¸­é‡åˆ°äº†ä¸€å¤„ä¸šåŠ¡ä»£ç ä¸­éœ€è¦æ·±æ‹·è´çš„åœ°æ–¹ï¼ŒåŒå­¦ç®€å•åœ°é€šè¿‡ &lt;code&gt;JSON.parse(JSON.stringify(target))&lt;/code&gt; æ¥è¿›è¡Œï¼Œåœ¨è®¨è®ºä¸­å‘ç°äº†ä¸€äº›å¥½ç©çš„ä¸œè¥¿ï¼Œç‰¹æ­¤æ¥å›é¡¾ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://blog.colafornia.me/categories/javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>2017 å¹´åº¦æ€»ç»“</title>
    <link href="https://blog.colafornia.me/post/2017/2017-review/"/>
    <id>https://blog.colafornia.me/post/2017/2017-review/</id>
    <published>2017-12-31T04:00:00.000Z</published>
    <updated>2019-10-24T02:22:04.194Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/tokyo-in-2017.jpg&quot; alt=&quot;tokyo in 2017&quot;&gt;&lt;/p&gt;
&lt;p&gt;2017: no silver bullet.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h4 id=&quot;å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å·¥ä½œ&quot;&gt;&lt;/a&gt;å·¥ä½œ&lt;/h4&gt;&lt;p&gt;äºŒæœˆåº•å…¥èŒäº†ç¾å›¢ï¼Œåˆ°ç°åœ¨ä¹Ÿå¿«ä¸€å¹´äº†ã€‚&lt;/p&gt;
&lt;p&gt;å€ŸåŠ©äºåœ¨ä¸‹å¨æˆ¿æ—¶ä¸€è¡Œä¸€è¡Œä»£ç  review å‡ºçš„å¥½ä¹ æƒ¯ä»¥åŠä¸€äº›æŠ€æœ¯é€‰å‹ä¸Šçš„ç»éªŒçº¢åˆ©ï¼Œè¿™å¤§åŠå¹´åŒ…æ‹¬èŒçº§æ™‹å‡ä¹Ÿè¿‡å¾—è¿˜æ˜¯å¾ˆé¡ºåˆ©ã€‚åœ¨æ­¤éå¸¸æ„Ÿè°¢ä¹Ÿæ€€å¿µåœ¨ä¸‹å¨æˆ¿çš„é‚£äº›èœé¸Ÿæ—¥å­ã€‚&lt;/p&gt;
&lt;p&gt;ç¾å›¢çš„çŸ¥è¯†wiki è—é¾™å§è™ï¼Œæœ‰å®Œå–„çš„æ–°äººåŸ¹å…»ä»¥åŠ Mentor æœºåˆ¶ï¼Œæ¯å¤©å„ä¸ª BU éƒ½æœ‰äº›è´¨é‡å¾ˆä¸é”™çš„æŠ€æœ¯åˆ†äº«ï¼Œç²¾åŠ›è¶³å¤Ÿçš„è¯åœ¨æ–°äººæœŸæ˜¯æœ‰éå¸¸å¤šçš„æœºä¼šå»å­¦ä¹ è§‚æ‘©çš„ã€‚åœ¨ç»ˆç«¯ç»„æ—¶è¿˜æœ‰è¢«è¦æ±‚è®°å½• work logï¼Œè™½ç„¶ä¸€å¼€å§‹æœ‰äº›ç—›è‹¦ï¼Œæœ€åè¿˜æ˜¯å…»æˆäº†æ³¨é‡äººæ•ˆä¸æ—¶é—´ç®¡ç†çš„ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†ä»¥ä¸Šï¼Œæœ€å¤§çš„æ„Ÿå—è¿˜æ˜¯åœ¨äºï¼Œä¸€ç›´è¢«åŸ¹å…»â€œåšäº‹çš„æ–¹æ³•â€ï¼Œè¦æ±‚æ³¨é‡è½¯ç´ è´¨ã€‚åœ¨å¤§å‚å½“èºä¸é’‰ï¼ŒåŸºæœ¬ä¸ä¼šé‡åˆ°æ¯å¤©åº”ä»˜ PM æ”¹éœ€æ±‚ï¼Œè°ƒæ•´å¼€å‘æ—¶é—´è¿™ç±»äº‹ã€‚PM åŒ…åŠäº†é¡¹ç›®ç®¡ç†ï¼Œä¸ä¸šåŠ¡æ–¹çš„æ²Ÿé€šç­‰äº‹æƒ…ï¼Œä½œä¸º FE åªéœ€è¦ç¡®å®šå¥½è‡ªå·±çš„ä¼°æ—¶æ’æœŸï¼Œå…³æ³¨åç«¯æä¾›çš„æ¥å£å®šä¹‰å°±å¯ä»¥ã€‚å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œåå¤„å°±æ˜¯è¿‡äºèºä¸é’‰äº†ï¼Œæ²¡ä»€ä¹ˆæœºä¼šå»åšè‡ªèº«é¢†åŸŸå¤–çš„äº‹æƒ…ã€‚ä»Šåè¿˜æ˜¯éœ€è¦è‡ªå·±å¤šåŠªåŠ›æ‰©å±•èƒ½åŠ›è¾¹ç•Œã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç”Ÿæ´»&quot;&gt;&lt;a href=&quot;#ç”Ÿæ´»&quot; class=&quot;headerlink&quot; title=&quot;ç”Ÿæ´»&quot;&gt;&lt;/a&gt;ç”Ÿæ´»&lt;/h4&gt;&lt;p&gt;å››æœˆçš„æ—¶å€™å»äº†è¶Ÿæ—¥æœ¬ï¼Œèµ°äº†ä¸œäº¬å’Œä¼Šä¸œä¸¤åº§åŸå¸‚ã€‚åœ¨ä¸œäº¬å…­æœ¬æœ¨çš„è§‚æ™¯å°æ‹äº†é¢˜å›¾è¿™å¼ å¤œæ™¯ã€‚ä¼Šè±†åŠå²›çš„æ€§ä»·æ¯”å¾ˆé«˜ï¼Œå’Œç‰›æ¯”åœ¨ä¸œäº¬åƒçš„æ›´å¥½åƒï¼Œå› ä¸ºæ²¡ä»€ä¹ˆæ¸¸å®¢ï¼Œçœ‹åˆ°äº†è›®å¤šæ›´å¸‚äº•çš„åœºæ™¯ã€‚æ„Ÿè§‰å‡ºæ¥ç©è¿˜æ˜¯æ…¢æ‚ æ‚ çš„ä¼šæ¯”è¾ƒæœ‰æ„æ€ã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äº‹æ˜¯ï¼Œå¹´åº•æŠŠæˆ·å£è¿åˆ°äº†æˆéƒ½ã€‚ä¹°æˆ¿å’Œå®šå±…è¿˜ä¸ä¸€å®šæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œåº”è¯¥è¦ç­‰å·¥ä½œèƒ½åŠ›å†æé«˜ä¸€äº›ï¼Œä¸é‚£ä¹ˆèœä¹‹åå†è¯´ã€‚æ—¶éš”ä¸‰å¹´åˆå»äº†ä¸€æ¬¡æˆéƒ½ï¼Œé™¤äº†å¥½åƒæ›´æ„Ÿè§‰æ˜¯çœŸçš„å®‰é€¸ã€‚&lt;/p&gt;
&lt;p&gt;å°±åœ¨è·¨å¹´è¿™ä¸¤å¤©ï¼Œæˆ‘æ¬å®¶åˆ°äº†æœ›äº¬è¿™è¾¹ï¼Œæ¢äº†ä¸€ä¸ªä¸€å±…å®¤ï¼Œæ›´é€‚åˆçŒ«çŒ«ä½ã€‚ç¦»å…¬å¸è¿‘ä¸€äº›ï¼ŒèŠ‚çœäº†é€šå‹¤æ—¶é—´ï¼Œæƒ³æŠŠèŠ‚çœçš„æ—¶é—´ç”¨åœ¨å¥èº«ä¸Šã€‚æ¯•ä¸šä¸€å¹´åŠï¼Œä½“è´¨æ˜¯ç¨³æ­¥åœ°ä¸‹é™ï¼Œç²¾åŠ›ä¸å¤ªå¤Ÿç”¨ï¼Œå—œç³–è¿™ä¸€åä¹ æƒ¯ä¹Ÿæ²¡æœ‰å¤šå¤§å¥½è½¬ã€‚å†è¿™æ ·ä¸‹å»åº”è¯¥æ˜¯è¿Ÿæ—© ğŸ’Šã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¹´æœ‰åœ¨åšåŸºé‡‘å®šæŠ•ï¼Œæ”¶ç›Š 10% å·¦å³ï¼Œåªæ˜¯å¹´åº•ç”±äºè®¢æ˜å¹´å‡ºè¡Œçš„æœºç¥¨é…’åº—åƒäº†æ³¢åœŸï¼Œæœ€åä¸¤ä¸ªæœˆæ²¡æœ‰ç»§ç»­æŠ•å…¥äº†ã€‚è¿™ç§å¼ºåˆ¶å‚¨è“„çš„ç†è´¢æ–¹å¼ç¡®å®å¾ˆå®ç”¨ï¼Œåªæ˜¯éœ€è¦æ¯æœˆéƒ½åœ¨å‘è–ªæ—¥æŠ•å‡ºå»ï¼Œå…å¾—æœ€ååˆèŠ±è¶…äº†å˜æœˆå…‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ğŸ“š-å’Œ-ğŸ¬&quot;&gt;&lt;a href=&quot;#ğŸ“š-å’Œ-ğŸ¬&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“š å’Œ ğŸ¬&quot;&gt;&lt;/a&gt;ğŸ“š å’Œ ğŸ¬&lt;/h4&gt;&lt;p&gt;ä»Šå¹´ä¸€å…±çœ‹äº† 13 æœ¬ä¹¦ï¼Œå»å¹´åˆ¶å®šçš„çœ‹ä¹¦è®¡åˆ’åŸºæœ¬å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;ã€Šå­¦ä¹ JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šç¦…ä¸æ‘©æ‰˜è½¦ç»´ä¿®è‰ºæœ¯ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“ : ä»å°å·¥åˆ°ä¸“å®¶ã€‹&lt;/li&gt;
&lt;li&gt;ã€ŠNode.jså®æˆ˜ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šå›¾è§£HTTPã€‹&lt;/li&gt;
&lt;li&gt;ã€ŠWebå…¨æ ˆå·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šç‰›æ´¥é€šè¯†è¯»æœ¬ : æ•°å­¦ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šåˆ»æ„ç»ƒä¹ ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ·˜å®æŠ€æœ¯è¿™åå¹´ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šäº²å¯†å…³ç³»ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šåœ°çƒä¸å¤ªç©ºã€‹&lt;/li&gt;
&lt;li&gt;ã€Šä¸€é¦–å°å¤œæ›²ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ­»ç¥çš„ç²¾ç¡®åº¦ã€‹&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;åªæ˜¯æŠ€æœ¯ä¸Šæ²¡çœ‹ä»€ä¹ˆå¤§éƒ¨å¤´ï¼Œè¿˜æœ‰å‡ æœ¬å·²ç»çœ‹åˆ°æœ€åå‡ ç« ä½†æ˜¯è®¡åˆ’è¢«æ‰“ä¹±è¿Ÿè¿Ÿæ²¡æœ‰çœ‹å®Œã€‚&lt;/p&gt;
&lt;p&gt;ç”µå½±çœ‹äº† 79 éƒ¨ï¼Œä»è±†ç“£çš„æŠ¥å‘Šæ¥çœ‹è¿˜æ˜¯é™¢çº¿ç‰‡å±…å¤šï¼Œå¯èƒ½ä¹Ÿåæ˜ å‡ºäº†å¿ƒæ€æ¯”è¾ƒæµ®èºå§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ–°çš„è®¡åˆ’&quot;&gt;&lt;a href=&quot;#æ–°çš„è®¡åˆ’&quot; class=&quot;headerlink&quot; title=&quot;æ–°çš„è®¡åˆ’&quot;&gt;&lt;/a&gt;æ–°çš„è®¡åˆ’&lt;/h4&gt;&lt;p&gt;è¿™é‡Œåªåˆ—ä¸¾ä¸€äº›æ€¥åˆ‡éœ€è¦å®Œæˆï¼ˆä¸‰ä¸ªæœˆå†…ï¼‰çš„äº‹ã€‚åœ¨æ­¤æ¨èä¸€ä¸ªæœ€è¿‘æ„Ÿè§‰å¾ˆå¥½ç”¨çš„ APPï¼Œ &lt;a href=&quot;https://www.v2ex.com/t/413134#reply11&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æˆ‘çš„å°ç›®æ ‡&lt;/a&gt;ï¼Œæ˜¯ç”±ä¸€å iOS å¼€å‘è€…ç‹¬ç«‹å¼€å‘çš„ä¸ªäººä½œå“ï¼Œå…¶ä¸­é›†æˆäº†ç•ªèŒ„é’Ÿä¸å•æ ¸å·¥ä½œæ³•ï¼Œé‡‘å¸ç§¯æ”’ä¸æ¶ˆè€—è¿™ç§ç±»ä¼¼äºæ‰“æ€ªå‡çº§çš„æ¨¡å¼å¾ˆé€‚åˆæˆ‘ã€‚&lt;/p&gt;
&lt;p&gt;å¾…åŠäº‹é¡¹ï¼š&lt;br&gt;1.è¯»å®Œã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹&lt;br&gt;2.å®Œæˆã€ŠGit åŸç†è§£æã€‹çš„ blog &amp;amp;&amp;amp; åˆ†äº«&lt;br&gt;3.ç§»åŠ¨ç«¯é¢„æ¸²æŸ“æ–¹æ¡ˆ&lt;/p&gt;
&lt;p&gt;ä¹ æƒ¯å…»æˆï¼š&lt;br&gt;1.leetcodeæ¯å‘¨ä¸€é¢˜&lt;br&gt;2.æ¯å‘¨å¥èº«ä¸€æ¬¡ï¼ˆçœ‹çœ‹å‰äº”å‘¨é™ä½“è„‚çš„æ•ˆæœå¦‚ä½•&lt;br&gt;3.æ¯å‘¨åœ¨æ˜é‡‘ç¿»è¯‘è®¡åˆ’æ ¡å¯¹/æ¨èæ–‡ç« ä¸€æ¬¡&lt;/p&gt;
&lt;h4 id=&quot;Less-is-more&quot;&gt;&lt;a href=&quot;#Less-is-more&quot; class=&quot;headerlink&quot; title=&quot;Less is more&quot;&gt;&lt;/a&gt;Less is more&lt;/h4&gt;&lt;p&gt;æœ€åè¿˜æ˜¯æ€»ç»“ä¸€ä¸‹ï¼Œç”Ÿæ´»å’Œå·¥ä½œä¸Šéƒ½æ²¡æœ‰é“¶å¼¹ï¼Œå¥½å¥½ç®¡ç†ç”Ÿæ´»ä¸ä»£ç çš„å¤æ‚åº¦ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/tokyo-in-2017.jpg&quot; alt=&quot;tokyo in 2017&quot;&gt;&lt;/p&gt;
&lt;p&gt;2017: no silver bullet.&lt;/p&gt;
    
    </summary>
    
      <category term="summary" scheme="https://blog.colafornia.me/categories/summary/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€ŠPragmatic Programmerã€‹</title>
    <link href="https://blog.colafornia.me/post/2017/reading-pragmatic-programmer/"/>
    <id>https://blog.colafornia.me/post/2017/reading-pragmatic-programmer/</id>
    <published>2017-09-15T15:32:00.000Z</published>
    <updated>2019-10-24T02:22:04.204Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=140159398,1086926125&amp;amp;fm=27&amp;amp;gp=0.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://book.douban.com/subject/5387402/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è±†ç“£åœ°å€&lt;/a&gt;&lt;br&gt;è¿™æœ¬ä¹¦çš„ä¸­æ–‡ç‰ˆè¢«ç¿»è¯‘ä¸ºã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“â€”â€”ä»å°å·¥åˆ°ä¸“å®¶ã€‹ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹ä¸­äºŒï¼Œå…¶å®åŸåç›´è¯‘ã€Šæ³¨é‡å®æ•ˆçš„ç¨‹åºå‘˜ã€‹å°±å¾ˆåˆé€‚äº†ã€‚&lt;br&gt;å®šä½äºç»™åˆçº§å¼€å‘äººå‘˜é˜…è¯»ï¼Œæ¶‰åŠåˆ°è½¯ä»¶å·¥ç¨‹å¼€å‘çš„æ–¹æ–¹é¢é¢ï¼Œæ‘’å¼ƒå¹³æ—¶æ‰€å…³æ³¨çš„è¯­è¨€ç‰¹æ€§ï¼ŒæŠ€æœ¯ç»†èŠ‚ï¼Œè€Œæ˜¯é«˜å±‹å»ºç“´ï¼Œç€çœ¼äºæ­£ç¡®çš„è½¯ä»¶è®¾è®¡æ–¹æ³•å’Œåº”è¯¥å…·å¤‡çš„è½¯ä»¶å·¥ç¨‹æ„è¯†ã€‚ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªæœºä¼šäº†è§£è¡Œä¸šæœ¯è¯­ä¸å…¸æ•…ï¼‰&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€å·¥ç¨‹æ„è¯†&quot;&gt;&lt;a href=&quot;#ä¸€ã€å·¥ç¨‹æ„è¯†&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å·¥ç¨‹æ„è¯†&quot;&gt;&lt;/a&gt;ä¸€ã€å·¥ç¨‹æ„è¯†&lt;/h3&gt;&lt;p&gt;â‘  &lt;code&gt;Don&amp;#39;t Live with Broken Windows: ä¸è¦å®¹å¿ç ´çª—æˆ·&lt;/code&gt;&lt;br&gt;è¿™å…¶å®å°±æ˜¯æ‰€è¯´çš„â€œç ´çª—ç†è®ºâ€ï¼Œç ´çª—æˆ·ï¼ˆä½åŠ£çš„è®¾è®¡ï¼Œç³Ÿç³•çš„ä»£ç ï¼Œä¸´æ—¶å‡‘åˆå‡ºçš„å¯ä»¥ work çš„å¥‡æ€ª hack functionï¼‰å…·æœ‰ä¼ æŸ“æ€§ï¼Œåªä¼šå¯¼è‡´é¡¹ç›®ä¸­ç ´çª—æˆ·è¶Šæ¥è¶Šå¤šï¼Œä¸€å †ä¸´æ—¶çš„ hack ä¿®è¡¥å¼•èµ·è¿ç¯é—®é¢˜ï¼Œç›´åˆ°éš¾ä»¥ä¿®å¤ï¼Œç¨‹åºå´©æºƒã€‚&lt;br&gt;ç†µå¢å®šå¾‹å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸€ä¸ªå°é—­ç³»ç»Ÿæ€»æ˜¯è¶‹å‘äºç†µå¢ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„æ— åºç¨‹åº¦åªä¼šä¸æ–­å¢åŠ ã€‚è½¯ä»¶å¼€å‘ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸è¦å®¹å¿ç ´çª—æˆ·ï¼Œå°½å¿«ä¿®å¤ä»»ä½•å·²å¯Ÿè§‰åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;â‘¡ &lt;code&gt;DRY - Don&amp;#39;t Repeat Yourself ä¸è¦é‡å¤ä½ è‡ªå·±&lt;/code&gt;&lt;br&gt;   &lt;code&gt;Make It Easy to Reuse è®©å¤ç”¨å˜å¾—å®¹æ˜“&lt;/code&gt;&lt;br&gt;   &lt;code&gt;There Are No Final Decisions ä¸å­˜åœ¨æœ€ç»ˆå†³ç­–&lt;/code&gt;&lt;br&gt;ä¹Ÿæ˜¯éå¸¸æœ‰åçš„ &lt;code&gt;DRY&lt;/code&gt; åŸåˆ™ï¼Œä¸åœ¨ã€Šé‡æ„ã€‹ä¸ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸­å­¦ä¹ åˆ°çš„ç±»ä¼¼ï¼Œåº”ä½¿å¾—æˆ‘ä»¬çš„ç¨‹åºæ›´&lt;br&gt;ä»‹ç»äº†å‡ ç§å¯èƒ½å‡ºç°é‡å¤çš„åœºæ™¯ï¼Œåº”ä½¿å¾—ç¨‹åºå…·æœ‰æ­£äº¤æ€§ï¼Œä¸ä»…å‡ºäºå¥½ç»´æŠ¤çš„ç›®çš„ï¼Œä¹Ÿä¸ºäº†é¿å…ç”±äºéœ€æ±‚å˜æ›´è€Œæ‰©å±•æ€§ä¸å¤Ÿå¯¼è‡´éœ€è¦é‡å†™ã€‚ï¼ˆä»è¿™é‡Œçœ‹æ¥è½¯ä»¶å¼€å‘çš„å¸¸è§é—®é¢˜è¿™ä¹ˆå¤šå¹´éƒ½æ²¡å•¥å˜åŒ–ï¼‰&lt;br&gt;è¦è­¦æƒ•è‡ªå·±å‡ºäºæ‡’æƒ°è€Œåšçš„ Copy&amp;amp;Pasteï¼Œå®ƒä¸ä»…å¯¹é¡¹ç›®æ²¡ä»€ä¹ˆå¥½å¤„ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ¶åŠ£ä¹ æƒ¯â€çš„å¼€å§‹ã€‚&lt;br&gt;ç»´æŒä»£ç æ­£äº¤æ€§çš„æ–¹æ³•ï¼ˆå…¶å®ä¹Ÿæ˜¯é‡æ„åŸåˆ™ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®©ä½ çš„ä»£ç ä¿æŒè§£è€¦ï¼š&lt;code&gt;Law of Demeter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é¿å…ä½¿ç”¨å…¨å±€æ•°æ®&lt;/li&gt;
&lt;li&gt;é¿å…ç¼–å†™ç›¸ä¼¼çš„å‡½æ•°ï¼šå¯ä»¥é€šè¿‡ç­–ç•¥æ¨¡å¼å®ç°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â‘¢ &lt;code&gt;Estimate to Avoid Superises: ä¼°ç®—ï¼Œä»¥é¿å…å‘ç”Ÿæ„å¤–&lt;/code&gt;&lt;br&gt;   &lt;code&gt;Iterate the Schedule with the Code: é€šè¿‡ä»£ç å¯¹è¿›åº¦è¡¨è¿›è¡Œè¿­ä»£&lt;/code&gt;&lt;br&gt;ä¹¦ä¸­æåˆ°â€œä½¿ç”¨çš„æ—¶é—´å•ä½ä¼šå¯¹ç»“æœçš„è§£è¯»é€ æˆå½±å“â€ï¼Œå¹¶ç”±æ­¤æåˆ°äº†ç›¸åº”çš„å»ºè®®ä¼°ç®—å•ä½ï¼Œè¿™ä¸ªè¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„:&lt;br&gt;&lt;img src=&quot;https://file.sankuai.com/pan/im/1/image/AQhd2cqjdxpb_PAKXwAAElX88ApY@640w_1l?t=b&amp;amp;w=640&amp;amp;h=222&quot; alt=&quot;estimate&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™åªç®—ä¸€äº›ä¼°ç®—ç»éªŒï¼ŒçœŸæ­£æƒ³è¿›è¡Œå‡†ç¡®æœ‰æ•ˆçš„ä¼°ç®—ï¼Œè¿˜æ˜¯è¦ä¸æ–­å¤ç›˜æ£€æµ‹ï¼Œå»ºç«‹è‡ªå·±çš„ç³»ç»Ÿæ¨¡å‹ï¼Œç»„ç»‡å¼€å‘ä¸­æ‰€ç”¨çš„æ­¥éª¤ï¼Œè¿›è¡Œåˆç†çš„æ¨¡å—åˆ’åˆ†æ¥ä¼°ç®—é¡¹ç›®è¿›åº¦ã€‚&lt;/p&gt;
&lt;p&gt;â‘£ &lt;code&gt;Keep Knowledge in Plain Text: ç”¨çº¯æ–‡æœ¬ä¿å­˜çŸ¥è¯†&lt;/code&gt;&lt;br&gt;   &lt;code&gt;Configure, Don&amp;#39;t Integrate: è¦é…ç½®ï¼Œä¸è¦é›†æˆ&lt;/code&gt;&lt;br&gt;   &lt;code&gt;Put Abstractions in Code, Details in Metdata: å°†æŠ½è±¡æ”¾è¿›ä»£ç ï¼Œç»†èŠ‚æ”¾è¿›å…ƒæ•°æ®&lt;/code&gt;&lt;br&gt;è¿™é‡Œæåˆ°äº†ä½¿è€¦åˆå‡å°‘è‡³æœ€å°‘çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨ &lt;code&gt;Metadata&lt;/code&gt; å…ƒæ•°æ®ï¼Œè®©æˆ‘ä»¬çš„ç³»ç»Ÿå˜å¾—é«˜åº¦å¯é…ç½®ã€‚å…ƒæ•°æ®æ˜¯å…³äºæ•°æ®çš„æ•°æ®ï¼Œæ¯”å¦‚è¯´æ•°æ®åº“ &lt;code&gt;schema&lt;/code&gt;ï¼Œå¯¹å­—æ®µè¿›è¡Œæè¿°ã€‚&lt;br&gt;é€šè¿‡ä»¥å£°æ˜æ–¹å¼æ€è€ƒï¼Œç”±å…ƒæ•°æ®é©±åŠ¨çš„åº”ç”¨å°†è¿«ä½¿æˆ‘ä»¬è§£é™¤è®¾è®¡è€¦åˆï¼Œæ¨è¿Ÿç»†èŠ‚å¤„ç†å¹¶å¤§å¤§æåˆ°äº†å¯å¤ç”¨æ€§ï¼Œèƒ½å¿«é€Ÿå“åº”ç”±éœ€æ±‚å˜æ›´å¯¼è‡´çš„æ”¹åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;â‘¤ &lt;code&gt;Don&amp;#39;t Program by Coincidence ä¸è¦é å·§åˆç¼–ç¨‹&lt;/code&gt;&lt;br&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•ä¹Ÿæ˜¾è€Œæ˜“è§çš„äº‹ï¼Œç„¶è€Œè¿˜æ˜¯ä¼šç»å¸¸å‡ºç°â€œå¥½ä¸å®¹æ˜“è·‘èµ·æ¥äº†ï¼Œå“ªéƒ½ä¸è¦åŠ¨ï¼Œå…ˆè¿™æ ·å§â€ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿæ˜¯ä¼šä¸ç»æ„åœ°å¿½ç•¥è¿™ä»¶äº‹ï¼Œéœ€è¦è­¦æƒ•ï¼Œæ­¤æ—¶èƒ½å®ç°å¾ˆå¯èƒ½æ˜¯ç”±äºæ­£å¤„äºè¾¹ç•Œæ¡ä»¶ï¼Œåªæ˜¯å¶ç„¶ã€‚&lt;br&gt;å› æ­¤ä¸ä»…è¦ç”¨ case æµ‹è¯•æˆ‘ä»¬çš„ä»£ç ï¼Œè¿˜è¦å¯¹æµ‹è¯• case è¿›è¡Œæ·±æ€ï¼Œé€šè¿‡ä¸€äº›è¦†ç›–ä¸å…¨ã€å¶ç„¶æƒ…å†µçš„ case å¹¶ä¸æ„å‘³ç€ä»£ç æ˜¯ OK çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€å¼€å§‹å®é™…çš„å¼€å‘&quot;&gt;&lt;a href=&quot;#äºŒã€å¼€å§‹å®é™…çš„å¼€å‘&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€å¼€å§‹å®é™…çš„å¼€å‘&quot;&gt;&lt;/a&gt;äºŒã€å¼€å§‹å®é™…çš„å¼€å‘&lt;/h3&gt;&lt;p&gt;â‘  &lt;code&gt;Estimate the Order of Your Algorithms ç®—æ³•é€Ÿç‡&lt;/code&gt;&lt;br&gt;ä¹¦ä¸­ä¹Ÿç®€å•ä»‹ç»äº† &lt;code&gt;å¤§Oè¡¨ç¤ºæ³•&lt;/code&gt; ä¸ä¸€äº›å¸¸è§ç®—æ³•çš„å¤æ‚åº¦ã€‚åœ¨è¿™é‡Œè¦ç‰¢è®°ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µåšå‡ºé€‰æ‹©ï¼Œè¿‡åº¦è¿½æ±‚ç®—æ³•ä¸Šçš„ä¼˜åŒ–è€Œå¢åŠ äº†æµ‹è¯•ç»´æŠ¤çš„æˆæœ¬å¾—ä¸å¿å¤±ã€‚&lt;/p&gt;
&lt;p&gt;â‘¡ &lt;code&gt;Don&amp;#39;t Gather Requirement - Dig for Them ä¸è¦æœé›†éœ€æ±‚â€”â€”æŒ–æ˜å®ƒä»¬&lt;/code&gt;&lt;br&gt;&lt;code&gt;Abstractions Live Longer than Details æŠ½è±¡æ¯”ç»†èŠ‚æ´»å¾—æ›´é•¿ä¹…&lt;/code&gt;&lt;br&gt;è¦å¯¹éœ€æ±‚æ•æ„Ÿï¼Œä¸å‡æ€ç´¢å®Œå…¨æŒ‰ç…§ PM æè¿‡æ¥çš„éœ€æ±‚æè¿°è¿›è¡Œå¼€å‘ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¡¹ç›®ä¸­çš„ä»£ç æ‰©å±•æ€§ä¸å¥½ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œâ€œåªæœ‰äººäº‹éƒ¨é—¨å¯ä»¥æŸ¥çœ‹æ¡£æ¡ˆâ€ä¸â€œåªæœ‰æŒ‡å®šäººå‘˜æ‰èƒ½æŸ¥çœ‹å‘˜å·¥æ¡£æ¡ˆâ€è¿™å°±æ˜¯ä¸¤ä¸ªä¸ä¸€æ ·çš„æ¦‚å¿µã€‚å®Œå…¨æŒ‰ç…§å‰è€…æ¥å¼€å‘ï¼Œå¾ˆæœ‰å¯èƒ½åªæ˜¯å°†äººäº‹éƒ¨é—¨çš„ç»„ç»‡idå†™å…¥ä»£ç ï¼Œè€Œåè€…æ„å‘³ç€æˆ‘ä»¬å¯èƒ½éœ€è¦åšä¸€ä¸ªæƒé™æœåŠ¡è€Œä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œåº”è¯¥ &lt;strong&gt;æŠŠæ”¿ç­–çš„æ–‡æ¡£ä¸éœ€æ±‚çš„æ–‡æ¡£åˆ†å¼€ï¼Œä½¿éœ€æ±‚ç§°ä¸ºä¸€èˆ¬é™ˆè¿°ï¼Œå¹¶æŠŠæ”¿ç­–ä¿¡æ¯ä½œä¸ºä¾‹å­å‘ç»™å¼€å‘è€…ï¼Œä½œä¸ºåœ¨å…·ä½“è§†çº¿ä¸­éœ€è¦æ”¯æŒçš„ä¸€ä¸ª Caseï¼Œæœ€åæ”¿ç­–å¯ä»¥ç§°ä¸ºåº”ç”¨ä¸­çš„å…ƒæ•°æ®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‰¾å‡ºç”¨æˆ·ä¸ºä½•è¦åšç‰¹å®šäº‹æƒ…çš„&lt;code&gt;èµ·å› &lt;/code&gt;ï¼Œè€Œä¸åªæ˜¯ä»–ä»¬ç›®å‰åšè¿™ä»¶äº‹çš„&lt;code&gt;æ–¹å¼&lt;/code&gt;ã€‚å› ä¸ºä½œä¸ºå¼€å‘è€…æ˜¯è¦è§£å†³ç”¨æˆ·çš„å•†ä¸šé—®é¢˜ï¼Œè€Œä¸åªæ˜¯æ»¡è¶³ç”¨æˆ·é™ˆè¿°çš„éœ€æ±‚ï¼Œè§£å†³éœ€æ±‚çš„æ–¹å¼æ˜¯å¾ˆæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œæ·±å…¥æŒ–æ˜åˆ°è¦è§£å†³çš„æ ¹æœ¬é—®é¢˜ï¼Œæ‰æ˜¯å¯ä»¥ä½¿å¾—ç³»ç»Ÿé«˜æ•ˆï¼Œå¼€å‘äººå‘˜ä¹Ÿä¸å¿…ä¸ºéœ€æ±‚ç–²äºå¥”å‘½çš„è§£å†³æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¼–å†™æˆ‘ä»¬å¼€å‘äººå‘˜è‡ªå·±ä½¿ç”¨ã€æŸ¥é˜…çš„éœ€æ±‚æ–‡æ¡£æ—¶ï¼Œåº”æ³¨é‡&lt;code&gt;ä¿æŒæŠ½è±¡&lt;/code&gt;ï¼Œåœ¨æ¶‰åŠéœ€æ±‚çš„åœ°æ–¹ï¼Œæœ€ç®€å•çš„ï¼Œèƒ½å¤Ÿå‡†ç¡®åœ°åæ˜ å•†ä¸šéœ€è¦çš„é™ˆè¿°æ‰æ˜¯æœ€å¥½çš„ï¼Œå¿…é¡»æŠŠ&lt;code&gt;åº•å±‚çš„è¯­ä¹‰ä¸å˜é¡¹&lt;/code&gt;å½“åšéœ€æ±‚è¿›è¡Œæ•æ‰ã€‚å¦‚ä¸Šä¸ªä¾‹å­ï¼Œæ§åˆ¶å¯ä»¥æŸ¥çœ‹æ¡£æ¡ˆçš„æƒé™ï¼Œå³æ˜¯è¯­ä¹‰ä¸å˜é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;â‘¢ &lt;code&gt;Listen to Nagging Doubts -Start When You&amp;#39;re Ready ç­‰ä½ å‡†å¤‡å¥½å†å¼€å§‹&lt;/code&gt;&lt;br&gt;è¿™é‡Œè®¨è®ºäº†â€œå¯åŠ¨ææƒ§ç—‡â€ï¼Œè¿™ä»¶äº‹æˆ‘ä¹Ÿç»å¸¸é‡åˆ°ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åæ€åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°å¯åŠ¨ææƒ§ç—‡ï¼Œæ¯æ¬¡éƒ½æ˜¯æ‹–å»¶è®¸ä¹…æœ€ååœ¨æ— é™æŠµè§¦å’Œç„¦è™‘ä¸­æŠŠé¡¹ç›®èµ¶å®Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¹¦ä¸­æå‡ºåº”è¯¥æ³¨æ„åˆ°è‡ªå·±çš„ç–‘è™‘ï¼Œåœ¨é•¿æ—¶é—´çš„ç§¯ç´¯åï¼Œæˆ‘ä»¬çš„ç›´è§‰ä¹Ÿä¼šå¾ˆæœ‰ç”¨å¤„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°è¿™ç§ç–‘è™‘åªæ˜¯å‡ºäºæ‹–å»¶çš„è¯ï¼Œåº”è¯¥ &lt;strong&gt;é€‰æ‹©ä¸€ä¸ªä½ è§‰å¾—ä¼šæœ‰å›°éš¾çš„åœ°æ–¹ï¼Œå¼€å§‹è¿›è¡ŒæŸç§â€œæ¦‚å¿µéªŒè¯â€&lt;/strong&gt;ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå¿«é€Ÿåœ°ä½¿å¯åŠ¨èµ·æ¥äº†ï¼Œå› ä¸ºè¡ŒåŠ¨ç»“æœæ— éæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªå›°éš¾å¯ä»¥è§£å†³ç„¶åå°±å¯ä»¥æ¶ˆé™¤ç–‘è™‘æ­£å¼æŠ•å…¥å¼€å‘ï¼Œå¦ä¸€ç§æˆ‘ä»¬å‘ç°è¿™ä¸ªåœ°æ–¹ç¡®å®æœ‰é—®é¢˜ï¼Œç„¶åé€šè¿‡æ±‚åŠ©å¤–ç•Œæˆ–è€…æ›´æ”¹éœ€æ±‚æ¥æ¨è¿›å®ƒï¼Œæ€»ä¹‹é¡¹ç›®æ˜¯æœ‰äº†ä¸€ä¸ªä¸å°çš„è¿›å±•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°åªæ˜¯è®°äº†ä¸€äº›æˆ‘åœ¨é˜…è¯»ä¸­æ„Ÿè§¦æ¯”è¾ƒå¤šçš„åœ°æ–¹ï¼Œå®é™…ä¸Šè¿™æœ¬ä¹¦è™½ç„¶æ˜¯ä¸€ä¸ªè›®è¿œä¹…çš„â€œåè‘—â€ï¼Œå…¶ä¸­æ¦‚å¿µéƒ½å¾ˆç»å…¸å¹¶ä¸è¿‡æ—¶ï¼Œä¹¦ä¸­æ¯é¡µéƒ½æœ‰å¯ç¤ºã€‚è¿˜æ˜¯å¸Œæœ›æˆ‘åœ¨å®ä¹ æœŸå°±æœ‰æœºä¼šçœ‹åˆ°è¿™æœ¬ä¹¦çš„ï¼Œç°åœ¨å¼€å§‹ä¹Ÿå¹¶ä¸æ™šï¼Œå¹¶ä¸”åº”è¯¥å¤šå›é¡¾ï¼Œéšç€å¼€å‘ç»éªŒçš„å¢å¤šåº”è¯¥æ”¶è·ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=140159398,1086926125&amp;amp;fm=27&amp;amp;gp=0.jpg&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://book.douban.com/subject/5387402/&quot;&gt;è±†ç“£åœ°å€&lt;/a&gt;&lt;br&gt;è¿™æœ¬ä¹¦çš„ä¸­æ–‡ç‰ˆè¢«ç¿»è¯‘ä¸ºã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“â€”â€”ä»å°å·¥åˆ°ä¸“å®¶ã€‹ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹ä¸­äºŒï¼Œå…¶å®åŸåç›´è¯‘ã€Šæ³¨é‡å®æ•ˆçš„ç¨‹åºå‘˜ã€‹å°±å¾ˆåˆé€‚äº†ã€‚&lt;br&gt;å®šä½äºç»™åˆçº§å¼€å‘äººå‘˜é˜…è¯»ï¼Œæ¶‰åŠåˆ°è½¯ä»¶å·¥ç¨‹å¼€å‘çš„æ–¹æ–¹é¢é¢ï¼Œæ‘’å¼ƒå¹³æ—¶æ‰€å…³æ³¨çš„è¯­è¨€ç‰¹æ€§ï¼ŒæŠ€æœ¯ç»†èŠ‚ï¼Œè€Œæ˜¯é«˜å±‹å»ºç“´ï¼Œç€çœ¼äºæ­£ç¡®çš„è½¯ä»¶è®¾è®¡æ–¹æ³•å’Œåº”è¯¥å…·å¤‡çš„è½¯ä»¶å·¥ç¨‹æ„è¯†ã€‚ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªæœºä¼šäº†è§£è¡Œä¸šæœ¯è¯­ä¸å…¸æ•…ï¼‰&lt;br&gt;
    
    </summary>
    
      <category term="programmer reading" scheme="https://blog.colafornia.me/categories/programmer-reading/"/>
    
    
  </entry>
  
  <entry>
    <title>Make Shell/Git Better</title>
    <link href="https://blog.colafornia.me/post/2017/make-shell-and-git-better/"/>
    <id>https://blog.colafornia.me/post/2017/make-shell-and-git-better/</id>
    <published>2017-09-15T09:43:00.000Z</published>
    <updated>2019-10-24T02:22:04.204Z</updated>
    
    <content type="html">&lt;h2 id=&quot;1-èµ·æ‰‹å¼-oh-my-zsh&quot;&gt;&lt;a href=&quot;#1-èµ·æ‰‹å¼-oh-my-zsh&quot; class=&quot;headerlink&quot; title=&quot;1.èµ·æ‰‹å¼ oh-my-zsh&quot;&gt;&lt;/a&gt;1.èµ·æ‰‹å¼ oh-my-zsh&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/5c385f15f3eaedb72cfcfbbaf75355b700ac0757/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6f686d797a73682f6f682d6d792d7a73682d6c6f676f2e706e67&quot; alt=&quot;oh-my-zsh&quot;&gt;&lt;/p&gt;
&lt;p&gt;zsh è¢«ç§°ä½œæ˜¯æœ€å¼ºå¤§çš„ shellï¼Œè€Œ oh-my-zsh åˆ™æ˜¯æœ€æµè¡Œçš„ zsh é…ç½®æ–‡ä»¶ï¼Œæä¾›äº†ä¸°å¯Œçš„ä¸»é¢˜ä»¥åŠå¤§é‡æ’ä»¶ï¼Œæå¤§åœ°æ‰©å±•äº† zsh çš„åŠŸèƒ½ã€‚&lt;br&gt;å¯ä»¥æ— è„‘å¼•å…¥ï¼Œä¾¿å¾—åˆ°äº†æœ€åŸºæœ¬åˆå¥½ç”¨çš„æ–‡ä»¶å¤¹è·³è½¬ï¼Œè·¯å¾„ã€å‘½ä»¤ã€å‚æ•°è¡¥å…¨ç­‰ä¾¿åˆ©æ“ä½œã€‚&lt;br&gt;æ¨è plugin: git, &lt;a href=&quot;https://github.com/wting/autojump/wiki&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;autojump&lt;/a&gt;, &lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/osx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;osx&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-ä¼˜åŒ–ä½ çš„-Git&quot;&gt;&lt;a href=&quot;#2-ä¼˜åŒ–ä½ çš„-Git&quot; class=&quot;headerlink&quot; title=&quot;2.ä¼˜åŒ–ä½ çš„ Git&quot;&gt;&lt;/a&gt;2.ä¼˜åŒ–ä½ çš„ Git&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;â‘  ç¾åŒ– diff&lt;/strong&gt;&lt;br&gt;Git è‡ªå·±çš„ git diff è¿˜æ˜¯è›®ä¸å¥½ç”¨ä¹Ÿä¸å¥½çœ‹çš„ï¼Œæ–‡ä»¶åå’Œ diff å†…å®¹ä¸å¤ªå¥½å®šä½ã€‚&lt;br&gt;åŸºäº &lt;a href=&quot;https://github.com/so-fancy/diff-so-fancy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;diff-so-fancy&lt;/a&gt; æˆ‘ä»¬å¯ä»¥åšä¸€äº›ç¾åŒ–å·¥ä½œã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install diff-so-fancy -g&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶ååœ¨ &lt;code&gt;~/.gitconfig&lt;/code&gt; æ–‡ä»¶ä¸­ç¼–è¾‘&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[alias]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  d = &amp;quot;!f() &amp;#123; [ -z \&amp;quot;$GIT_PREFIX\&amp;quot; ] || cd \&amp;quot;$GIT_PREFIX\&amp;quot; &amp;amp;&amp;amp; git diff --color \&amp;quot;$@\&amp;quot; | diff-so-fancy  | less --tabs=4 -    RFX; &amp;#125;; f&amp;quot;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥å‚è€ƒ &lt;code&gt;diff-so-fancy&lt;/code&gt; ä¸­çš„æ¨èé¢œè‰²åšé…ç½®ï¼Œç„¶åé€šè¿‡ &lt;code&gt;git d&lt;/code&gt; å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ä¼˜åŒ–è¿‡çš„ diff ä¿¡æ¯äº†&lt;br&gt;ï¼ˆgit diff VS git dï¼‰&lt;br&gt;&lt;img src=&quot;https://cloud.githubusercontent.com/assets/39191/13622719/7cc7c54c-e555-11e5-86c4-7045d91af041.png&quot; alt=&quot;diff&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â‘¡ ç¾åŒ– log&lt;/strong&gt;&lt;br&gt;git log æ‰“å‡ºæ¥çš„æ—¥å¿—ç»“æ„æ˜¯å®Œå…¨æ‰å¹³çš„ï¼Œä¿¡æ¯ä¹Ÿä¸å¤Ÿå…¨ï¼Œä¾ç„¶æ˜¯å¾ˆéš¾ä¸€çœ¼æ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ä¿¡æ¯&lt;br&gt;ä¾ç„¶æ˜¯åœ¨ &lt;code&gt;~/.gitconfig&lt;/code&gt; ä¸­ç¼–è¾‘ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[alias]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;lg = log --graph --abbrev-commit --decorate --format=format:&amp;apos;%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset)     %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)&amp;apos; --all&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¿¡æ¯æ¸…æ™°å¥½çœ‹äº†å¾ˆå¤šï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æ¯ä¸ªæäº¤æ‰€åœ¨çš„åˆ†æ”¯åŠå…¶åˆ†åŒ–è¡åˆçš„æƒ…å†µ&lt;br&gt;(git log VS git lg)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o7ts2uaks.bkt.clouddn.com/6E897688-D526-4DC5-A373-05FB41734A91.png&quot; alt=&quot;log&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://o7ts2uaks.bkt.clouddn.com/84B43431-AB74-446F-8442-3DFCD8E8E8BE.png&quot; alt=&quot;lg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â‘¢ å‘½ä»¤åŠ å¼º &lt;a href=&quot;https://github.com/tj/git-extras&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;git-extras&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;TJå‡ºå“çš„ git å‘½ä»¤æ‰©å±•é›†ï¼Œåº”æœ‰å°½æœ‰ï¼Œè¦å•¥æœ‰å•¥ï¼ŒæŒ‰éœ€å–ç”¨&lt;/p&gt;
&lt;h2 id=&quot;3-ç»ˆç«¯å¤ç”¨ç¥å™¨-Tmux&quot;&gt;&lt;a href=&quot;#3-ç»ˆç«¯å¤ç”¨ç¥å™¨-Tmux&quot; class=&quot;headerlink&quot; title=&quot;3.ç»ˆç«¯å¤ç”¨ç¥å™¨ Tmux&quot;&gt;&lt;/a&gt;3.ç»ˆç«¯å¤ç”¨ç¥å™¨ Tmux&lt;/h2&gt;&lt;p&gt;Tmux æ˜¯ Linux ä¸­ä¸€ç§ç®¡ç†çª—å£çš„ç¨‹åºï¼Œç”¨ Tmux çš„ä¸»è¦åŸå› æ˜¯å®ƒæä¾›äº†ä¸€ä¸ªçª—ä½“ç»„éšæ—¶å­˜å‚¨å’Œæ¢å¤çš„åŠŸèƒ½ã€‚&lt;br&gt;ç°åœ¨æˆ‘ä»¬ç»å¸¸åœ¨å¼€å‘æ—¶ç»™ä¸€ä¸ªé¡¹ç›®èµ·å¾ˆå¤š serverï¼Œwebpack server å ä¸€ä¸ª tabï¼Œmock server å ä¸€ä¸ª tabï¼Œå¼€çš„æ—¶å€™å¼€åŠå¤©ï¼Œå“ªä¸ªæ–­äº†è¿˜è¦æŒ¨ä¸ªæ‰¾ã€‚&lt;br&gt;æˆ–è€…ï¼Œåœ¨ç”¨ SSH ç™»å½•è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œè°ƒè¯•æ—¶ï¼Œå¼€äº†Nå¤šçª—å£ï¼Œè¿‡äº†ä¸€ä¼šå„¿å‘ç° &lt;code&gt;Broken Pipe&lt;/code&gt; ç®¡å­è£‚äº†ï¼Œåˆå¾—é‡æ¥ã€‚&lt;br&gt;Tmux å¯ä»¥å¸®åŠ©æˆ‘ä»¬ split çª—å£ä»¥åŠè¿›è¡Œç»ˆç«¯å¤ç”¨ä¿è¯å·¥ä½œç°åœºä¸ä¸¢å¤±ã€‚&lt;br&gt;&lt;a href=&quot;http://cenalulu.github.io/linux/tmux/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä½¿ç”¨ä¸å®‰è£…æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;4-ç»™å‘½ä»¤è¡Œä½¿ç”¨çš„ä»£ç†å·¥å…·-proxychains-ng&quot;&gt;&lt;a href=&quot;#4-ç»™å‘½ä»¤è¡Œä½¿ç”¨çš„ä»£ç†å·¥å…·-proxychains-ng&quot; class=&quot;headerlink&quot; title=&quot;4.ç»™å‘½ä»¤è¡Œä½¿ç”¨çš„ä»£ç†å·¥å…· proxychains-ng&quot;&gt;&lt;/a&gt;4.ç»™å‘½ä»¤è¡Œä½¿ç”¨çš„ä»£ç†å·¥å…· &lt;a href=&quot;https://github.com/rofl0r/proxychains-ng&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;proxychains-ng&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;ç”¨å…¬å¸çš„ mnpm é•œåƒå…¶å®å°±åŸºæœ¬ä¸éœ€è¦è¿™ä¸ªäº†ã€‚&lt;br&gt;è‡ªå·±æ­æœåŠ¡å™¨æˆ–è€…åœ¨å®¶é‡ŒåŠå…¬æœ‰éœ€æ±‚çš„è¯å¯ä»¥ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;5-commit-message-è§„èŒƒå·¥å…·-commitizen&quot;&gt;&lt;a href=&quot;#5-commit-message-è§„èŒƒå·¥å…·-commitizen&quot; class=&quot;headerlink&quot; title=&quot;5. commit message è§„èŒƒå·¥å…· commitizen&quot;&gt;&lt;/a&gt;5. commit message è§„èŒƒå·¥å…· &lt;a href=&quot;https://github.com/commitizen/cz-cli&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;commitizen&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;åˆ¶å®š Code Review è§„èŒƒæ—¶çœ‹åˆ°äº† &lt;a href=&quot;https://eggjs.org/zh-cn/contributing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Egg.js çš„ä»£ç è´¡çŒ®è§„èŒƒ&lt;/a&gt;&lt;br&gt;å…¶ä¸­æ€»ç»“äº†ä¸€æ¡å¥½çš„ï¼Œæœ‰æ„ä¹‰çš„ commit message åº”è¯¥åŒ…å«ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â‘  type: æœ¬æ¬¡ commit çš„ç±»å‹(feat/fix/stype/perfâ€¦.)&lt;br&gt;â‘¡ scope: æ”¹åŠ¨èŒƒå›´&lt;br&gt;â‘¢ subject: ç®€è¦æ¦‚è¿°æœ¬æ¬¡æäº¤åšäº†ä»€ä¹ˆ&lt;br&gt;â‘£ body: è¡¥å…… subject, å¯ä»¥ä¸å†™&lt;br&gt;â‘¤ footer: æœ¬æ¬¡æäº¤å…³è”çš„ issue, task&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰‹åŠ¨æŒ‰è¿™ä¸ªå†™è¿˜æŒºç´¯æŒºéš¾çš„ï¼Œå› æ­¤å†³å®šåœ¨å›¢é˜Ÿä¸­æ¨è¡Œä½¿ç”¨ commitizen&lt;br&gt;ç®€å•å¥½ç”¨ï¼Œç«‹ç«¿è§å½±&lt;br&gt;&lt;img src=&quot;https://github.com/commitizen/cz-cli/raw/master/meta/screenshots/add-commit.png&quot; alt=&quot;commitizen&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;6-å¥½ç©çš„-thefuck&quot;&gt;&lt;a href=&quot;#6-å¥½ç©çš„-thefuck&quot; class=&quot;headerlink&quot; title=&quot;6.å¥½ç©çš„ thefuck&quot;&gt;&lt;/a&gt;6.å¥½ç©çš„ &lt;a href=&quot;https://github.com/nvbn/thefuck&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;thefuck&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/nvbn/thefuck/master/example.gif&quot; alt=&quot;thefuck&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¥½ç©çš„å°å·¥å…·ï¼Œç»™å¼€å‘æ·»ç‚¹ä¹è¶£ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-èµ·æ‰‹å¼-oh-my-zsh&quot;&gt;&lt;a href=&quot;#1-èµ·æ‰‹å¼-oh-my-zsh&quot; class=&quot;headerlink&quot; title=&quot;1.èµ·æ‰‹å¼ oh-my-zsh&quot;&gt;&lt;/a&gt;1.èµ·æ‰‹å¼ oh-my-zsh&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/5c385f15f3eaedb72cfcfbbaf75355b700ac0757/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6f686d797a73682f6f682d6d792d7a73682d6c6f676f2e706e67&quot; alt=&quot;oh-my-zsh&quot;&gt;&lt;/p&gt;
&lt;p&gt;zsh è¢«ç§°ä½œæ˜¯æœ€å¼ºå¤§çš„ shellï¼Œè€Œ oh-my-zsh åˆ™æ˜¯æœ€æµè¡Œçš„ zsh é…ç½®æ–‡ä»¶ï¼Œæä¾›äº†ä¸°å¯Œçš„ä¸»é¢˜ä»¥åŠå¤§é‡æ’ä»¶ï¼Œæå¤§åœ°æ‰©å±•äº† zsh çš„åŠŸèƒ½ã€‚&lt;br&gt;å¯ä»¥æ— è„‘å¼•å…¥ï¼Œä¾¿å¾—åˆ°äº†æœ€åŸºæœ¬åˆå¥½ç”¨çš„æ–‡ä»¶å¤¹è·³è½¬ï¼Œè·¯å¾„ã€å‘½ä»¤ã€å‚æ•°è¡¥å…¨ç­‰ä¾¿åˆ©æ“ä½œã€‚&lt;br&gt;æ¨è plugin: git, &lt;a href=&quot;https://github.com/wting/autojump/wiki&quot;&gt;autojump&lt;/a&gt;, &lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/osx&quot;&gt;osx&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-ä¼˜åŒ–ä½ çš„-Git&quot;&gt;&lt;a href=&quot;#2-ä¼˜åŒ–ä½ çš„-Git&quot; class=&quot;headerlink&quot; title=&quot;2.ä¼˜åŒ–ä½ çš„ Git&quot;&gt;&lt;/a&gt;2.ä¼˜åŒ–ä½ çš„ Git&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;â‘  ç¾åŒ– diff&lt;/strong&gt;&lt;br&gt;Git è‡ªå·±çš„ git diff è¿˜æ˜¯è›®ä¸å¥½ç”¨ä¹Ÿä¸å¥½çœ‹çš„ï¼Œæ–‡ä»¶åå’Œ diff å†…å®¹ä¸å¤ªå¥½å®šä½ã€‚&lt;br&gt;åŸºäº &lt;a href=&quot;https://github.com/so-fancy/diff-so-fancy&quot;&gt;diff-so-fancy&lt;/a&gt; æˆ‘ä»¬å¯ä»¥åšä¸€äº›ç¾åŒ–å·¥ä½œã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="shell git linux" scheme="https://blog.colafornia.me/categories/shell-git-linux/"/>
    
    
  </entry>
  
  <entry>
    <title>è§£å†³ä¸­æ–‡æ‹¼éŸ³è¾“å…¥æ³•åœ¨inputç›‘å¬çš„é—®é¢˜</title>
    <link href="https://blog.colafornia.me/post/2017/fix-chinese-input-listener/"/>
    <id>https://blog.colafornia.me/post/2017/fix-chinese-input-listener/</id>
    <published>2017-08-22T12:16:00.000Z</published>
    <updated>2019-10-24T02:22:04.197Z</updated>
    
    <content type="html">&lt;h3 id=&quot;ä¸€ã€é—®é¢˜&quot;&gt;&lt;a href=&quot;#ä¸€ã€é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€é—®é¢˜&quot;&gt;&lt;/a&gt;ä¸€ã€é—®é¢˜&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/chinese-pinyin.gif&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é€šè¿‡ç›‘å¬ç”¨æˆ·è¾“å…¥ï¼Œå°†è¾“å…¥ä½œä¸º Keyword è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ˆåšäº†é˜²æŠ–ï¼‰å‘ç°æœ‰å¦‚å›¾é—®é¢˜ï¼Œä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³è¾“å…¥æ³•æ—¶ï¼Œæœªé€‰ä¸­æ‰€è¦çš„å­—è¯å‰ï¼Œä¼šè‡ªåŠ¨å°†è¾“å…¥æ³•åˆ†è¯è¿‡çš„æ‹¼éŸ³ä½œä¸ºæ–‡æœ¬ï¼Œç”±äºå®æ—¶ç›‘å¬è¾“å…¥ï¼Œå°±å­˜åœ¨å°† ceâ€™shi ä½œä¸º keyword æŸ¥è¯¢çš„é—®é¢˜äº†ã€‚&lt;br&gt;åœ¨è¿™é‡Œï¼Œå‰ç«¯éœ€è¦å¯¹æ‹¼éŸ³è¾“å…¥æ³•çš„è¿™ç§æƒ…å†µè¿›è¡Œå¤„ç†ã€‚&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€TL-DR-è§£å†³æ–¹æ³•&quot;&gt;&lt;a href=&quot;#äºŒã€TL-DR-è§£å†³æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€TL;DR è§£å†³æ–¹æ³•&quot;&gt;&lt;/a&gt;äºŒã€TL;DR è§£å†³æ–¹æ³•&lt;/h3&gt;&lt;p&gt;å¯ä»¥å€Ÿé‰´ &lt;code&gt;Vue.js&lt;/code&gt; çš„å¤„ç†æ–¹æ³•ï¼Œå¼•å…¥ &lt;code&gt;compositionstart&lt;/code&gt; å’Œ &lt;code&gt;compositionend&lt;/code&gt; äº‹ä»¶æ¥æ•è· &lt;code&gt;IME(input method editor)&lt;/code&gt; çš„å¯åŠ¨å’Œå…³é—­ã€‚&lt;br&gt;è¿™ä¸¤ä¸ªäº‹ä»¶ï¼Œç›®å‰æ˜¯IE9+æ”¯æŒï¼Œç§»åŠ¨ç«¯ Safari &amp;lt; 10.2 &amp;amp; UIWebView æš‚æ—¶æ— æ³•è§¦å‘ï¼Œå› æ­¤å¯ä»¥ä½œä¸º PC ç«¯äº§å“çš„é è°±æ–¹æ¡ˆã€‚&lt;br&gt;å®ç°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; node = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.querySelector(&lt;span class=&quot;string&quot;&gt;&#39;._orgtree&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; fireLock = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  node.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;compositionstart&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      fireLock = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  node.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;compositionend&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      fireLock = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  node.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;input&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!fireLock) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          searchOrgTree();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ä¸‰ã€æ€ä¹ˆæ›´æ”¾å¿ƒåœ°ç”¨&quot;&gt;&lt;a href=&quot;#ä¸‰ã€æ€ä¹ˆæ›´æ”¾å¿ƒåœ°ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ã€æ€ä¹ˆæ›´æ”¾å¿ƒåœ°ç”¨&quot;&gt;&lt;/a&gt;ä¸‰ã€æ€ä¹ˆæ›´æ”¾å¿ƒåœ°ç”¨&lt;/h3&gt;&lt;p&gt;è¿™é‡Œè¿˜æ˜¯çœ‹çœ‹ Vue.js çš„ä»£ç ï¼š&lt;a href=&quot;https://github.com/vuejs/vue/blob/c90b140e80f1bd5d01c733a5bd9fa6e9cb3c2b4d/src/platforms/web/runtime/directives/model.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;src/platforms/web/runtime/directives/model.js&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åªè´´æˆ‘ä»¬ç”¨åˆ°çš„&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  inserted (el, binding, vnode) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (vnode.tag === &lt;span class=&quot;string&quot;&gt;&#39;textarea&#39;&lt;/span&gt; || isTextInputType(el.type)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!binding.modifiers.lazy) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Safari &amp;lt; 10.2 &amp;amp; UIWebView doesn&#39;t fire compositionend when&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// switching focus before confirming composition choice&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// this also fixes the issue where some browsers e.g. iOS Chrome&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// fires &quot;change&quot; instead of &quot;input&quot; on autocomplete.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        el.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;change&#39;&lt;/span&gt;, onCompositionEnd)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!isAndroid) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          el.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;compositionstart&#39;&lt;/span&gt;, onCompositionStart)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          el.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;compositionend&#39;&lt;/span&gt;, onCompositionEnd)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onCompositionStart&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;e&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  e.target.composing = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onCompositionEnd&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;e&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// prevent triggering an input event for no reason&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!e.target.composing) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  e.target.composing = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  trigger(e.target, &lt;span class=&quot;string&quot;&gt;&#39;input&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;trigger&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;el, type&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; e = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createEvent(&lt;span class=&quot;string&quot;&gt;&#39;HTMLEvents&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  e.initEvent(type, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  el.dispatchEvent(e)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;For languages that require an IME (Chinese, Japanese, Korean etc.), youâ€™ll notice that v-model doesnâ€™t get updated during IME composition. If you want to cater for these updates as well, use input event instead.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Vue.js åœ¨ç¼–å†™ &lt;code&gt;v-model&lt;/code&gt; è¿™ä¸€æ ¸å¿ƒæŒ‡ä»¤æ—¶ç”¨åˆ°äº† &lt;code&gt;compositionstart&lt;/code&gt; å’Œ &lt;code&gt;compositionend&lt;/code&gt;  è¿™ä¸¤ä¸ªäº‹ä»¶ï¼Œä¿è¯åœ¨è¾“å…¥æ¡†äº¤äº’è¿‡ç¨‹ä¸­çš„æ–‡æœ¬å¹¶ä¸ä¼šè§¦å‘ &lt;code&gt;v-model&lt;/code&gt; æ›´æ–°ï¼Œåœ¨æºç ä¸­ä¹Ÿæ˜¯é’ˆå¯¹ Safari åšäº†å…¼å®¹å¤„ç†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¸€ã€é—®é¢˜&quot;&gt;&lt;a href=&quot;#ä¸€ã€é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€é—®é¢˜&quot;&gt;&lt;/a&gt;ä¸€ã€é—®é¢˜&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/chinese-pinyin.gif&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é€šè¿‡ç›‘å¬ç”¨æˆ·è¾“å…¥ï¼Œå°†è¾“å…¥ä½œä¸º Keyword è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ˆåšäº†é˜²æŠ–ï¼‰å‘ç°æœ‰å¦‚å›¾é—®é¢˜ï¼Œä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³è¾“å…¥æ³•æ—¶ï¼Œæœªé€‰ä¸­æ‰€è¦çš„å­—è¯å‰ï¼Œä¼šè‡ªåŠ¨å°†è¾“å…¥æ³•åˆ†è¯è¿‡çš„æ‹¼éŸ³ä½œä¸ºæ–‡æœ¬ï¼Œç”±äºå®æ—¶ç›‘å¬è¾“å…¥ï¼Œå°±å­˜åœ¨å°† ceâ€™shi ä½œä¸º keyword æŸ¥è¯¢çš„é—®é¢˜äº†ã€‚&lt;br&gt;åœ¨è¿™é‡Œï¼Œå‰ç«¯éœ€è¦å¯¹æ‹¼éŸ³è¾“å…¥æ³•çš„è¿™ç§æƒ…å†µè¿›è¡Œå¤„ç†ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="front-end javascript" scheme="https://blog.colafornia.me/categories/front-end-javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>You Don&#39;t Know setTimeout</title>
    <link href="https://blog.colafornia.me/post/2017/from-settimeout-to-event-loop/"/>
    <id>https://blog.colafornia.me/post/2017/from-settimeout-to-event-loop/</id>
    <published>2017-06-04T13:15:00.000Z</published>
    <updated>2019-10-24T02:22:04.200Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/jstips-animation.gif&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot;&gt;&lt;/a&gt;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œ&lt;strong&gt;setTimeout()/setInterval()&lt;/strong&gt; æ–¹æ³•ä¸æ˜¯ ECMAScript è§„èŒƒå®šä¹‰çš„å†…å®¹ï¼Œè€Œæ˜¯å±äº BOM æä¾›çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´å®šæ—¶å™¨ä½œä¸º BOM å¯¹è±¡å’Œæ–¹æ³•çš„ä¸€éƒ¨åˆ†æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ &lt;strong&gt;setTimeout() ä¸ setInterval() åœ¨è§¦å‘å‘¨æœŸçš„å®šä¹‰ä¸Šå®Œå…¨ä¸ä¸€æ ·&lt;/strong&gt;ï¼Œåœ¨ä¸‹é¢ä¾‹å­ setTimeout() ä»£ç ä¸­ï¼Œè¦åœ¨å‰ä¸€ä¸ª callback å›è°ƒæ‰§è¡Œç»“æŸå¹¶å»¶è¿Ÿ 10ms ä»¥åæ‰èƒ½å†æ¬¡æ‰§è¡Œ setTimeout()ï¼Œå³å»¶è¿Ÿæ˜¯è¦æ±‚è¿è¡Œæ—¶(runtime) å¤„ç†è¯·æ±‚æ‰€éœ€çš„æœ€å°æ—¶é—´ï¼Œä½†ä¸æ˜¯æœ‰æ‰€ä¿è¯çš„æ—¶é—´ã€‚è€Œ setInterval() åˆ™æ˜¯æ¯éš” 10ms å°±æ‰§è¡Œä¸€æ¬¡ callback å›è°ƒï¼Œä¸ä¼šå…³æ³¨ callback ä½•æ—¶æ‰§è¡Œç»“æŸã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç”±äºè§¦å‘å‘¨æœŸå®šä¹‰ä¸åŒï¼Œä»¥ä¸‹ä¸¤ä¸ªå®šæ—¶å™¨æœ‰éå¸¸å¤§çš„åŒºåˆ«&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ä¸€ä¸ª timeout å®šæ—¶å™¨ï¼Œæ¯10æ¯«ç§’é‡æ–°è°ƒç”¨è‡ªå·±&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;repeatMe&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// do something&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  setTimeout(repeatMe, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ä¸€ä¸ª interval å®šæ—¶å™¨ï¼Œæ¯10æ¯«ç§’è§¦å‘ä¸€æ¬¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setInterval(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// do something&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ &lt;a href=&quot;https://html.spec.whatwg.org/multipage/webappapis.html#timers&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML spec&lt;/a&gt; ä¸­å®šä¹‰ &lt;strong&gt;setTimeout çš„æœ€å°å»¶è¿Ÿæ—¶é—´æ˜¯4ms&lt;/strong&gt;ï¼Œä½†é€šå¸¸è®¤ä¸ºæµè§ˆå™¨å¯å®ç°çš„å®šæ—¶å™¨çš„æœ€å°å»¶è¿Ÿæ—¶é—´æ˜¯10msï¼Œå³ setTimeout(fn, 0) ä¹Ÿæ˜¯ä¼šå»¶è¿Ÿè‡³å°‘10msï¼Œå¦‚æœæƒ³å®ç° 0 delay çš„è¯å¯ä»¥é€šè¿‡ &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;window.postMessage&lt;/a&gt; å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å®šæ—¶å™¨è¿˜æœ‰ä¸€ä¸ªå°ç‰¹æ€§ï¼Œåœ¨å¼€å‘ç§»åŠ¨å…¬å‘Šçš„æ»šåŠ¨åŠ¨ç”»æ—¶å‘ç°ï¼Œä»åŠ¨ç”»æ‰€åœ¨çš„ tab é¡µåˆ‡æ¢åˆ°åˆ«çš„ tab ä¹‹åå†åˆ‡å›ï¼ŒåŠ¨ç”»ä¼šå®Œå…¨ä¹±æ‰ï¼Œå¹¶ä¸ä¼šæŒ‰ä»£ç ä¸­æ‰€è®¾ç½®çš„å»¶è¿Ÿæ—¶é—´è¿›è¡Œã€‚è¿™æ˜¯ä¸ºäº†å‡å°‘èƒŒæ™¯ tab é¡µé¢çš„ä»£ç è¿è¡Œæ¶ˆè€—ï¼ˆç”µé‡ï¼‰ï¼Œ&lt;strong&gt;èƒŒæ™¯ tab é¡µé¢ä¸­å®šæ—¶å™¨çš„é—´éš”ä¼šå¢åŠ åˆ°1000ms&lt;/strong&gt;ï¼Œå¦‚æœé‡åˆ°éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜çš„åœºæ™¯ï¼Œå¯ä»¥é€šè¿‡ &lt;a href=&quot;https://robertnyman.com/2010/03/25/using-html5-web-workers-to-have-background-computational-power/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML5 Web Workers&lt;/a&gt; æˆ–è€…ç”¨ &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;requestAnimationFrame&lt;/a&gt; ä»£æ›¿å®šæ—¶å™¨æ¥è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œç”±äº webkit ä¸­ timer ç±»çš„å®ç°åŸç†å†³å®šï¼š&lt;strong&gt;é¢„æœŸå»¶æ—¶æ—¶é—´æœ€å°çš„ä»»åŠ¡æœ€å…ˆè¢«æ‰§è¡Œï¼ŒåŒæ—¶ï¼Œé¢„æœŸå»¶æ—¶æ—¶é—´ç›¸åŒçš„ä¸¤ä¸ªä»»åŠ¡ï¼Œå…¶æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§æ³¨å†Œçš„å…ˆåé¡ºåºæ‰§è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; start = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;fn1&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;fn2&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;another fn2&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;fn3&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;start while&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Date&lt;/span&gt; - start &amp;lt; &lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;) &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;end while&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ‰“å°ç»“æœå¦‚ä¸‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// start while&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// end while&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// fn3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// fn1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// fn2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// another fn2&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Event-Loop-ç›¸å…³æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#Event-Loop-ç›¸å…³æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;Event Loop ç›¸å…³æ¦‚å¿µ&quot;&gt;&lt;/a&gt;Event Loop ç›¸å…³æ¦‚å¿µ&lt;/h3&gt;&lt;p&gt;æµè§ˆå™¨è®©ä¸€ä¸ªå•çº¿ç¨‹å…±ç”¨äºè§£é‡Šå’Œæ‰§è¡Œ JavaScriptï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç§°ä¸ºæ˜¯â€œä¸»çº¿ç¨‹â€ã€‚å…¶å®ƒçš„å¤„ç†AJAXè¯·æ±‚çš„çº¿ç¨‹ã€å¤„ç†DOMäº‹ä»¶çš„çº¿ç¨‹ã€å®šæ—¶å™¨çº¿ç¨‹ç­‰ç­‰å¯ä»¥ç§°ä¸ºæ˜¯â€œå·¥ä½œçº¿ç¨‹â€ã€‚&lt;/p&gt;
&lt;p&gt;JavaScript çš„å•çº¿ç¨‹æ„å‘³ç€åªæœ‰ä¸€ä¸ª call stackï¼Œä¹Ÿæ„å‘³ç€åŒä¸€æ—¶é—´æ˜¯èƒ½åšä¸€ä»¶äº‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://o7ts2uaks.bkt.clouddn.com/v2-25076e938167ad11c6a2a9ec099e0973_b.png&quot; alt=&quot;Event Loop&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;è°ƒç”¨æ ˆ(call stack): åè¿›å…ˆå‡ºï¼Œå‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šè¢«åŠ å…¥åˆ°è°ƒç”¨æ ˆé¡¶éƒ¨ï¼Œç­‰æ‰§è¡Œç»“æŸå†ä»é¡¶éƒ¨ç§»é™¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å †(heap): å†…å­˜åˆ†é…åŒº&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—(quene): ä¹Ÿå«ä»»åŠ¡é˜Ÿåˆ—ã€‚å…ˆè¿›å…ˆå‡ºï¼Œä¸€æ—¦è°ƒç”¨æ ˆä¸­çš„æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆæ¸…ç©ºï¼Œå°±ä¼šè¯»å–æ¶ˆæ¯é˜Ÿåˆ—ã€‚&lt;strong&gt;æ¶ˆæ¯/ä»»åŠ¡å°±æ˜¯æ³¨å†Œå¼‚æ­¥ä»»åŠ¡æ—¶æ·»åŠ çš„å›è°ƒå‡½æ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åŒæ­¥ä»»åŠ¡: åœ¨ä¸»çº¿ç¨‹çš„è°ƒç”¨æ ˆæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¼‚æ­¥ä»»åŠ¡: ä¸»çº¿ç¨‹å‘èµ·æ‰§è¡Œå¼‚æ­¥å‡½æ•°çš„è¯·æ±‚ï¼Œå¯¹åº”çš„å·¥ä½œçº¿ç¨‹ï¼ˆæµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹ã€å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹ç­‰ï¼‰æ¥æ”¶è¯·æ±‚å¹¶å‘ŠçŸ¥ä¸»çº¿ç¨‹å·²æ”¶åˆ°(å¼‚æ­¥å‡½æ•°è¿”å›)ï¼›ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼ŒåŒæ—¶å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼›å·¥ä½œçº¿ç¨‹å®Œæˆå·¥ä½œåï¼Œå°†å®Œæˆæ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹é€šè¿‡äº‹ä»¶å¾ªç¯è¿‡ç¨‹å»å–æ¶ˆæ¯ï¼Œç„¶åæ‰§è¡Œå›è°ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;äº‹ä»¶å¾ªç¯(event loop): äº‹ä»¶å¾ªç¯æ˜¯æŒ‡ä¸»çº¿ç¨‹é‡å¤ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ¶ˆæ¯ã€æ‰§è¡Œçš„è¿‡ç¨‹ã€‚&lt;strong&gt;&lt;br&gt;å–ä¸€ä¸ªæ¶ˆæ¯å¹¶æ‰§è¡Œçš„è¿‡ç¨‹å«åšä¸€æ¬¡å¾ªç¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Web APIs: å¦‚ AJAXï¼Œå®šæ—¶å™¨ï¼ŒDOMäº‹ä»¶è¿™äº›å¼‚æ­¥äº‹åŠ¡å¹¶ä¸åœ¨ V8(JavaScript)è¿è¡Œç¯å¢ƒä¸­ï¼Œæ˜¯ç”±æµè§ˆå™¨æä¾›çš„ Web API&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›¸å…³æ¦‚å¿µå°±æ˜¯è¿™äº›ï¼Œ&lt;a href=&quot;http://latentflip.com/loupe/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://latentflip.com/loupe/&lt;/a&gt; æ˜¯ä¸€ä¸ªå¯è§†åŒ–è°ƒç”¨æ ˆçš„ç½‘ç«™ï¼Œå¯ä»¥æŠŠè‡ªå·±çš„ä»£ç æ•²åˆ°é‡Œé¢è¿è¡Œæ¥çœ‹ event loop çš„å…·ä½“åŠ¨æ€ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®šæ—¶å™¨å’Œçº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„&quot;&gt;&lt;a href=&quot;#å®šæ—¶å™¨å’Œçº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„&quot; class=&quot;headerlink&quot; title=&quot;å®šæ—¶å™¨å’Œçº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„&quot;&gt;&lt;/a&gt;å®šæ—¶å™¨å’Œçº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://johnresig.com/files/Timers.png&quot; alt=&quot;timer&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»¥æ­¤å›¾ä¸ºä¾‹ï¼Œæ¥ç†è§£ JavaScript ä¸­å¼‚æ­¥äº‹ä»¶çš„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;0ms: å¯åŠ¨å³æ‰§è¡Œç¬¬ä¸€æ®µ JavaScript ä»£ç å—ï¼Œå¯åŠ¨ä¸€ä¸ª10mså»¶è¿Ÿå®šæ—¶å™¨(timeout)å’Œ10msé—´éš”å®šæ—¶å™¨(interval)ï¼Œå»¶è¿Ÿå®šæ—¶å™¨æ˜¯å…ˆäºé—´éš”å®šæ—¶å™¨å£°æ˜å¯åŠ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;5ms: é¼ æ ‡å•å‡»ï¼Œä½†æ˜¯ç”±äºç°åœ¨æ­£åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªä»£ç å—ï¼Œè°ƒç”¨æ ˆä¸ä¸ºç©ºï¼Œå•å‡»äº‹ä»¶çš„å¤„ç†å‡½æ•°ä¸èƒ½ç«‹å³æ‰§è¡Œï¼Œåªèƒ½åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿›è¡Œæ’é˜Ÿ&lt;/p&gt;
&lt;p&gt;10ms: å»¶è¿Ÿå®šæ—¶å™¨è§¦å‘ï¼Œé—´éš”å®šæ—¶å™¨è§¦å‘ï¼ŒåŒç†ä¹Ÿéƒ½è¿›è¡Œæ’é˜Ÿ&lt;/p&gt;
&lt;p&gt;18ms: ç¬¬ä¸€æ®µä»£ç å—æ‰§è¡Œç»“æŸï¼Œè°ƒç”¨æ ˆä¸ºç©ºï¼Œæ­¤æ—¶æœ‰ä¸‰ä¸ªä»£ç å—åœ¨æ’é˜Ÿæ‰§è¡Œ(click äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå»¶è¿Ÿå®šæ—¶å™¨å¤„ç†å‡½æ•°ï¼Œé—´éš”å®šæ—¶å™¨ç¬¬ä¸€æ¬¡è§¦å‘çš„å¤„ç†å‡½æ•°)ï¼ŒæŒ‰é¡ºåºæ­¤æ—¶ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ click äº‹ä»¶å›è°ƒã€‚æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ­¤æ—¶è¿˜æœ‰ä¸¤ä¸ªå›è°ƒã€‚&lt;/p&gt;
&lt;p&gt;20ms: é—´éš”å®šæ—¶å™¨åˆè§¦å‘äº†ï¼Œç”±äºé—´éš”å®šæ—¶å™¨ç¬¬ä¸€æ¬¡è§¦å‘çš„å¤„ç†å‡½æ•°ä»åœ¨æ’é˜Ÿï¼Œæµè§ˆå™¨ä¸ä¼šå¯¹åŒä¸€ interval å¤„ç†å‡½æ•°çš„å¤šä¸ªå®ä¾‹åŒæ—¶è¿›è¡Œæ’é˜Ÿï¼Œäºæ˜¯æ­¤æ¬¡è°ƒç”¨ä½œåºŸï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸å˜ï¼Œä»ç„¶è¿˜æ˜¯é‚£ä¸¤ä¸ªå›è°ƒã€‚&lt;/p&gt;
&lt;p&gt;28ms: click äº‹ä»¶å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼ŒæŒ‰é¡ºåºï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹ä¸­å°†æ‰§è¡Œå»¶æ—¶å®šæ—¶å™¨å¤„ç†å‡½æ•°ã€‚æ¶ˆæ¯é˜Ÿåˆ—ä¸­åªæœ‰é—´éš”å®šæ—¶å™¨çš„ç¬¬ä¸€æ¬¡è§¦å‘å›è°ƒåœ¨æ’é˜Ÿã€‚&lt;/p&gt;
&lt;p&gt;30ms: é—´éš”å®šæ—¶å™¨å†ä¸€æ¬¡è§¦å‘äº†ï¼Œä»ç„¶å› ä¸ºç¬¬ä¸€æ¬¡è§¦å‘çš„å›è°ƒä»åœ¨æ’é˜Ÿï¼Œæ­¤æ¬¡è°ƒç”¨ä½œåºŸã€‚&lt;/p&gt;
&lt;p&gt;34ms: å»¶æ—¶å®šæ—¶å™¨å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚å¼€å§‹æ‰§è¡Œé—´éš”å®šæ—¶å™¨ç¬¬ä¸€æ¬¡è§¦å‘çš„å›è°ƒå‡½æ•°ã€‚æ­¤æ—¶æ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºã€‚&lt;/p&gt;
&lt;p&gt;40ms: é—´éš”å®šæ—¶å™¨å†ä¸€æ¬¡è§¦å‘äº†ï¼Œå¯¼è‡´æ–°çš„ interval å›è°ƒå‡½æ•°è¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ’é˜Ÿã€‚&lt;/p&gt;
&lt;p&gt;42ms: é—´éš”å®šæ—¶å™¨ç¬¬ä¸€æ¬¡å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ­£åœ¨æ’é˜Ÿçš„å›è°ƒå¼€å§‹æ‰§è¡Œã€‚æ¶ˆæ¯é˜Ÿåˆ—å†æ¬¡ä¸ºç©ºã€‚&lt;/p&gt;
&lt;p&gt;47ms: å›è°ƒæ‰§è¡Œå®Œæ¯•ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰åˆ°è§¦å‘ interval çš„æ—¶é—´ï¼Œå› æ­¤ä¸‹ä¸€ä¸ª interval å›è°ƒå¯ä»¥ç­‰åˆ°è§¦å‘äº‹ä»¶ç«‹å³æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ— æ³•ç«‹å³æ‰§è¡Œå®šæ—¶å™¨ï¼Œè¯¥å®šæ—¶å™¨ä¼šè¢«æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªå¯ç”¨çš„æ‰§è¡Œæ—¶é—´ç‚¹ä¸Š(éªŒè¯äº†å®é™…å»¶è¿Ÿæ—¶é—´å¿…ç„¶ä¼šæ¯”æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´æ›´é•¿)&lt;/li&gt;
&lt;li&gt;åŒä¸€ä¸ª interval æ‰§è¡Œç¨‹åºçš„å¤šä¸ªå®ä¾‹ä¸èƒ½åŒæ—¶è¿›è¡Œæ’é˜Ÿ&lt;/li&gt;
&lt;li&gt;å»¶è¿Ÿæ—¶é—´è¶³å¤Ÿé•¿çš„è¯ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šæœ‰ä¸¤ä¸ª interval å›è°ƒä¼šæ— å»¶è¿Ÿè¿ç»­æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;setTimeout-fn-0&quot;&gt;&lt;a href=&quot;#setTimeout-fn-0&quot; class=&quot;headerlink&quot; title=&quot;setTimeout(fn, 0)&quot;&gt;&lt;/a&gt;setTimeout(fn, 0)&lt;/h3&gt;&lt;p&gt;ç”±ä¸Šè¿°å†…å®¹å¯çŸ¥ï¼ŒsetTimeout(fn, 0) ä¸­çš„ä»£ç å¹¶ä¸æ˜¯ä¸ºäº† fn ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯å°† fn æ’å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½¿å¾—å¾…è°ƒç”¨æ ˆä¸ºç©ºæ—¶å°†ç«‹å³è°ƒç”¨æ‰§è¡Œ fnï¼Œä¿è¯äº† fn çš„åæ‰§è¡Œã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸€ç‰¹æ€§ï¼Œ&lt;strong&gt;ç”¨ setTimeout(fn, 0) è°ƒæ•´äº‹ä»¶çš„å‘ç”Ÿé¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; input = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;input[type=button]&#39;&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;input.onclick = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    input.value +=&lt;span class=&quot;string&quot;&gt;&#39; input&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.body.onclick = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  input.value += &lt;span class=&quot;string&quot;&gt;&#39; body&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ¨¡æ‹Ÿäº‹ä»¶æ•è·ï¼Œå®ç°çˆ¶å…ƒç´ çš„äº‹ä»¶å›è°ƒå‡½æ•°å…ˆå‘ç”Ÿ&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ã€Šé«˜æ€§èƒ½JavaScriptã€‹ä¸­è®¤ä¸º &lt;strong&gt;å•ä¸ª JavaScript æ“ä½œèŠ±è´¹çš„æ€»æ—¶é—´ä¸åº”è¯¥è¶…è¿‡100æ¯«ç§’&lt;/strong&gt;ã€‚å¦åˆ™ç”¨æˆ·ä¼šæ„Ÿåˆ°ä¸ç•Œé¢å¤±å»è”ç³»ã€‚å®é™…ä¸Šï¼Œå¦‚æœä¸€æ®µ js ä»£ç çš„è¿è¡Œæ—¶é—´è¶…è¿‡ 500msï¼ŒFirefox å’Œ Opera æµè§ˆå™¨å°†å¼¹å‡ºè­¦å‘Šå¯¹è¯æ¡†ï¼ŒSafari ä¼šé»˜è®¤ç»ˆæ­¢è¿è¡Œæ—¶é—´è¶…è¿‡500 ms çš„è„šæœ¬ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å®šæ—¶å™¨å°†è®¡ç®—é‡å¤§è€—æ—¶é•¿çš„ä»»åŠ¡åˆ†å‰²æˆä¸ä¼šè®©æµè§ˆå™¨æŒ‚æ‰çš„ç¢ç‰‡ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; div = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;)[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ä¼šé€ æˆæµè§ˆå™¨é˜»å¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0xA00000&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;number&quot;&gt;0xFFFFFF&lt;/span&gt;;i++) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  div.style.backgroundColor = &lt;span class=&quot;string&quot;&gt;&#39;#&#39;&lt;/span&gt;+i.toString(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åˆ†å‰²æˆå°çš„ä»»åŠ¡&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; timer;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0x100000&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;func&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  timer = setTimeout(func, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  div.style.backgroundColor = &lt;span class=&quot;string&quot;&gt;&#39;#&#39;&lt;/span&gt;+i.toString(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (i++ == &lt;span class=&quot;number&quot;&gt;0xFFFFFF&lt;/span&gt;) clearInterval(timer);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;timer = setTimeout(func, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å®šæ—¶å™¨çš„å…¶å®ƒåº”ç”¨&quot;&gt;&lt;a href=&quot;#å®šæ—¶å™¨çš„å…¶å®ƒåº”ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å®šæ—¶å™¨çš„å…¶å®ƒåº”ç”¨&quot;&gt;&lt;/a&gt;å®šæ—¶å™¨çš„å…¶å®ƒåº”ç”¨&lt;/h3&gt;&lt;p&gt;è¿™é‡Œå°±æ˜¯è¯´å‡½æ•°èŠ‚æµ(throttle)ä¸å‡½æ•°é˜²æŠ–(debounce)&lt;/p&gt;
&lt;p&gt;ä»¥ Underscore.js ä¸­ debounce çš„å®ç°ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº waitï¼Œfunc æ‰ä¼šæ‰§è¡Œ&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; *&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @param  &amp;#123;function&amp;#125; func        ä¼ å…¥å‡½æ•°&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @param  &amp;#123;number&amp;#125;   wait        è¡¨ç¤ºæ—¶é—´çª—å£çš„é—´éš”&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @param  &amp;#123;boolean&amp;#125;  immediate   è®¾ç½®ä¸ºtureæ—¶ï¼Œè°ƒç”¨è§¦å‘äºå¼€å§‹è¾¹ç•Œè€Œä¸æ˜¯ç»“æŸè¾¹ç•Œ&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @return &amp;#123;function&amp;#125;             è¿”å›è°ƒç”¨å‡½æ•°&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;_.debounce = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;func, wait, immediate&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; timeout, args, context, timestamp, result;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; later = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è®¾ç½® last ä¸ºå½“å‰æ—¶é—´ä¸ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´é—´éš”&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; last = _.now() - timestamp;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (last &amp;lt; wait &amp;amp;&amp;amp; last &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// å¦‚æœæ—¶é—´é—´éš”å°äºæ‰€ä¼ å…¥çš„ wait&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// è¿˜æ²¡åˆ°è§¦å‘æ—¶é—´ï¼Œç»§ç»­è®¾ç½®å®šæ—¶å™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      timeout = setTimeout(later, wait - last);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// åˆ°äº†è§¦å‘æ—¶é—´ï¼Œæ¸…ç©ºè®¡æ—¶å™¨ï¼Œé¿å…å½±å“ä¸‹æ¬¡è§¦å‘&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      timeout = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// å¦‚æœè®¾å®šä¸ºimmediate===trueï¼Œå› ä¸ºå¼€å§‹è¾¹ç•Œå·²ç»è°ƒç”¨è¿‡äº†æ­¤å¤„æ— éœ€è°ƒç”¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!immediate) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æ‰§è¡Œ func&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        result = func.apply(context, args);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!timeout) context = args = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    context = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    args = &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// æ¯æ¬¡è§¦å‘ä¹‹å æ›´æ–°æ—¶é—´æˆ³ä¸ºæ­¤æ¬¡è§¦å‘æ—¶é—´&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    timestamp = _.now();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// åˆ¤æ–­æ˜¯å¦ç¬¦åˆç«‹å³è§¦å‘çš„æ¡ä»¶&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; callNow = immediate &amp;amp;&amp;amp; !timeout;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¦‚æœå»¶æ—¶ä¸å­˜åœ¨ï¼Œé‡æ–°è®¾å®šå»¶æ—¶&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!timeout) timeout = setTimeout(later, wait);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (callNow) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// ç«‹å³è§¦å‘&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      result = func.apply(context, args);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      context = args = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;ç®¡ç†å¤šä¸ªå®šæ—¶å™¨ä¼šäº§ç”Ÿè®¸å¤šé—®é¢˜ï¼ŒåŒæ—¶åˆ›å»ºå¤§é‡çš„å®šæ—¶å™¨å°†ä¼šåœ¨æµè§ˆå™¨ä¸­å¢åŠ åƒåœ¾å›æ”¶ä»»åŠ¡å‘ç”Ÿçš„å¯èƒ½æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å®šæ—¶å™¨æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„åƒåœ¾å›æ”¶é—®é¢˜ï¼Œè¿™æ˜¯ç”±äºå®ƒä»¬æ˜¯åœ¨ JavaScript ä¸»çº¿ç¨‹ä¹‹å¤–çš„æµè§ˆå™¨çº¿ç¨‹è¿›è¡Œç®¡ç†çš„ã€‚ä¸åŒæµè§ˆå™¨åƒåœ¾å›æ”¶çš„å‘¨æœŸä¸åŒï¼Œè¿™ä¹Ÿæ˜¯é€šè¿‡å®šæ—¶å™¨å¤„ç†åŠ¨ç”»æ—¶ï¼ŒåŠ¨ç”»åœ¨æœ‰çš„æµè§ˆå™¨ä¸Šå¾ˆæµç•…ï¼Œæœ‰çš„æµè§ˆå™¨ä¸Šç‰¹åˆ«å¡çš„åŸå› ä¹‹ä¸€ã€‚å› æ­¤åº”è¯¥æ³¨æ„å‡å°‘åŒæ—¶ä½¿ç”¨çš„å®šæ—¶å™¨çš„æ•°é‡æˆ–è€…ä½¿ç”¨ä¸­å¤®å®šæ—¶å™¨æ¥ç®¡ç†å¤šä¸ªå›è°ƒã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡ ä¸ªåç»­å€¼å¾—æ¢ç©¶çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#å‡ ä¸ªåç»­å€¼å¾—æ¢ç©¶çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å‡ ä¸ªåç»­å€¼å¾—æ¢ç©¶çš„é—®é¢˜&quot;&gt;&lt;/a&gt;å‡ ä¸ªåç»­å€¼å¾—æ¢ç©¶çš„é—®é¢˜&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;HTML5 Web Workers: HTML5æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸€è§„èŒƒå®šä¹‰äº†ä¸€å¥— APIï¼Œå®ƒå…è®¸ä¸€æ®µJavaScriptç¨‹åºè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¹‹å¤–çš„å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­&lt;/li&gt;
&lt;li&gt;requestAnimationFrame: æ›´é€‚åˆåŠ¨ç”»ä½¿ç”¨çš„â€œå®šæ—¶å¾ªç¯å™¨â€&lt;/li&gt;
&lt;li&gt;setImmediate: ä¸€ä¸ªæ¯”è¾ƒæ–°çš„å®šæ—¶å™¨ï¼ŒsetTimeout(0)çš„æ›¿ä»£ç‰ˆ&lt;/li&gt;
&lt;li&gt;Node.js ä¸­çš„ Event Loop&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å‚è€ƒå†…å®¹&quot;&gt;&lt;a href=&quot;#å‚è€ƒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒå†…å®¹&quot;&gt;&lt;/a&gt;å‚è€ƒå†…å®¹&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=8aGhZQkoFbQ&amp;amp;t=669s&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Philip Roberts: What the heck is the event loop anyway&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://johnresig.com/blog/how-javascript-timers-work/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;John Resig: How JavaScript Timers Work&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.alloyteam.com/2015/10/turning-to-javascript-series-from-settimeout-said-the-event-loop-model/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AlloyTeam: ä» setTimeout è¯´èµ·äº‹ä»¶å¾ªç¯&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2014/10/event-loop&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é˜®ä¸€å³°: JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£â€”â€”å†è°ˆEvent Loop&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/jstips-animation.gif&quot; alt=&quot;cover&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&quot;&gt;&lt;/a&gt;å‡ ä¸ªå¯èƒ½ä¸çŸ¥é“çš„å®šæ—¶å™¨â²ç‰¹æ€§&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œ&lt;strong&gt;setTimeout()/setInterval()&lt;/strong&gt; æ–¹æ³•ä¸æ˜¯ ECMAScript è§„èŒƒå®šä¹‰çš„å†…å®¹ï¼Œè€Œæ˜¯å±äº BOM æä¾›çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´å®šæ—¶å™¨ä½œä¸º BOM å¯¹è±¡å’Œæ–¹æ³•çš„ä¸€éƒ¨åˆ†æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ &lt;strong&gt;setTimeout() ä¸ setInterval() åœ¨è§¦å‘å‘¨æœŸçš„å®šä¹‰ä¸Šå®Œå…¨ä¸ä¸€æ ·&lt;/strong&gt;ï¼Œåœ¨ä¸‹é¢ä¾‹å­ setTimeout() ä»£ç ä¸­ï¼Œè¦åœ¨å‰ä¸€ä¸ª callback å›è°ƒæ‰§è¡Œç»“æŸå¹¶å»¶è¿Ÿ 10ms ä»¥åæ‰èƒ½å†æ¬¡æ‰§è¡Œ setTimeout()ï¼Œå³å»¶è¿Ÿæ˜¯è¦æ±‚è¿è¡Œæ—¶(runtime) å¤„ç†è¯·æ±‚æ‰€éœ€çš„æœ€å°æ—¶é—´ï¼Œä½†ä¸æ˜¯æœ‰æ‰€ä¿è¯çš„æ—¶é—´ã€‚è€Œ setInterval() åˆ™æ˜¯æ¯éš” 10ms å°±æ‰§è¡Œä¸€æ¬¡ callback å›è°ƒï¼Œä¸ä¼šå…³æ³¨ callback ä½•æ—¶æ‰§è¡Œç»“æŸã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end javascript" scheme="https://blog.colafornia.me/categories/front-end-javascript/"/>
    
    
  </entry>
  
  <entry>
    <title>è§‚å¯Ÿè€…æ¨¡å¼ä»¥åŠåœ¨ Vue æºç ä¸­çš„å®è·µ</title>
    <link href="https://blog.colafornia.me/post/2017/observer-pattern-in-vue/"/>
    <id>https://blog.colafornia.me/post/2017/observer-pattern-in-vue/</id>
    <published>2017-03-14T10:30:00.000Z</published>
    <updated>2019-10-24T02:22:04.204Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/images/vue-reactive.jpg&quot; alt=&quot;vue&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ ES6 æŠŠ Promise å†™è¿›è¯­è¨€æ ‡å‡†å‰ï¼Œä¸ºå®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œç»å¸¸ä¼šé‡‡ç”¨ &lt;strong&gt;è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰&lt;/strong&gt; ä½œä¸ºæ›¿ä»£ä¼ é€’å›è°ƒå‡½æ•°çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…è®¢é˜…åŒä¸€ä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸»é¢˜çŠ¶æ€å‘ç”Ÿæ”¹å˜åˆ™ç«‹å³å‘å¸ƒï¼Œé€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ã€‚å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å®Œå…¨è§£è€¦ï¼Œä»…ä»…æ˜¯å…±äº«åŒä¸€è‡ªå®šä¹‰äº‹ä»¶çš„åç§°ã€‚å½“æ–°çš„è®¢é˜…è€…å‡ºç°ï¼Œå‘å¸ƒè€…æ— éœ€åšä»»ä½•ä¿®æ”¹ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å¸¸è§çš„éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼çš„åœºæ™¯ï¼š&quot;&gt;&lt;a href=&quot;#å¸¸è§çš„éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼çš„åœºæ™¯ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§çš„éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼çš„åœºæ™¯ï¼š&quot;&gt;&lt;/a&gt;å¸¸è§çš„éœ€è¦è§‚å¯Ÿè€…æ¨¡å¼çš„åœºæ™¯ï¼š&lt;/h2&gt;&lt;p&gt;åœ¨ä»»æ„ä¸€ä¸ªéœ€è¦ç™»å½•çš„ç½‘ç«™ä¸­ï¼Œheaderï¼Œnavbarï¼Œæ¶ˆæ¯åˆ—è¡¨ï¼Œè´­ç‰©è½¦ç­‰æ¨¡å—çš„æ¸²æŸ“ï¼Œéƒ½éœ€è¦ç™»é™†åæ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚ä½†æ˜¯ajaxç™»å½•è¯·æ±‚å®Œæˆçš„æ—¶é—´æ— æ³•ç¡®å®šï¼Œå¦‚æœåœ¨ajaxå›è°ƒä¸­è°ƒç”¨å„æ¨¡å—çš„æ–¹æ³•æ¥æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„è¯ï¼Œè€¦åˆæ€§å¤ªå¼ºï¼Œæ–°å¢/ä¿®æ”¹æ¨¡å—çš„æˆæœ¬å¤ªé«˜ï¼Œä¸šåŠ¡æ¨¡å—æ›´å¤æ‚çš„æ—¶å€™å¾ˆéš¾ç»´æŠ¤ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦çš„å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;Vue åœ¨å®ç°æ•°æ®ç»‘å®šæ—¶ä¹Ÿé‡‡ç”¨çš„è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°æ•°æ®çš„è®¢é˜…ï¼Œè®¢é˜…è€…ç»´æŠ¤æ¯ä¸€æ¬¡æ›´æ–°ä¹‹å‰çš„æ•°æ®ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè®¢é˜…è€…å°†æ‰§è¡Œè‡ªèº«è®¾å®šçš„å›è°ƒé€»è¾‘ï¼Œå¹¶æ›´æ–°æ‰€ç»´æŠ¤æ•°æ®çš„å€¼ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼š&quot;&gt;&lt;a href=&quot;#å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼š&quot;&gt;&lt;/a&gt;å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼š&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;æŒ‡å®šå‘å¸ƒè€…&lt;/li&gt;
&lt;li&gt;ç»™å‘å¸ƒè€…æ·»åŠ ä¸€ä¸ªç¼“å­˜åˆ—è¡¨ï¼Œç”¨äºå­˜æ”¾å›è°ƒå‡½æ•°ä»¥é€šçŸ¥è®¢é˜…è€…&lt;/li&gt;
&lt;li&gt;å‘å¸ƒæ¶ˆæ¯æ—¶ï¼Œéå†ç¼“å­˜åˆ—è¡¨ï¼Œè§¦å‘æ¯ä¸€ä¸ªè®¢é˜…è€…å›è°ƒå‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¹¶ä¸”é™¤äº†ç¼“å­˜åˆ—è¡¨ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®¢é˜…ï¼Œå‘å¸ƒï¼Œå–æ¶ˆè®¢é˜…è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; event = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// ç¼“å­˜åˆ—è¡¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  clientList: [],&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// è®¢é˜…&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  listen: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;key, fn&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key]) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// è®¢é˜…åˆ—è¡¨ä¸­æ²¡æœ‰è¿™ä¸ª key åˆ™æŠŠåˆå§‹åŒ–è¿™ä¸ª key çš„é˜Ÿåˆ—ä¸ºç©º&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key] = []&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key].push(fn)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  trigger: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; key = &lt;span class=&quot;built_in&quot;&gt;Array&lt;/span&gt;.prototype.shift.call(&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; fns = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!fns || fns.length === &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// éå†ç¼“å­˜åˆ—è¡¨ï¼ŒæŒ¨ä¸ªè§¦å‘å›è°ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, fn; fn = fns[ i++ ];)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      fn.apply(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  remove: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;key, fn&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; fns = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.clientList[key]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!fns)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!fn)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      fns &amp;amp;&amp;amp; (fns.length = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; l = fns.length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; l &amp;gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; l--)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; _fn = fns[l]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_fn === fn)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          fns.splice(l, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ä¸ªé€šç”¨å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…åœºæ™¯ä¸­ï¼Œæœ‰å¯èƒ½éœ€è¦å¤šä¸ªå‘å¸ƒè€…å¯¹è±¡ï¼Œéœ€è¦å¤šä¸ªç±»ä¼¼ä¸Šé¢ event å¯¹è±¡çš„ç»‘å®šï¼Œéå¸¸éº»çƒ¦ï¼Œå‘å¸ƒè®¢é˜…ä¹Ÿå¹¶æ²¡æœ‰å®Œå…¨è§£è€¦ï¼Œéœ€è¦çŸ¥é“è¿™ä¸ªå¯¹è±¡çš„åå­—ã€‚å› æ­¤ä¹Ÿå¯ä»¥é‡‡ç”¨ &lt;strong&gt;å…¨å±€çš„ Event å¯¹è±¡&lt;/strong&gt; æ¥å®ç°ã€‚&lt;br&gt;åŒæ—¶ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸ºäº†é¿å…å‘½åå†²çªï¼Œéœ€è¦ &lt;strong&gt;åˆ›å»ºå‘½åç©ºé—´&lt;/strong&gt; ï¼Œæˆ–è€…æ˜¯ç”±äºä¸ºäº†å®ç°å¯ä»¥å…ˆå‘å¸ƒå†è®¢é˜…ï¼Œ&lt;strong&gt;åˆ›å»ºç¦»çº¿å †æ ˆ&lt;/strong&gt; ç­‰ç­‰ï¼Œå¯å®šåˆ¶é«˜çº§ç‰ˆçš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š&quot;&gt;&lt;/a&gt;é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å®ç°è§‚å¯Ÿè€…æ¨¡å¼æœ¬èº«éœ€è¦è€—è´¹å†…å­˜ï¼Œå¦‚æœå‘å¸ƒå¹¶ä¸å¸¸å‘ç”Ÿï¼Œè€Œè®¢é˜…å´å§‹ç»ˆå­˜åœ¨äºå†…å­˜ä¸­ï¼Œé€ æˆäº†ä¸€å®šç¨‹åº¦çš„æµªè´¹&lt;/li&gt;
&lt;li&gt;ç”±äºæ¨¡å—ä¹‹é—´çš„è”ç³»ç”±å…·ä½“çš„è€¦åˆè½¬ä¸ºæŠ½è±¡ï¼Œå› æ­¤è¿‡å¤šä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼çš„è¯ï¼Œæ¨¡å—å…³ç³»å¾ˆéš¾è¿½æº¯ï¼Œä»£ç ä¹Ÿå¾ˆéš¾ç»´æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Vueæºç ä¸­çš„ä½¿ç”¨ï¼š&quot;&gt;&lt;a href=&quot;#Vueæºç ä¸­çš„ä½¿ç”¨ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Vueæºç ä¸­çš„ä½¿ç”¨ï¼š&quot;&gt;&lt;/a&gt;Vueæºç ä¸­çš„ä½¿ç”¨ï¼š&lt;/h2&gt;&lt;p&gt;Vue å®ç°æ•°æ®ç»‘å®šä¾é çš„æ˜¯ &lt;strong&gt;Object.defineProperty() çš„è‡ªå®šä¹‰getter/setter&lt;/strong&gt; æ¥è¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç®¡ç†ï¼Œé€šçŸ¥è®¢é˜…è€…&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ç¼“å­˜åˆ—è¡¨ï¼Œä¸ºå¤–éƒ¨æä¾› æ·»åŠ è®¢é˜…/é€šçŸ¥è®¢é˜…è€… çš„æ¥å£&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Dep&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;()&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// ç¼“å­˜åˆ—è¡¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.subs = []&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    addSub(sub)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æ·»åŠ è®¢é˜…ï¼Œå³å‘ç¼“å­˜åˆ—è¡¨ä¸­æ·»åŠ æ–°é¡¹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.subs.push(sub)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    notify()&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// é€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…(Watcher)ï¼Œè§¦å‘è®¢é˜…è€…çš„ç›¸åº”å›è°ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.subs.forEach((sub) =&amp;gt; sub.update())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¼•å…¥è®¢é˜…ç®¡ç†æ¨¡å—&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; Dep &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Dep&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰è®¢é˜…&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Watcher&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œå®ä¾‹ï¼Œæ‰€è®¢é˜…æ•°æ®ï¼ŒæŒ‡å®šçš„å›è°ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(vm, expOrFn, cb)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.vm = vm &lt;span class=&quot;comment&quot;&gt;// å–åˆ° Vue å®ä¾‹ï¼Œä»è€Œæ‹¿åˆ°å®ä¾‹ä¸Šçš„ data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.cb = cb &lt;span class=&quot;comment&quot;&gt;// æ•°æ®æ›´æ–°æ—¶è§¦å‘çš„å›è°ƒå‡½æ•°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.expOrFn = expOrFn &lt;span class=&quot;comment&quot;&gt;// è¢«è®¢é˜…çš„æ•°æ®&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.val = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.get() &lt;span class=&quot;comment&quot;&gt;// èµ‹å€¼ä¸ºå®šä¹‰è®¢é˜…æ—¶çš„æ•°æ®ï¼Œå³æ›´æ–°å‰çš„å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œæ•°æ®æ›´æ–°æ—¶å‘å¸ƒè€…å°†è°ƒç”¨è¿™ä¸ªæ¥å£&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    update()&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.run()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    run()&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// è®¢é˜…æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–° val ï¼Œè§¦å‘å›è°ƒ&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// val ä¸ºå½“å‰å€¼ï¼Œ this.val ä¸ºæ›´æ–°å‰çš„å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; val = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.get()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(val !== &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.val)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.val = val;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.cb.call(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.vm)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    get()&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// è¯»å–æ‰€è®¢é˜…æ•°æ®çš„æœ€æ–°å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Dep.target = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; val = &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.vm._data[&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.expOrFn]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æŒ‡é’ˆç½®ç©º&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Dep.target = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; val;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ Observer æ•°æ®ç›‘å¬å™¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¼•å…¥ Dep è®¢é˜…ç®¡ç†æ¨¡å—&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; Dep &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Dep&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ Observer ç±»ï¼Œå°†æ‰€ç›‘å¬æ•°æ®éå†æ¯ä¸€é¡¹ä¼ å…¥åˆ° defineReactive ä»¥åŠ å…¥ get/set æ–¹æ³•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Observer&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;constructor&lt;/span&gt;(value)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value = value&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.walk(value)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    walk(value)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// éå†æ‰€ç›‘å¬å¯¹è±¡ã€æ•°ç»„çš„æ¯ä¸€é¡¹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.keys(value).forEach(key =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.convert(key, value[key]))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    convert(key, val)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        defineReactive(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.value, key, val)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;defineReactive&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;obj, key, val&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// åˆ›å»ºæ–°çš„è®¢é˜…&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; dep = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Dep()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ç»™å½“å‰å±æ€§çš„å€¼æ·»åŠ ç›‘å¬&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; chlidOb = observe(val)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// åŠ ä¸Š get/set&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.defineProperty(obj, key, &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// è®¾ç½®ä¸ºå±æ€§å¯éå†&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        enumerable: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// å±æ€§å¯åˆ é™¤ï¼Œå¯ä¿®æ”¹å…¶ emumerable/writable ç­‰å±æ€§&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        configurable: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        get: ()=&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;get value&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Dep.target ä¸º watcher å®ä¾‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// å¦‚æœå­˜åœ¨è¿™ä¸ª watcher åˆ™å°†å…¶åŠ å…¥åˆ° sub é˜Ÿåˆ—&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Watcherå®ä¾‹åœ¨å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘å½“å‰getæ–¹æ³•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(Dep.target)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                dep.addSub(Dep.target)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; val&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        set: (newVal) =&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// å¦‚æœæ•°æ®è¢«ä¿®æ”¹åˆ™ä¼šè§¦å‘è¿™æ®µ set å‡½æ•°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;new value seted&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(val === newVal) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            val = newVal&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// ç›‘å¬æ–°å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            chlidOb = observe(newVal)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ï¼Œæ•°å€¼è¢«æ”¹å˜äº†&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            dep.notify()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åˆ›å»ºç›‘å¬ï¼Œåœ¨è°ƒç”¨Observerç±»çš„å¤–é¢åŠ äº†å±‚åˆ¤æ–­&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;observe&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;value&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å½“å€¼ä¸å­˜åœ¨ï¼Œæˆ–è€…ä¸æ˜¯å¯¹è±¡ï¼Œå°±ä¸ç›‘å¬äº†&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!value || &lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; value !== &lt;span class=&quot;string&quot;&gt;&#39;object&#39;&lt;/span&gt;)&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Observer(value)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨æœ‰äº›æ–‡ç« ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ/è®¢é˜…æ¨¡å¼è¿˜æœ‰äº›å·®åˆ«ï¼Œå¯ä»¥è§‚æ‘©è¿™ç¯‡ &lt;a href=&quot;https://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ObserverPattern&lt;/a&gt;å»å­¦ä¹ ä¸€ä¸‹&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/vue-reactive.jpg&quot; alt=&quot;vue&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ ES6 æŠŠ Promise å†™è¿›è¯­è¨€æ ‡å‡†å‰ï¼Œä¸ºå®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œç»å¸¸ä¼šé‡‡ç”¨ &lt;strong&gt;è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰&lt;/strong&gt; ä½œä¸ºæ›¿ä»£ä¼ é€’å›è°ƒå‡½æ•°çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…è®¢é˜…åŒä¸€ä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸»é¢˜çŠ¶æ€å‘ç”Ÿæ”¹å˜åˆ™ç«‹å³å‘å¸ƒï¼Œé€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ã€‚å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å®Œå…¨è§£è€¦ï¼Œä»…ä»…æ˜¯å…±äº«åŒä¸€è‡ªå®šä¹‰äº‹ä»¶çš„åç§°ã€‚å½“æ–°çš„è®¢é˜…è€…å‡ºç°ï¼Œå‘å¸ƒè€…æ— éœ€åšä»»ä½•ä¿®æ”¹ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end javascript pattern" scheme="https://blog.colafornia.me/categories/front-end-javascript-pattern/"/>
    
    
  </entry>
  
</feed>
